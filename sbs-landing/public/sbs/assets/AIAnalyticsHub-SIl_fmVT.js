import{r as x,j as e}from"./vendor-react-MVSD7VGK.js";import{i as j}from"./main-DTZYqsTu.js";import{C as w,a as A,b as k}from"./Card-CNl4AdZD.js";import{S as $}from"./SectionHeader-BFZqpzku.js";import{B as F}from"./Button-BDY0gMZ-.js";import{I as g}from"./Input-OxrVsoY9.js";import"./vendor-BW1Bdpst.js";const y=window.SBS_API_URL||window.location.origin;async function T(r,t,s,a,o,c,i){try{const p=await fetch(`${y}/api/ai/predict-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:r,patient_age:t,patient_gender:s,diagnosis_codes:a,procedure_codes:o,service_date:c,total_amount:i})});if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);return await p.json()}catch(p){return console.error("Claim prediction error:",p),{prediction_type:"claim_approval",confidence:.7,risk_score:30,recommendations:["Unable to analyze claim - please review manually"],insights:{error:"Prediction service unavailable"}}}}async function S(r,t,s={}){try{const a=await fetch(`${y}/api/ai/optimize-cost`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:r,claim_items:t,patient_info:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Cost optimization error:",a),{total_savings:0,savings_percentage:0,optimized_items:[],recommendations:["Unable to analyze costs - please review manually"]}}}async function z(r,t,s=[]){try{const a=await fetch(`${y}/api/ai/detect-fraud`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:r,claim_data:t,historical_claims:s})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Fraud detection error:",a),{is_fraudulent:!1,fraud_score:0,risk_factors:["Unable to analyze - please review manually"],recommendations:["Manual review recommended"]}}}async function E(r,t){try{const s=await fetch(`${y}/api/ai/check-compliance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:r,claim_data:t})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){return console.error("Compliance check error:",s),{is_compliant:!1,violations:["Unable to check compliance"],warnings:["Manual compliance review required"],suggestions:["Consult CHI guidelines"]}}}async function R(r,t){try{const[s,a,o,c]=await Promise.all([T(r,t.patient_age,t.patient_gender,t.diagnosis_codes,t.procedure_codes,t.service_date,t.total_amount),S(r,t.items,t.patient_info),z(r,t),E(r,t)]),i=Math.max(s.risk_score,o.fraud_score,c.is_compliant?0:50),p=[...s.recommendations,...a.recommendations,...o.recommendations,...c.suggestions];let l="APPROVED";return i>70?l="REJECTED":i>40?l="REVIEW_REQUIRED":c.is_compliant?a.savings_percentage>10&&(l="OPTIMIZATION_AVAILABLE"):l="COMPLIANCE_ISSUE",{overall_status:l,overall_risk_score:i,prediction:s,optimization:a,fraud:o,compliance:c,recommendations:p,insights:{potential_savings:a.total_savings,approval_probability:s.confidence,fraud_risk:o.fraud_score,compliance_status:c.is_compliant?"COMPLIANT":"NON_COMPLIANT"}}}catch(s){return console.error("Comprehensive claim analysis error:",s),{overall_status:"ANALYSIS_FAILED",overall_risk_score:0,prediction:{prediction_type:"claim_approval",confidence:.7,risk_score:30,recommendations:["Analysis unavailable"],insights:{}},optimization:{total_savings:0,savings_percentage:0,optimized_items:[],recommendations:["Analysis unavailable"]},fraud:{is_fraudulent:!1,fraud_score:0,risk_factors:["Analysis unavailable"],recommendations:["Manual review"]},compliance:{is_compliant:!1,violations:["Analysis unavailable"],warnings:["Manual review required"],suggestions:["Consult guidelines"]},recommendations:["Unable to perform AI analysis - please review manually"],insights:{error:"AI prediction service unavailable"}}}}async function L(r,t=30){try{const s=await fetch(`${y}/api/ai/facility-analytics?facility_id=${r}&days=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(s){return console.error("Facility analytics error:",s),{total_claims:0,approved_claims:0,rejected_claims:0,average_approval_rate:0,total_amount:0,average_amount:0,top_procedures:[],trends:[]}}}function D({lang:r="en",isRTL:t=!1}){const a=(j[r]||j.en).pages?.aiAnalytics||j.en.pages.aiAnalytics,[o,c]=x.useState("predict"),[i,p]=x.useState({facility_id:1,patient_age:45,patient_gender:"M",diagnosis_codes:["I10","E11.9"],procedure_codes:["1101001","1201001"],service_date:"2026-01-31",total_amount:5e3,items:[{sbs_code:"1101001",quantity:1,description:"CT Scan"},{sbs_code:"1201001",quantity:2,description:"CBC Test"}]}),[l,f]=x.useState(null),[N,C]=x.useState(!1),[h,I]=x.useState(null);x.useEffect(()=>{P()},[]);const P=async()=>{try{const n=await L(i.facility_id,30);I(n)}catch(n){console.error("Failed to load analytics:",n)}},O=async(n,m)=>{C(!0);try{let d;m==="predict"?(d=await T(i.facility_id,i.patient_age,i.patient_gender,i.diagnosis_codes,i.procedure_codes,i.service_date,i.total_amount),f({prediction:d})):m==="optimize"?(d=await S(i.facility_id,i.items),f({optimization:d})):m==="fraud"?(d=await z(i.facility_id,i),f({fraud:d})):m==="compliance"?(d=await E(i.facility_id,i),f({compliance:d})):(d=await R(i.facility_id,i),f(d))}finally{C(!1)}},u=(n,m)=>p(d=>({...d,[n]:m}));return e.jsx("div",{className:"flex-1",children:e.jsxs("main",{className:"max-w-[1500px] mx-auto p-6 sm:p-12 space-y-12 stagger-children",children:[e.jsx("section",{className:"animate-premium-in",children:e.jsx($,{title:a.header.title,subtitle:a.header.subtitle,badge:a.header.badge})}),h&&e.jsxs("section",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 animate-premium-in",style:{animationDelay:"100ms"},children:[e.jsx(_,{label:a.kpis.registryVolume,value:h.total_claims||0,unit:a.kpis.units.claims,color:"blue"}),e.jsx(_,{label:a.kpis.syncSuccess,value:(h.approved_claims/h.total_claims*100||0).toFixed(1),unit:"%",color:"emerald"}),e.jsx(_,{label:a.kpis.totalFlux,value:h.total_amount?.toFixed(0)||0,unit:"SAR",color:"indigo"}),e.jsx(_,{label:a.kpis.avgLatency,value:"1.2",unit:a.kpis.units.seconds,color:"rose"})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-8 animate-premium-in",style:{animationDelay:"200ms"},children:[e.jsxs(w,{children:[e.jsx(A,{title:a.form.title,subtitle:a.form.subtitle}),e.jsxs(k,{className:"space-y-6 py-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(g,{label:a.form.facilityId,type:"number",value:i.facility_id,onChange:n=>u("facility_id",n.target.value)}),e.jsx(g,{label:a.form.yieldValueSar,type:"number",value:i.total_amount,onChange:n=>u("total_amount",n.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(g,{label:a.form.age,type:"number",value:i.patient_age,onChange:n=>u("patient_age",n.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"ai-analytics-gender",className:"text-[10px] font-black uppercase tracking-widest text-slate-400",style:{marginInlineStart:"0.25rem"},children:a.form.gender}),e.jsxs("select",{id:"ai-analytics-gender",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl px-4 py-3.5 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-blue-600/20",value:i.patient_gender,onChange:n=>u("patient_gender",n.target.value),children:[e.jsx("option",{value:"M",children:a.form.genderOptions.male}),e.jsx("option",{value:"F",children:a.form.genderOptions.female})]})]}),e.jsx(g,{label:a.form.date,type:"date",value:i.service_date,onChange:n=>u("service_date",n.target.value)})]}),e.jsx(g,{label:a.form.diagnosisRegistry,placeholder:a.form.diagnosisPlaceholder,value:i.diagnosis_codes.join(", "),onChange:n=>u("diagnosis_codes",n.target.value.split(","))}),e.jsx(g,{label:a.form.procedureCodes,placeholder:a.form.procedurePlaceholder,value:i.procedure_codes.join(", "),onChange:n=>u("procedure_codes",n.target.value.split(","))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(b,{active:o==="predict",label:a.tabs.predict,icon:"online_prediction",onClick:()=>c("predict")}),e.jsx(b,{active:o==="optimize",label:a.tabs.optimize,icon:"savings",onClick:()=>c("optimize")}),e.jsx(b,{active:o==="fraud",label:a.tabs.fraud,icon:"shield_person",onClick:()=>c("fraud")}),e.jsx(b,{active:o==="compliance",label:a.tabs.compliance,icon:"policy",onClick:()=>c("compliance")}),e.jsx(b,{active:o==="analyze",label:a.tabs.analyze,icon:"analytics",onClick:()=>c("analyze")})]}),e.jsx(F,{className:"w-full h-16 text-lg shadow-2xl shadow-blue-600/20",icon:"bolt",loading:N,onClick:()=>O(null,o),children:a.actions.initialize})]}),e.jsx("div",{className:"lg:col-span-7 space-y-8 animate-premium-in",style:{animationDelay:"300ms"},children:e.jsxs(w,{className:"min-h-[600px] flex flex-col bg-slate-950 text-white overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-[200px] font-black",children:"satellite_alt"})}),e.jsx(A,{title:a.terminal.title,subtitle:a.terminal.subtitle}),e.jsx(k,{className:"flex-1 flex flex-col p-10 space-y-8",children:N?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6",children:[e.jsx("div",{className:"size-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:a.terminal.processing})]}):l?e.jsxs("div",{className:"space-y-8 animate-premium-in",children:[e.jsxs("div",{className:"p-8 rounded-[38px] bg-white/5 border border-white/10 flex justify-between items-center group hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:a.terminal.statusLabel}),e.jsx("h4",{className:"text-3xl font-black text-white tracking-tighter uppercase",children:l.overall_status||a.terminal.statusFallback})]}),l.overall_risk_score!==void 0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:a.terminal.riskMarker}),e.jsxs("h4",{className:`text-3xl font-black tracking-tighter ${l.overall_risk_score>70?"text-rose-500":"text-emerald-500"}`,children:[l.overall_risk_score.toFixed(0),"%"]})]})]}),l.prediction&&e.jsx(v,{title:a.results.approvalAnalysis,data:l.prediction,icon:"trending_up"}),l.optimization&&e.jsx(v,{title:a.results.yieldOptimization,data:l.optimization,icon:"savings"}),l.fraud&&e.jsx(v,{title:a.results.integrityAudit,data:l.fraud,icon:"verified",alert:l.fraud.is_fraudulent}),l.compliance&&e.jsx(v,{title:a.results.regulatorySafety,data:l.compliance,icon:"gavel"}),l.recommendations&&e.jsxs("div",{className:"p-8 rounded-[32px] bg-blue-600/10 border border-blue-600/20 space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400",children:a.terminal.recommendations}),e.jsx("ul",{className:"space-y-3",children:l.recommendations.map((n,m)=>e.jsxs("li",{className:"flex gap-4 text-xs font-bold text-slate-300",children:[e.jsx("span",{className:"text-blue-500 font-black",children:"•"})," ",n]},m))})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6 opacity-30",children:[e.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"airwave"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:a.terminal.awaiting})]})})]})})]})]})})}function _({label:r,value:t,unit:s,color:a}){const o={blue:"text-blue-600 bg-blue-600/5 border-blue-600/10",emerald:"text-emerald-500 bg-emerald-500/5 border-emerald-500/10",indigo:"text-indigo-600 bg-indigo-600/5 border-indigo-600/10",rose:"text-rose-600 bg-rose-600/5 border-rose-600/10"};return e.jsx(w,{className:`group hover:scale-[1.03] transition-all hover:bg-current hover:shadow-2xl ${o[a]}`,children:e.jsxs(k,{className:"p-8 space-y-6",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:r}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter group-hover:text-white transition-colors",children:t}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest group-hover:text-white/60 transition-colors",children:s})]})]})})}function b({active:r,label:t,icon:s,onClick:a}){return e.jsxs("button",{onClick:a,className:`px-6 py-4 rounded-[24px] border transition-all flex items-center gap-3 ${r?"bg-blue-600 text-white border-blue-600 shadow-xl shadow-blue-600/20 scale-[1.05]":"bg-white dark:bg-slate-900 text-slate-500 border-slate-100 dark:border-slate-800 hover:border-blue-600/30"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xl font-black",children:s}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t})]})}function v({title:r,data:t,icon:s,alert:a}){return e.jsxs("div",{className:`p-8 rounded-[38px] border bg-white/5 transition-all hover:bg-white/10 ${a?"border-rose-500/30":"border-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${a?"bg-rose-500 text-white shadow-xl shadow-rose-500/20":"bg-white/10 text-slate-400"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl font-black",children:s})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-black text-white",children:r}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Inference Complete"})]})]}),t.confidence&&e.jsxs("span",{className:"text-xl font-black text-blue-600 tracking-tighter",children:[(t.confidence*100).toFixed(0),"% ",e.jsx("span",{className:"text-[10px]",children:"Conf."})]})]}),t.recommendations&&e.jsx("div",{className:"grid gap-2",children:t.recommendations.map((o,c)=>e.jsxs("p",{className:"text-[11px] font-bold text-slate-400 leading-relaxed italic",children:["• ",o]},c))}),t.risk_factors&&e.jsx("div",{className:"grid gap-2",children:t.risk_factors.map((o,c)=>e.jsxs("p",{className:"text-[11px] font-bold text-rose-400 leading-relaxed italic animate-pulse",children:["• ",o]},c))})]})}export{D as AIAnalyticsHub};
//# sourceMappingURL=AIAnalyticsHub-SIl_fmVT.js.map
