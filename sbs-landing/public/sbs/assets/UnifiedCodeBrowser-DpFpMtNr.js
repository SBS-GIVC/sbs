const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./aiAssistantService-BWORHkI6.js","./main-DTZYqsTu.js","./vendor-react-MVSD7VGK.js","./vendor-BW1Bdpst.js","./main-tZ5l3Hja.css"])))=>i.map(i=>d[i]);
import{r as y,j as a}from"./vendor-react-MVSD7VGK.js";import{_ as B,i as v,u as T}from"./main-DTZYqsTu.js";import{C as A,a as U,b as $}from"./Card-CNl4AdZD.js";import{S as H}from"./SectionHeader-BFZqpzku.js";import{B as j}from"./Button-BDY0gMZ-.js";import"./vendor-BW1Bdpst.js";const I={},M={SBS:{id:"sbs",name:"Saudi Billing System",uri:"http://chi.gov.sa/sbs",version:"3.1",publisher:"Council of Health Insurance (CHI)",count:10466,color:"#137fec",icon:"receipt_long",loaded:!0},ICD10AM:{id:"icd10am",name:"ICD-10-AM",uri:"http://hl7.org/fhir/sid/icd-10-am",version:"12th Edition",publisher:"IHPA / WHO",count:17e3,color:"#ef4444",icon:"diagnosis",loaded:!1},ICD11:{id:"icd11",name:"ICD-11",uri:"http://id.who.int/icd/release/11",version:"2025",publisher:"WHO",count:17e3,color:"#f97316",icon:"medical_information",loaded:!1},SNOMED:{id:"snomed",name:"SNOMED CT",uri:"http://snomed.info/sct",version:"July 2025",publisher:"SNOMED International",count:36e4,color:"#8b5cf6",icon:"psychology",loaded:!1},DRG:{id:"drg",name:"Diagnosis Related Groups",uri:"http://chi.gov.sa/drg",version:"AR-DRG 11.0",publisher:"IHPA / CHI",count:800,color:"#22c55e",icon:"category",loaded:!1},LOINC:{id:"loinc",name:"LOINC",uri:"http://loinc.org",version:"2.81",publisher:"Regenstrief Institute",count:1e5,color:"#06b6d4",icon:"science",loaded:!1},RXNORM:{id:"rxnorm",name:"RxNorm",uri:"http://www.nlm.nih.gov/research/umls/rxnorm",version:"Weekly",publisher:"US NLM",count:12e4,color:"#ec4899",icon:"medication",loaded:!1},ACHI:{id:"achi",name:"ACHI",uri:"http://hl7.org/fhir/sid/achi",version:"12th Edition",publisher:"IHPA",count:6e3,color:"#14b8a6",icon:"surgical",loaded:!1},DENTAL:{id:"dental",name:"Dental Pricelist",uri:"http://chi.gov.sa/sbs/dental",version:"Gov Sector",publisher:"CHI",count:713,color:"#0ea5a4",icon:"dentistry",loaded:!0}},G={diagnosis:["icd10am","icd11","snomed"],procedure:["sbs","achi","snomed","dental"],laboratory:["loinc"],medication:["rxnorm"],billing:["sbs","drg","dental"],clinical:["snomed","icd10am","icd11"]};class F{constructor(){this.systems=M,this.cache=new Map,this.mappings=new Map,this.landingApiBase=typeof window<"u"&&window.SBS_API_URL?window.SBS_API_URL:"",this.icd11Config={baseUrl:"https://id.who.int/icd",apiUrl:"https://id.who.int/icd/release/11/2025/mms",tokenUrl:"https://icdaccessmanagement.who.int/connect/token",clientId:I?.VITE_ICD11_CLIENT_ID||"",clientSecret:I?.VITE_ICD11_CLIENT_SECRET||""},this.snomedConfig={baseUrl:"https://snowstorm.ihtsdotools.org/snowstorm/snomed-ct",fhirUrl:"https://snowstorm.ihtsdotools.org/fhir"},this.loincConfig={baseUrl:"https://fhir.loinc.org",searchUrl:"https://loinc.org/api"}}getSystems(){return Object.values(this.systems)}getSystem(r){return Object.values(this.systems).find(s=>s.id===r)}async search(r,s={}){const{systems:e=null,category:t=null,limit:i=20,language:n="en",includeInactive:p=!1}=s;let d=Object.keys(this.systems);e&&e.length>0?d=e:t&&(d=G[t]||d);const c=[],x=[];for(const u of d){const g=this.getSystem(u);g&&x.push(this.searchSystem(u,r,{limit:i,language:n}).then(m=>m.map(w=>({...w,system:g.id,systemName:g.name,systemUri:g.uri,systemColor:g.color}))).catch(m=>(console.warn(`Search failed for ${u}:`,m),[])))}const b=await Promise.all(x);for(const u of b)c.push(...u);return c.sort((u,g)=>(g.score||0)-(u.score||0)),{total:c.length,results:c.slice(0,i),systems:d.map(u=>this.getSystem(u)).filter(Boolean)}}async searchSystem(r,s,e={}){const{limit:t=20,language:i="en"}=e;switch(r){case"sbs":return this.searchSBS(s,t);case"achi":return this.searchACHI(s,t);case"dental":return this.searchDental(s,t);case"icd11":return this.searchICD11(s,t,i);case"snomed":return this.searchSNOMED(s,t);case"loinc":return this.searchLOINC(s,t);case"icd10am":return this.searchICD10AM(s,t);case"drg":return this.searchDRG(s,t);default:return[]}}async searchLandingTerminology(r,s,e){const t=`landing:${r}:${s}:${e}`;if(this.cache.has(t))return this.cache.get(t);const i=new URLSearchParams({system:r,q:s,limit:String(e),offset:"0"}),n=await fetch(`${this.landingApiBase}/api/terminology/search?${i.toString()}`);if(!n.ok)throw new Error(`Landing terminology error: ${n.status}`);const d=((await n.json()).results||[]).map(c=>({code:c.code,display:c.display||c.desc||"",category:c.category||c.chapter||null,score:c.score||.9,sbsCode:c.sbsCode||null,specialty:c.specialty||null,priceSar:c.priceSar}));return this.cache.set(t,d),d}async searchSBS(r,s){try{return await this.searchLandingTerminology("sbs",r,s)}catch(i){console.warn("Landing SBS search unavailable, using local index:",i?.message||i)}const{aiAssistant:e}=await B(async()=>{const{aiAssistant:i}=await import("./aiAssistantService-BWORHkI6.js");return{aiAssistant:i}},__vite__mapDeps([0,1,2,3,4]),import.meta.url);return((await e.smartSearch(r,{limit:s,includeAI:!1})).results||[]).map(i=>({code:i.code,display:i.desc,displayAr:i.descAr,category:i.category,score:i.score}))}async searchACHI(r,s){try{return await this.searchLandingTerminology("achi",r,s)}catch(e){return console.warn("Landing ACHI search unavailable:",e?.message||e),[]}}async searchDental(r,s){try{return await this.searchLandingTerminology("dental",r,s)}catch(e){return console.warn("Landing dental search unavailable:",e?.message||e),[]}}async searchICD11(r,s,e="en"){const t=`icd11:${r}:${e}:${s}`;if(this.cache.has(t))return this.cache.get(t);try{const i=await this.getICD11Token(),n=await fetch(`${this.icd11Config.apiUrl}/search?q=${encodeURIComponent(r)}&subtreeFilterUsesFoundationDescendants=false&includeKeywordResult=true&useFlexisearch=true&flatResults=true&highlightingEnabled=false&medicalCodingMode=true`,{headers:{Authorization:`Bearer ${i}`,Accept:"application/json","Accept-Language":e,"API-Version":"v2"}});if(!n.ok)throw new Error(`ICD-11 API error: ${n.status}`);const d=((await n.json()).destinationEntities||[]).slice(0,s).map(c=>({code:c.theCode,display:c.title,definition:c.definition,chapter:c.chapter,score:c.score||.8}));return this.cache.set(t,d),d}catch(i){return console.error("ICD-11 search error:",i),this.mockICD11Search(r,s)}}async getICD11Token(){const r="icd11_token",s=this.cache.get(r);if(s&&s.expiresAt>Date.now())return s.token;const e=await fetch(this.icd11Config.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:this.icd11Config.clientId,client_secret:this.icd11Config.clientSecret,scope:"icdapi_access"})});if(!e.ok)throw new Error("Failed to get ICD-11 token");const t=await e.json();return this.cache.set(r,{token:t.access_token,expiresAt:Date.now()+t.expires_in*1e3-6e4}),t.access_token}async searchSNOMED(r,s){try{const t=await this.searchLandingTerminology("snomed",r,s);if(t.length>0)return t}catch(t){console.warn("Landing SNOMED search unavailable, falling back to Snowstorm:",t?.message||t)}const e=`snomed:${r}:${s}`;if(this.cache.has(e))return this.cache.get(e);try{const t=await fetch(`${this.snomedConfig.baseUrl}/MAIN/concepts?term=${encodeURIComponent(r)}&limit=${s}&activeFilter=true`,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`SNOMED API error: ${t.status}`);const n=((await t.json()).items||[]).map(p=>({code:p.conceptId,display:p.fsn?.term||p.pt?.term,displayShort:p.pt?.term,moduleId:p.moduleId,active:p.active,score:.9}));return this.cache.set(e,n),n}catch(t){return console.error("SNOMED search error:",t),this.mockSNOMEDSearch(r,s)}}async searchLOINC(r,s){const e=`loinc:${r}:${s}`;if(this.cache.has(e))return this.cache.get(e);try{const t=await fetch(`${this.loincConfig.baseUrl}/CodeSystem/$lookup?system=http://loinc.org&code=${encodeURIComponent(r)}`,{headers:{Accept:"application/fhir+json"}});if(!t.ok){const p=await fetch(`${this.loincConfig.baseUrl}/CodeSystem?_content=${encodeURIComponent(r)}&_count=${s}`,{headers:{Accept:"application/fhir+json"}});if(!p.ok)throw new Error("LOINC search failed");const d=await p.json();return this.parseFHIRBundle(d,"loinc")}const i=await t.json(),n=this.parseLOINCParameters(i);return this.cache.set(e,n),n}catch(t){return console.error("LOINC search error:",t),this.mockLOINCSearch(r,s)}}async searchICD10AM(r,s){return this.mockICD10Search(r,s)}async searchDRG(r,s){return this.mockDRGSearch(r,s)}async getMappings(r,s){const e=`mapping:${s}:${r}`;if(this.cache.has(e))return this.cache.get(e);const t=[],i=await this.getLocalMappings(r,s);if(t.push(...i),s==="snomed"){const n=await this.translateSNOMEDtoICD(r);t.push(...n)}return this.cache.set(e,t),t}async translateSNOMEDtoICD(r){try{const s=await fetch(`${this.snomedConfig.fhirUrl}/ConceptMap/$translate?code=${r}&system=http://snomed.info/sct&target=http://hl7.org/fhir/sid/icd-10`,{headers:{Accept:"application/fhir+json"}});if(!s.ok)return[];const e=await s.json();return this.parseTranslationResult(e)}catch(s){return console.error("SNOMED to ICD translation error:",s),[]}}async getLocalMappings(r,s){try{const e=new URLSearchParams({sourceSystem:s,code:r}),t=await fetch(`${this.landingApiBase}/api/terminology/mappings?${e.toString()}`);return t.ok?((await t.json()).mappings||[]).map(n=>({system:n.system,code:n.code,display:n.display,equivalence:n.equivalence||"related",confidence:n.confidence||.8})):[]}catch(e){return console.warn("Local mapping lookup failed:",e?.message||e),[]}}parseLOINCParameters(r){const s=[],e=r.parameter||[],t=e.find(n=>n.name==="code")?.valueCode,i=e.find(n=>n.name==="display")?.valueString;return t&&s.push({code:t,display:i,score:1}),s}parseFHIRBundle(r,s){const e=[],t=r.entry||[];for(const i of t)i.resource&&e.push({code:i.resource.code||i.resource.id,display:i.resource.display||i.resource.name,score:i.search?.score||.5});return e}parseTranslationResult(r){const s=[];if(!r.parameter?.find(i=>i.name==="result")?.valueBoolean)return s;const t=r.parameter?.filter(i=>i.name==="match")||[];for(const i of t){const n=i.part||[],p=n.find(c=>c.name==="equivalence")?.valueCoding?.code,d=n.find(c=>c.name==="concept")?.valueCoding;d&&s.push({system:d.system,code:d.code,display:d.display,equivalence:p||"related",confidence:p==="equivalent"?1:.8})}return s}mockICD11Search(r,s){const e=[{code:"BA00",display:"Essential hypertension",chapter:"Cardiovascular"},{code:"BA01",display:"Hypertensive heart disease",chapter:"Cardiovascular"},{code:"5A11",display:"Type 2 diabetes mellitus",chapter:"Endocrine"},{code:"2A00",display:"Acute appendicitis",chapter:"Digestive"},{code:"CA40",display:"Acute myocardial infarction",chapter:"Cardiovascular"},{code:"KB23",display:"Femoral neck fracture",chapter:"Musculoskeletal"},{code:"DB90",display:"Pneumonia",chapter:"Respiratory"},{code:"FA01",display:"Acute kidney failure",chapter:"Genitourinary"}],t=r.toLowerCase();return e.filter(i=>i.display.toLowerCase().includes(t)||i.code.toLowerCase().includes(t)).slice(0,s).map(i=>({...i,score:.85}))}mockSNOMEDSearch(r,s){const e=[{code:"38341003",display:"Hypertensive disorder"},{code:"73211009",display:"Diabetes mellitus"},{code:"74400008",display:"Appendicitis"},{code:"22298006",display:"Myocardial infarction"},{code:"71620000",display:"Fracture of femoral neck"},{code:"233604007",display:"Pneumonia"},{code:"14669001",display:"Acute kidney failure"},{code:"254837009",display:"Malignant neoplasm of breast"}],t=r.toLowerCase();return e.filter(i=>i.display.toLowerCase().includes(t)||i.code.includes(t)).slice(0,s).map(i=>({...i,score:.9}))}mockLOINCSearch(r,s){const e=[{code:"2339-0",display:"Glucose [Mass/volume] in Blood"},{code:"2345-7",display:"Glucose [Mass/volume] in Serum or Plasma"},{code:"4548-4",display:"Hemoglobin A1c/Hemoglobin.total in Blood"},{code:"2093-3",display:"Cholesterol [Mass/volume] in Serum or Plasma"},{code:"2571-8",display:"Triglyceride [Mass/volume] in Serum or Plasma"},{code:"26453-1",display:"Erythrocytes [#/volume] in Blood"},{code:"26464-8",display:"Leukocytes [#/volume] in Blood"},{code:"38483-4",display:"Creatinine [Mass/volume] in Blood"}],t=r.toLowerCase();return e.filter(i=>i.display.toLowerCase().includes(t)||i.code.includes(t)).slice(0,s).map(i=>({...i,score:.85}))}mockICD10Search(r,s){const e=[{code:"I10",display:"Essential (primary) hypertension"},{code:"E11.9",display:"Type 2 diabetes mellitus without complications"},{code:"K35.80",display:"Unspecified acute appendicitis"},{code:"I21.9",display:"Acute myocardial infarction, unspecified"},{code:"S72.00",display:"Fracture of unspecified part of neck of femur"},{code:"J18.9",display:"Pneumonia, unspecified organism"},{code:"N17.9",display:"Acute kidney failure, unspecified"},{code:"C50.9",display:"Malignant neoplasm of breast, unspecified"}],t=r.toLowerCase();return e.filter(i=>i.display.toLowerCase().includes(t)||i.code.toLowerCase().includes(t)).slice(0,s).map(i=>({...i,score:.85}))}mockDRGSearch(r,s){const e=[{code:"DRG-194",display:"Simple Pneumonia & Pleurisy w CC",weight:.9,avgLOS:3.2},{code:"DRG-195",display:"Simple Pneumonia & Pleurisy w/o CC",weight:.6,avgLOS:2.1},{code:"DRG-470",display:"Major Hip and Knee Joint Replacement",weight:1.9,avgLOS:2.5},{code:"DRG-291",display:"Heart Failure & Shock w MCC",weight:1.5,avgLOS:4.8},{code:"DRG-292",display:"Heart Failure & Shock w CC",weight:1,avgLOS:3.5},{code:"DRG-340",display:"Appendectomy w Complicated Principal Diag w MCC",weight:2.8,avgLOS:6.5},{code:"DRG-341",display:"Appendectomy w Complicated Principal Diag w CC",weight:1.8,avgLOS:4.2},{code:"DRG-342",display:"Appendectomy w Complicated Principal Diag w/o CC",weight:1.2,avgLOS:2.8}],t=r.toLowerCase();return e.filter(i=>i.display.toLowerCase().includes(t)||i.code.toLowerCase().includes(t)).slice(0,s).map(i=>({...i,score:.85}))}}const D=new F;function X({lang:l="en",isRTL:r=!1}){const e=(v[l]||v.en).pages?.unifiedBrowser||v.en.pages.unifiedBrowser,[t,i]=y.useState(""),[n,p]=y.useState([]),[d,c]=y.useState("all"),[x,b]=y.useState({total:0,results:[],systems:[]}),[u,g]=y.useState(!1),[m,w]=y.useState(null),[R,S]=y.useState([]),[E,k]=y.useState(!1),N=T(),C=y.useMemo(()=>Object.values(M),[]);y.useEffect(()=>{if(t.length<2){b({total:0,results:[],systems:[]});return}const o=setTimeout(async()=>{g(!0);try{const h=await D.search(t,{systems:n.length>0?n:null,category:d!=="all"?d:null,limit:50});b(h)}finally{g(!1)}},300);return()=>clearTimeout(o)},[t,n,d]);const _=o=>{p(h=>h.includes(o)?h.filter(f=>f!==o):[...h,o])},O=async o=>{w(o),S([]),k(!0);try{const h=await D.getMappings(o.code,o.system);S(h)}finally{k(!1)}},P=o=>{const h=String(o?.system||"").toLowerCase(),f=encodeURIComponent(o?.code||"");return h==="sbs"?"https://portal.nphies.sa":h==="icd11"?`https://icd.who.int/browse11/l-m/en?q=${f}`:h==="icd10am"?`https://www.who.int/standards/classifications/classification-of-diseases?q=${f}`:h==="snomed"?`https://browser.ihtsdotools.org/?perspective=full&conceptId1=${f}`:h==="loinc"?`https://loinc.org/search/?search=${f}`:`https://www.google.com/search?q=${encodeURIComponent(`${o?.systemName||"healthcare code"} ${o?.code||""}`)}`};return a.jsxs("div",{className:"flex-1 overflow-hidden bg-grid flex flex-col",children:[a.jsxs("header",{className:"flex-shrink-0 bg-gradient-to-r from-blue-50 via-white to-cyan-50 px-4 py-8 sm:px-8 sm:py-10 border-b border-slate-200/70 space-y-8 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 pointer-events-none",children:a.jsx("span",{className:"material-symbols-outlined text-[200px] font-black",children:"hub"})}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-8",children:[a.jsx("div",{className:"space-y-4",children:a.jsx(H,{title:e.header.title,subtitle:e.header.subtitleTemplate.replace("{count}",C.length.toLocaleString(l==="ar"?"ar-SA":void 0)),badge:e.header.badge})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"px-4 py-2 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-600 text-[10px] font-black uppercase tracking-widest",children:e.header.tags.fhir}),a.jsx("div",{className:"px-4 py-2 rounded-2xl bg-blue-600/10 border border-blue-600/20 text-blue-600 text-[10px] font-black uppercase tracking-widest",children:e.header.tags.ai})]})]}),a.jsxs("div",{className:"relative z-10 space-y-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("span",{className:`absolute ${r?"right-6":"left-6"} top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-500`,children:"search"}),a.jsx("input",{type:"text",value:t,onChange:o=>i(o.target.value),placeholder:e.search.placeholder,"aria-label":e.search.label,"data-testid":"unifiedbrowser-search",className:`w-full h-16 sm:h-20 bg-white border border-slate-200 rounded-[24px] sm:rounded-[32px] ${r?"pr-14 sm:pr-16 pl-16 sm:pl-20 text-right":"pl-14 sm:pl-16 pr-16 sm:pr-20 text-left"} text-base sm:text-lg font-bold text-slate-900 placeholder:text-slate-500 focus:outline-none focus:border-blue-600/30 focus:ring-4 focus:ring-blue-600/10 transition-all shadow-sm`}),u&&a.jsx("div",{className:`absolute ${r?"left-8":"right-8"} top-1/2 -translate-y-1/2 size-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin`})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(o=>a.jsxs("button",{onClick:()=>_(o.id),"data-testid":`unifiedbrowser-system-${o.id}`,className:`px-3 sm:px-5 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all flex items-center gap-2 ${n.includes(o.id)?"border-current shadow-lg shadow-current/20":"opacity-80 border-slate-200 text-slate-600 hover:border-slate-300"}`,style:{color:n.includes(o.id)?o.color:void 0,backgroundColor:n.includes(o.id)?`${o.color}15`:"white"},children:[a.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:o.color}}),o.name]},o.id))})]})]}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsx("div",{className:"flex-1 overflow-y-auto px-8 sm:px-12 py-10 scrollbar-hide",children:a.jsx("div",{className:"max-w-[1200px] mx-auto space-y-6",children:t.length<2?a.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-premium-in",children:C.map(o=>a.jsx(K,{system:o,t:e,lang:l},o.id))}):x.results.length>0?a.jsx("div",{className:"space-y-4 stagger-children",children:x.results.map((o,h)=>a.jsx(z,{code:o,selected:m?.code===o.code,onClick:()=>O(o),t:e},o.code+h))}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-40",children:[a.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"manage_search"}),a.jsx("p",{className:"text-sm font-black uppercase tracking-widest mt-6",children:e.empty})]})})}),m&&a.jsx("aside",{"data-testid":"unifiedbrowser-detail",className:"w-[480px] bg-white dark:bg-slate-950 border-l border-slate-100 dark:border-slate-800 overflow-y-auto animate-premium-in shadow-2xl relative",children:a.jsxs("div",{className:"p-12 space-y-12",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"inline-flex px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-blue-600/10 text-blue-600 border border-blue-600/20",children:m.systemName}),a.jsx("h2",{className:"text-4xl font-black tracking-tighter text-slate-900 dark:text-white",children:m.code})]}),a.jsx("button",{type:"button",onClick:()=>w(null),"aria-label":e.detail.close,className:"p-3 rounded-2xl bg-slate-50 dark:bg-slate-900 text-slate-400",children:a.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:e.detail.semantics}),a.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-gray-100 leading-relaxed italic",children:['"',m.display,'"']})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(L,{label:e.detail.statusLabel,value:e.detail.statusActive,color:"emerald"}),a.jsx(L,{label:e.detail.authReqLabel,value:e.detail.authReqManual,color:"amber"})]})]}),a.jsxs(A,{children:[a.jsx(U,{title:e.detail.bridgingTitle,subtitle:e.detail.bridgingSubtitle,icon:"lan"}),a.jsx($,{className:"p-0",children:E?a.jsx("div",{className:"p-10 text-center",children:a.jsx("div",{className:"size-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):a.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:R.map((o,h)=>a.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:o.system}),a.jsx("p",{className:"text-sm font-black text-blue-600 font-mono tracking-tight",children:o.code})]}),a.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 rounded-lg bg-emerald-500/10 text-emerald-500 border border-emerald-500/20",children:[Math.round(o.confidence*100),"% ",e.detail.match]})]},h))})})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsx(j,{className:"w-full py-6 shadow-2xl shadow-blue-600/20",icon:"add_reaction","data-testid":"unifiedbrowser-add-context",onClick:()=>{const o={source:"unified-browser",system:m.system,systemName:m.systemName,code:m.code,description:m.display};try{window.sessionStorage.setItem("sbs_claim_context_code",JSON.stringify(o))}catch{}try{window.dispatchEvent(new CustomEvent("sbs:claim-context",{detail:o}))}catch{}N.success(e.toast.contextAdded),window.dispatchEvent(new CustomEvent("sbs:navigate",{detail:{view:"claim-builder"}}))},children:e.actions.addContext}),a.jsx(j,{variant:"secondary",className:"w-full py-6",icon:"share",onClick:()=>{const o=P(m);window.open(o,"_blank","noopener,noreferrer"),N.info(e.toast.openedReference)},children:e.actions.deepLink})]})]})})]})]})}function K({system:l,t:r,lang:s="en"}){return a.jsx(A,{className:"hover:scale-[1.02] transition-transform",children:a.jsxs($,{className:"p-8 space-y-4",children:[a.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center text-2xl",style:{backgroundColor:`${l.color}15`,color:l.color},children:a.jsx("span",{className:"material-symbols-outlined",children:l.icon})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-tight",children:l.name}),a.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[l.count.toLocaleString(s==="ar"?"ar-SA":void 0)," ",r.systems.codes]})]})]})})}function z({code:l,selected:r,onClick:s,t:e}){return a.jsxs("button",{type:"button",onClick:s,"data-testid":`unifiedbrowser-result-${l.system}-${l.code}`,className:`p-6 rounded-[28px] border-2 transition-all cursor-pointer flex items-center gap-6 ${r?"border-blue-600 bg-blue-600/5 shadow-2xl shadow-blue-600/10":"bg-white dark:bg-slate-950 border-slate-100 dark:border-slate-900 hover:border-slate-300 dark:hover:border-slate-700"}`,"aria-label":e.result.ariaLabelTemplate.replace("{system}",l.systemName).replace("{code}",l.code),children:[a.jsx("div",{className:"size-14 rounded-2xl flex items-center justify-center text-2xl shrink-0",style:{backgroundColor:`${l.systemColor}15`,color:l.systemColor},children:a.jsx("span",{className:"material-symbols-outlined",children:"api"})}),a.jsxs("div",{className:"flex-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded border border-current",style:{color:l.systemColor,backgroundColor:`${l.systemColor}10`},children:l.systemName}),a.jsx("span",{className:"text-lg font-black text-blue-600 font-mono tracking-tighter",children:l.code})]}),a.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-gray-200 line-clamp-1 italic",children:['"',l.display,'"']})]}),a.jsx("span",{className:"material-symbols-outlined text-slate-300 group-hover:text-blue-600",children:"chevron_right"})]})}function L({label:l,value:r,color:s}){return a.jsxs("div",{className:"p-5 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 space-y-1",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:l}),a.jsx("p",{className:`text-sm font-black ${s==="emerald"?"text-emerald-500":"text-amber-500"}`,children:r})]})}export{X as UnifiedCodeBrowser};
//# sourceMappingURL=UnifiedCodeBrowser-DpFpMtNr.js.map
