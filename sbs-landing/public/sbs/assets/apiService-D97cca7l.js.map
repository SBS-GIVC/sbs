{"version":3,"file":"apiService-D97cca7l.js","sources":["../../src/services/apiService.js"],"sourcesContent":["// API Service - Integration with SBS Backend\nconst API_BASE_URL = (() => {\n  // Prefer explicitly configured API URL; fall back to relative path for Vite proxy.\n  if (window.SBS_API_URL && typeof window.SBS_API_URL === 'string') {\n    return window.SBS_API_URL;\n  }\n  return ''; // Relative path to use Vite proxy\n})();\n\nexport class APIService {\n  /**\n   * Submit a signed claim payload to NPHIES Bridge\n   */\n  static async submitClaim(facilityId, fhirPayload, signature) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/submit-claim`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          facility_id: facilityId,\n          fhir_payload: fhirPayload,\n          signature: signature,\n          resource_type: \"Claim\"\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to submit claim: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error submitting claim:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get claim status by Transaction UUID\n   */\n  static async getClaimStatus(transactionUuid) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/claim-status/${transactionUuid}`);\n\n      if (!response.ok) {\n        throw new Error(`Failed to get claim status: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error getting claim status:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Normalize medical codes using SBS engine\n   * Payload: { facility_id, internal_code, description }\n   */\n  static async normalizeCode(internalCode, description, facilityId = 1) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/normalize`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          internal_code: internalCode,\n          description,\n          facility_id: facilityId\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to normalize code: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error normalizing code:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Validate claim against Financial Rules Engine\n   * Payload: FHIR Claim resource\n   */\n  static async validateClaim(claimData) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/validate`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(claimData)\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to validate claim: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error validating claim:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Sign claim payload using Facility Certificate\n   */\n  static async signClaim(facilityId, payload) {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/sign`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          facility_id: facilityId,\n          payload: payload\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to sign claim: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error signing claim:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Health check (Broad check)\n   */\n  static async healthCheck() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/health`);\n      return await response.json();\n    } catch (error) {\n      console.error('Health check failed:', error);\n      return { status: 'error', message: error.message };\n    }\n  }\n}\n"],"names":["API_BASE_URL","APIService","facilityId","fhirPayload","signature","response","error","transactionUuid","internalCode","description","claimData","payload"],"mappings":"AACA,MAAMA,EAEA,OAAO,aAAe,OAAO,OAAO,aAAgB,SAC/C,OAAO,YAET,GAGF,MAAMC,CAAW,CAItB,aAAa,YAAYC,EAAYC,EAAaC,EAAW,CAC3D,GAAI,CACF,MAAMC,EAAW,MAAM,MAAM,GAAGL,CAAY,oBAAqB,CAC/D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAC1B,EACQ,KAAM,KAAK,UAAU,CACnB,YAAaE,EACb,aAAcC,EACd,UAAWC,EACX,cAAe,OACzB,CAAS,CACT,CAAO,EAED,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,2BAA2BA,EAAS,UAAU,EAAE,EAGlE,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAKA,aAAa,eAAeC,EAAiB,CAC3C,GAAI,CACF,MAAMF,EAAW,MAAM,MAAM,GAAGL,CAAY,qBAAqBO,CAAe,EAAE,EAElF,GAAI,CAACF,EAAS,GACZ,MAAM,IAAI,MAAM,+BAA+BA,EAAS,UAAU,EAAE,EAGtE,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,cAAQ,MAAM,8BAA+BA,CAAK,EAC5CA,CACR,CACF,CAMA,aAAa,cAAcE,EAAcC,EAAaP,EAAa,EAAG,CACpE,GAAI,CACF,MAAMG,EAAW,MAAM,MAAM,GAAGL,CAAY,iBAAkB,CAC5D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAC1B,EACQ,KAAM,KAAK,UAAU,CACnB,cAAeQ,EACf,YAAAC,EACA,YAAaP,CACvB,CAAS,CACT,CAAO,EAED,GAAI,CAACG,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6BA,EAAS,UAAU,EAAE,EAGpE,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAMA,aAAa,cAAcI,EAAW,CACpC,GAAI,CACF,MAAML,EAAW,MAAM,MAAM,GAAGL,CAAY,gBAAiB,CAC3D,OAAQ,OACR,QAAS,CACP,eAAgB,kBAC1B,EACQ,KAAM,KAAK,UAAUU,CAAS,CACtC,CAAO,EAED,GAAI,CAACL,EAAS,GACZ,MAAM,IAAI,MAAM,6BAA6BA,EAAS,UAAU,EAAE,EAGpE,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CAKA,aAAa,UAAUJ,EAAYS,EAAS,CAC1C,GAAI,CACF,MAAMN,EAAW,MAAM,MAAM,GAAGL,CAAY,YAAa,CACvD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAC1B,EACQ,KAAM,KAAK,UAAU,CACnB,YAAaE,EACb,QAASS,CACnB,CAAS,CACT,CAAO,EAED,GAAI,CAACN,EAAS,GACZ,MAAM,IAAI,MAAM,yBAAyBA,EAAS,UAAU,EAAE,EAGhE,OAAO,MAAMA,EAAS,KAAI,CAC5B,OAASC,EAAO,CACd,cAAQ,MAAM,uBAAwBA,CAAK,EACrCA,CACR,CACF,CAKA,aAAa,aAAc,CACzB,GAAI,CAEF,OAAO,MADU,MAAM,MAAM,GAAGN,CAAY,aAAa,GACnC,KAAI,CAC5B,OAASM,EAAO,CACd,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,CAAE,OAAQ,QAAS,QAASA,EAAM,OAAO,CAClD,CACF,CACF"}