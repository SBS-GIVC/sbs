import{r as t,j as e}from"./vendor-react-DS7a0TT8.js";import{aiAssistant as n}from"./aiAssistantService-DtV1pYK4.js";import{u as T}from"./main-CrAJ0RmW.js";import{C as A,b as z}from"./Card-BwXlqzF_.js";import{S as G}from"./SectionHeader-Cy0sm8nx.js";import{B as v}from"./Button-TZaBe_4z.js";import"./vendor-hzXslIYo.js";function W(){const[r,d]=t.useState(""),[i,x]=t.useState("all"),[a,h]=t.useState(null),[C,f]=t.useState(!1),[u,y]=t.useState(!0),[j,N]=t.useState(null),[p,w]=t.useState(100),S=t.useRef(null),m=T(),[o,_]=t.useState([]),[E,I]=t.useState(["all"]),[c,b]=t.useState({results:[],source:"local"});t.useEffect(()=>{let s=!1;return(async()=>{y(!0);try{if(await n.ensureCatalogLoaded(),s)return;const l=n.getAllCodes();_(l),I(["all",...n.getCategories()]),b({results:l,source:"local"})}finally{s||y(!1)}})(),()=>{s=!0}},[]),t.useEffect(()=>{if(u)return;const s=setTimeout(async()=>{if(r.length>=2){f(!0);try{const l=await n.smartSearch(r,{limit:200,category:i==="all"?null:i,includeAI:!0});b(l),N(l.aiInsights)}finally{f(!1)}}else{const l=i==="all"?o:o.filter(g=>g.category===i);b({results:l,source:"local"}),N(null)}},300);return()=>clearTimeout(s)},[r,i,o,u]),t.useEffect(()=>{w(100)},[r,i]);const D=t.useMemo(()=>c.results.slice(0,p),[c,p]),B=s=>{const{scrollTop:l,scrollHeight:g,clientHeight:L}=s.target;g-l-L<400&&p<c.results.length&&w(R=>R+100)},k=s=>{navigator.clipboard.writeText(s).then(()=>m.success(`Code ${s} synchronized to clipboard`)).catch(()=>m.error("Clipboard access denied by browser"))};return e.jsxs("div",{className:"flex-1 overflow-hidden bg-grid flex",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"px-8 py-10 sm:px-12 space-y-8 animate-premium-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[e.jsx(G,{title:"Terminology Explorer",subtitle:`Global registry of ${o.length.toLocaleString()} individual SBS clinical markers.`,badge:"Knowledge Graph"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900/50 p-1.5 rounded-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("button",{className:"px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-white dark:bg-slate-800 shadow-sm",children:"Grid Matrix"}),e.jsx("button",{className:"px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Condensed"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search by ID, semantics, or clinical description...",className:"w-full h-16 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-[28px] pl-14 pr-20 text-sm font-bold focus:outline-none focus:border-blue-600/30 focus:ring-4 focus:ring-blue-600/5 transition-all shadow-sm",value:r,onChange:s=>d(s.target.value)}),C&&e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 size-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e.jsx("select",{className:"h-16 px-6 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-[28px] text-xs font-black uppercase tracking-widest focus:outline-none",value:i,onChange:s=>x(s.target.value),children:E.map(s=>e.jsx("option",{value:s,children:s.replace(/_/g," ")},s))})]}),j&&e.jsxs("div",{className:"p-4 rounded-2xl bg-blue-600/5 border border-blue-600/10 flex items-center gap-3 animate-premium-in",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"auto_awesome"}),e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-gray-300 italic",children:j})]}),u&&e.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 animate-spin",children:"progress_activity"}),e.jsx("p",{className:"text-xs font-bold text-slate-500",children:"Loading official SBS catalogue..."})]})]}),e.jsxs("div",{ref:S,onScroll:B,className:"flex-1 overflow-y-auto px-8 sm:px-12 pb-12 scrollbar-hide",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 stagger-children",children:D.map((s,l)=>e.jsx(H,{code:s,selected:a?.code===s.code,onClick:()=>h(s),onCopy:()=>k(s.code)},s.code+l))}),c.results.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 space-y-6 opacity-40",children:[e.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"search_off"}),e.jsx("p",{className:"font-black uppercase tracking-widest text-sm",children:"No clinical markers found"})]})]})]}),a&&e.jsx("aside",{className:"w-[450px] bg-white dark:bg-slate-950 border-l border-slate-100 dark:border-slate-800 overflow-y-auto animate-premium-in shadow-2xl z-20",children:e.jsxs("div",{className:"p-10 space-y-10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-blue-600",children:"Registry Detail"}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:a.code})]}),e.jsx("button",{onClick:()=>h(null),className:"p-2 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-400 hover:text-rose-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Technical Designation"}),e.jsx("p",{className:"text-sm font-bold leading-relaxed text-slate-800 dark:text-gray-100",children:a.desc})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Domain Classification"}),e.jsx("div",{className:"inline-flex px-4 py-1.5 rounded-xl bg-blue-600 text-white text-[10px] font-black uppercase tracking-widest shadow-lg shadow-blue-600/20",children:a.category||"Clinical General"})]})]}),e.jsxs("div",{className:"p-8 rounded-[40px] bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 space-y-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-lg",children:"psychology"}),"Neural Cross-Reference"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-slate-400",children:[e.jsx("span",{children:"Approval Confidence"}),e.jsx("span",{className:"text-blue-600",children:"98.2%"})]}),e.jsx("div",{className:"h-1.5 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 w-[98%]"})})]}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-500 leading-relaxed italic",children:["DeepSeek inference suggests high correlation with ",e.jsx("span",{className:"text-blue-600 font-black",children:"ICD-10 M17.0"})," diagnostic pathways."]})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{className:"w-full py-6 text-sm shadow-xl shadow-blue-600/20",icon:"add_box",onClick:()=>{const s={code:a.code,description:a.desc,category:a.category||null};window.localStorage.setItem("sbs_claim_context_code",JSON.stringify(s)),m.success("Code context assigned to claim builder"),window.dispatchEvent(new CustomEvent("sbs:navigate",{detail:{view:"claim-builder"}}))},children:"Enroll in Workspace"}),e.jsx(v,{variant:"secondary",className:"w-full py-6 text-sm",icon:"content_copy",onClick:()=>k(a.code),children:"Copy Entity ID"})]})]})})]})}function H({code:r,selected:d,onClick:i,onCopy:x}){return e.jsx(A,{onClick:i,className:`group cursor-pointer transition-all hover:scale-[1.02] border-2 ${d?"border-blue-600 shadow-2xl shadow-blue-600/10":"border-transparent"}`,children:e.jsxs(z,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black tracking-tight text-blue-600 font-mono",children:r.code}),e.jsx("button",{onClick:a=>{a.stopPropagation(),x()},className:"size-8 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-400 opacity-0 group-hover:opacity-100 hover:text-blue-600 transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"content_copy"})})]}),e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-gray-100 line-clamp-2 leading-snug group-hover:text-blue-600 transition-colors",children:r.desc}),e.jsxs("div",{className:"pt-2 border-t border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:r.category?.replace(/_/g," ")||"Clinical"}),r.source==="ai"&&e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"auto_awesome"})]})]})})}export{W as SBSCodeBrowser};
//# sourceMappingURL=SBSCodeBrowser-BsprbRs0.js.map
