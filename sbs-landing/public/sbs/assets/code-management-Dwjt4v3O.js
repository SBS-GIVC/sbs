const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ai-features-DQve4Ov2.js","./ui-core-CJgDYHCE.js","./analytics-BU3FKnFC.js"])))=>i.map(i=>d[i]);
import{r as x,u as E,j as e}from"./ui-core-CJgDYHCE.js";import{a as I}from"./ai-features-DQve4Ov2.js";import{S as $,B as k,C as D,a as A,b as B}from"./analytics-BU3FKnFC.js";const U="modulepreload",H=function(i,a){return new URL(i,a).href},L={},G=function(a,s,l){let t=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const o=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");t=c(s.map(h=>{if(h=H(h,l),h in L)return;L[h]=!0;const y=h.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(l)for(let f=o.length-1;f>=0;f--){const w=o[f];if(w.href===h&&(!y||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${g}`))return;const u=document.createElement("link");if(u.rel=y?"stylesheet":U,y||(u.as="script"),u.crossOrigin="",u.href=h,p&&u.setAttribute("nonce",p),document.head.appendChild(u),y)return new Promise((f,w)=>{u.addEventListener("load",f),u.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o}return t.then(o=>{for(const d of o||[])d.status==="rejected"&&r(d.reason);return a().catch(r)})};function z(){const[i,a]=x.useState(""),[s,l]=x.useState("all"),[t,r]=x.useState(null),[o,d]=x.useState(!1),[p,c]=x.useState(null),[h,y]=x.useState(100),g=x.useRef(null),u=E(),f=x.useMemo(()=>I.getAllCodes(),[]),w=x.useMemo(()=>["all",...I.getCategories()],[]),[v,C]=x.useState({results:f,source:"local"});x.useEffect(()=>{const m=setTimeout(async()=>{if(i.length>=2){d(!0);try{const j=await I.smartSearch(i,{limit:200,category:s==="all"?null:s,includeAI:!0});C(j),c(j.aiInsights)}finally{d(!1)}}else{const j=s==="all"?f:f.filter(S=>S.category===s);C({results:j,source:"local"}),c(null)}},300);return()=>clearTimeout(m)},[i,s,f]);const N=x.useMemo(()=>v.results.slice(0,h),[v,h]),n=m=>{const{scrollTop:j,scrollHeight:S,clientHeight:P}=m.target;S-j-P<400&&h<v.results.length&&y(T=>T+100)},b=m=>{navigator.clipboard.writeText(m),u.success(`Code ${m} synchronized to clipboard`)};return e.jsxs("div",{className:"flex-1 overflow-hidden bg-grid flex",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsxs("header",{className:"px-8 py-10 sm:px-12 space-y-8 animate-premium-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[e.jsx($,{title:"Terminology Explorer",subtitle:`Global registry of ${f.length.toLocaleString()} individual SBS clinical markers.`,badge:"Knowledge Graph"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-900/50 p-1.5 rounded-2xl border border-slate-200 dark:border-slate-800",children:[e.jsx("button",{className:"px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-white dark:bg-slate-800 shadow-sm",children:"Grid Matrix"}),e.jsx("button",{className:"px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Condensed"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("span",{className:"absolute left-5 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"search"}),e.jsx("input",{type:"text",placeholder:"Search by ID, semantics, or clinical description...",className:"w-full h-16 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-[28px] pl-14 pr-20 text-sm font-bold focus:outline-none focus:border-blue-600/30 focus:ring-4 focus:ring-blue-600/5 transition-all shadow-sm",value:i,onChange:m=>a(m.target.value)}),o&&e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 size-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e.jsx("select",{className:"h-16 px-6 bg-white dark:bg-slate-900 border-2 border-slate-100 dark:border-slate-800 rounded-[28px] text-xs font-black uppercase tracking-widest focus:outline-none",value:s,onChange:m=>l(m.target.value),children:w.map(m=>e.jsx("option",{value:m,children:m.replace(/_/g," ")},m))})]}),p&&e.jsxs("div",{className:"p-4 rounded-2xl bg-blue-600/5 border border-blue-600/10 flex items-center gap-3 animate-premium-in",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600",children:"auto_awesome"}),e.jsx("p",{className:"text-xs font-bold text-slate-600 dark:text-gray-300 italic",children:p})]})]}),e.jsxs("div",{ref:g,onScroll:n,className:"flex-1 overflow-y-auto px-8 sm:px-12 pb-12 scrollbar-hide",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 stagger-children",children:N.map((m,j)=>e.jsx(F,{code:m,selected:t?.code===m.code,onClick:()=>r(m),onCopy:()=>b(m.code)},m.code+j))}),v.results.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 space-y-6 opacity-40",children:[e.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"search_off"}),e.jsx("p",{className:"font-black uppercase tracking-widest text-sm",children:"No clinical markers found"})]})]})]}),t&&e.jsx("aside",{className:"w-[450px] bg-white dark:bg-slate-950 border-l border-slate-100 dark:border-slate-800 overflow-y-auto animate-premium-in shadow-2xl z-20",children:e.jsxs("div",{className:"p-10 space-y-10",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-blue-600",children:"Registry Detail"}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tighter",children:t.code})]}),e.jsx("button",{onClick:()=>r(null),className:"p-2 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-400 hover:text-rose-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Technical Designation"}),e.jsx("p",{className:"text-sm font-bold leading-relaxed text-slate-800 dark:text-gray-100",children:t.desc})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Domain Classification"}),e.jsx("div",{className:"inline-flex px-4 py-1.5 rounded-xl bg-blue-600 text-white text-[10px] font-black uppercase tracking-widest shadow-lg shadow-blue-600/20",children:t.category||"Clinical General"})]})]}),e.jsxs("div",{className:"p-8 rounded-[40px] bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 space-y-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-lg",children:"psychology"}),"Neural Cross-Reference"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-slate-400",children:[e.jsx("span",{children:"Approval Confidence"}),e.jsx("span",{className:"text-blue-600",children:"98.2%"})]}),e.jsx("div",{className:"h-1.5 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 w-[98%]"})})]}),e.jsxs("p",{className:"text-[11px] font-bold text-slate-500 leading-relaxed italic",children:["DeepSeek inference suggests high correlation with ",e.jsx("span",{className:"text-blue-600 font-black",children:"ICD-10 M17.0"})," diagnostic pathways."]})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(k,{className:"w-full py-6 text-sm shadow-xl shadow-blue-600/20",icon:"add_box",onClick:()=>u.success("Agent assigned code to claim"),children:"Enroll in Workspace"}),e.jsx(k,{variant:"secondary",className:"w-full py-6 text-sm",icon:"content_copy",onClick:()=>b(t.code),children:"Copy Entity ID"})]})]})})]})}function F({code:i,selected:a,onClick:s,onCopy:l}){return e.jsx(D,{onClick:s,className:`group cursor-pointer transition-all hover:scale-[1.02] border-2 ${a?"border-blue-600 shadow-2xl shadow-blue-600/10":"border-transparent"}`,children:e.jsxs(A,{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-black tracking-tight text-blue-600 font-mono",children:i.code}),e.jsx("button",{onClick:t=>{t.stopPropagation(),l()},className:"size-8 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-400 opacity-0 group-hover:opacity-100 hover:text-blue-600 transition-all",children:e.jsx("span",{className:"material-symbols-outlined text-sm",children:"content_copy"})})]}),e.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-gray-100 line-clamp-2 leading-snug group-hover:text-blue-600 transition-colors",children:i.desc}),e.jsxs("div",{className:"pt-2 border-t border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:i.category?.replace(/_/g," ")||"Clinical"}),i.source==="ai"&&e.jsx("span",{className:"material-symbols-outlined text-amber-500 text-lg",children:"auto_awesome"})]})]})})}const q=Object.freeze(Object.defineProperty({__proto__:null,SBSCodeBrowser:z},Symbol.toStringTag,{value:"Module"})),R={},O={SBS:{id:"sbs",name:"Saudi Billing System",uri:"http://chi.gov.sa/sbs",version:"3.1",publisher:"Council of Health Insurance (CHI)",count:10466,color:"#137fec",icon:"receipt_long",loaded:!0},ICD10AM:{id:"icd10am",name:"ICD-10-AM",uri:"http://hl7.org/fhir/sid/icd-10-am",version:"12th Edition",publisher:"IHPA / WHO",count:17e3,color:"#ef4444",icon:"diagnosis",loaded:!1},ICD11:{id:"icd11",name:"ICD-11",uri:"http://id.who.int/icd/release/11",version:"2025",publisher:"WHO",count:17e3,color:"#f97316",icon:"medical_information",loaded:!1},SNOMED:{id:"snomed",name:"SNOMED CT",uri:"http://snomed.info/sct",version:"July 2025",publisher:"SNOMED International",count:36e4,color:"#8b5cf6",icon:"psychology",loaded:!1},DRG:{id:"drg",name:"Diagnosis Related Groups",uri:"http://chi.gov.sa/drg",version:"AR-DRG 11.0",publisher:"IHPA / CHI",count:800,color:"#22c55e",icon:"category",loaded:!1},LOINC:{id:"loinc",name:"LOINC",uri:"http://loinc.org",version:"2.81",publisher:"Regenstrief Institute",count:1e5,color:"#06b6d4",icon:"science",loaded:!1},RXNORM:{id:"rxnorm",name:"RxNorm",uri:"http://www.nlm.nih.gov/research/umls/rxnorm",version:"Weekly",publisher:"US NLM",count:12e4,color:"#ec4899",icon:"medication",loaded:!1},ACHI:{id:"achi",name:"ACHI",uri:"http://hl7.org/fhir/sid/achi",version:"12th Edition",publisher:"IHPA",count:6e3,color:"#14b8a6",icon:"surgical",loaded:!1},DENTAL:{id:"dental",name:"Dental Pricelist",uri:"http://chi.gov.sa/sbs/dental",version:"Gov Sector",publisher:"CHI",count:713,color:"#0ea5a4",icon:"dentistry",loaded:!0}},K={diagnosis:["icd10am","icd11","snomed"],procedure:["sbs","achi","snomed","dental"],laboratory:["loinc"],medication:["rxnorm"],billing:["sbs","drg","dental"],clinical:["snomed","icd10am","icd11"]};class Q{constructor(){this.systems=O,this.cache=new Map,this.mappings=new Map,this.landingApiBase=typeof window<"u"&&window.SBS_API_URL?window.SBS_API_URL:"",this.icd11Config={baseUrl:"https://id.who.int/icd",apiUrl:"https://id.who.int/icd/release/11/2025/mms",tokenUrl:"https://icdaccessmanagement.who.int/connect/token",clientId:R?.VITE_ICD11_CLIENT_ID||"",clientSecret:R?.VITE_ICD11_CLIENT_SECRET||""},this.snomedConfig={baseUrl:"https://snowstorm.ihtsdotools.org/snowstorm/snomed-ct",fhirUrl:"https://snowstorm.ihtsdotools.org/fhir"},this.loincConfig={baseUrl:"https://fhir.loinc.org",searchUrl:"https://loinc.org/api"}}getSystems(){return Object.values(this.systems)}getSystem(a){return Object.values(this.systems).find(s=>s.id===a)}async search(a,s={}){const{systems:l=null,category:t=null,limit:r=20,language:o="en",includeInactive:d=!1}=s;let p=Object.keys(this.systems);l&&l.length>0?p=l:t&&(p=K[t]||p);const c=[],h=[];for(const g of p){const u=this.getSystem(g);u&&h.push(this.searchSystem(g,a,{limit:r,language:o}).then(f=>f.map(w=>({...w,system:u.id,systemName:u.name,systemUri:u.uri,systemColor:u.color}))).catch(f=>(console.warn(`Search failed for ${g}:`,f),[])))}const y=await Promise.all(h);for(const g of y)c.push(...g);return c.sort((g,u)=>(u.score||0)-(g.score||0)),{total:c.length,results:c.slice(0,r),systems:p.map(g=>this.getSystem(g)).filter(Boolean)}}async searchSystem(a,s,l={}){const{limit:t=20,language:r="en"}=l;switch(a){case"sbs":return this.searchSBS(s,t);case"achi":return this.searchACHI(s,t);case"dental":return this.searchDental(s,t);case"icd11":return this.searchICD11(s,t,r);case"snomed":return this.searchSNOMED(s,t);case"loinc":return this.searchLOINC(s,t);case"icd10am":return this.searchICD10AM(s,t);case"drg":return this.searchDRG(s,t);default:return[]}}async searchLandingTerminology(a,s,l){const t=`landing:${a}:${s}:${l}`;if(this.cache.has(t))return this.cache.get(t);const r=new URLSearchParams({system:a,q:s,limit:String(l),offset:"0"}),o=await fetch(`${this.landingApiBase}/api/terminology/search?${r.toString()}`);if(!o.ok)throw new Error(`Landing terminology error: ${o.status}`);const p=((await o.json()).results||[]).map(c=>({code:c.code,display:c.display||c.desc||"",category:c.category||c.chapter||null,score:c.score||.9,sbsCode:c.sbsCode||null,specialty:c.specialty||null,priceSar:c.priceSar}));return this.cache.set(t,p),p}async searchSBS(a,s){try{return await this.searchLandingTerminology("sbs",a,s)}catch(r){console.warn("Landing SBS search unavailable, using local index:",r?.message||r)}const{aiAssistant:l}=await G(async()=>{const{aiAssistant:r}=await import("./ai-features-DQve4Ov2.js").then(o=>o.d);return{aiAssistant:r}},__vite__mapDeps([0,1,2]),import.meta.url);return l.localSearch(a,null,s).map(r=>({code:r.code,display:r.desc,displayAr:r.descAr,category:r.category,score:r.score}))}async searchACHI(a,s){try{return await this.searchLandingTerminology("achi",a,s)}catch(l){return console.warn("Landing ACHI search unavailable:",l?.message||l),[]}}async searchDental(a,s){try{return await this.searchLandingTerminology("dental",a,s)}catch(l){return console.warn("Landing dental search unavailable:",l?.message||l),[]}}async searchICD11(a,s,l="en"){const t=`icd11:${a}:${l}:${s}`;if(this.cache.has(t))return this.cache.get(t);try{const r=await this.getICD11Token(),o=await fetch(`${this.icd11Config.apiUrl}/search?q=${encodeURIComponent(a)}&subtreeFilterUsesFoundationDescendants=false&includeKeywordResult=true&useFlexisearch=true&flatResults=true&highlightingEnabled=false&medicalCodingMode=true`,{headers:{Authorization:`Bearer ${r}`,Accept:"application/json","Accept-Language":l,"API-Version":"v2"}});if(!o.ok)throw new Error(`ICD-11 API error: ${o.status}`);const p=((await o.json()).destinationEntities||[]).slice(0,s).map(c=>({code:c.theCode,display:c.title,definition:c.definition,chapter:c.chapter,score:c.score||.8}));return this.cache.set(t,p),p}catch(r){return console.error("ICD-11 search error:",r),this.mockICD11Search(a,s)}}async getICD11Token(){const a="icd11_token",s=this.cache.get(a);if(s&&s.expiresAt>Date.now())return s.token;const l=await fetch(this.icd11Config.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"client_credentials",client_id:this.icd11Config.clientId,client_secret:this.icd11Config.clientSecret,scope:"icdapi_access"})});if(!l.ok)throw new Error("Failed to get ICD-11 token");const t=await l.json();return this.cache.set(a,{token:t.access_token,expiresAt:Date.now()+t.expires_in*1e3-6e4}),t.access_token}async searchSNOMED(a,s){try{const t=await this.searchLandingTerminology("snomed",a,s);if(t.length>0)return t}catch(t){console.warn("Landing SNOMED search unavailable, falling back to Snowstorm:",t?.message||t)}const l=`snomed:${a}:${s}`;if(this.cache.has(l))return this.cache.get(l);try{const t=await fetch(`${this.snomedConfig.baseUrl}/MAIN/concepts?term=${encodeURIComponent(a)}&limit=${s}&activeFilter=true`,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`SNOMED API error: ${t.status}`);const o=((await t.json()).items||[]).map(d=>({code:d.conceptId,display:d.fsn?.term||d.pt?.term,displayShort:d.pt?.term,moduleId:d.moduleId,active:d.active,score:.9}));return this.cache.set(l,o),o}catch(t){return console.error("SNOMED search error:",t),this.mockSNOMEDSearch(a,s)}}async searchLOINC(a,s){const l=`loinc:${a}:${s}`;if(this.cache.has(l))return this.cache.get(l);try{const t=await fetch(`${this.loincConfig.baseUrl}/CodeSystem/$lookup?system=http://loinc.org&code=${encodeURIComponent(a)}`,{headers:{Accept:"application/fhir+json"}});if(!t.ok){const d=await fetch(`${this.loincConfig.baseUrl}/CodeSystem?_content=${encodeURIComponent(a)}&_count=${s}`,{headers:{Accept:"application/fhir+json"}});if(!d.ok)throw new Error("LOINC search failed");const p=await d.json();return this.parseFHIRBundle(p,"loinc")}const r=await t.json(),o=this.parseLOINCParameters(r);return this.cache.set(l,o),o}catch(t){return console.error("LOINC search error:",t),this.mockLOINCSearch(a,s)}}async searchICD10AM(a,s){return this.mockICD10Search(a,s)}async searchDRG(a,s){return this.mockDRGSearch(a,s)}async getMappings(a,s){const l=`mapping:${s}:${a}`;if(this.cache.has(l))return this.cache.get(l);const t=[],r=await this.getLocalMappings(a,s);if(t.push(...r),s==="snomed"){const o=await this.translateSNOMEDtoICD(a);t.push(...o)}return this.cache.set(l,t),t}async translateSNOMEDtoICD(a){try{const s=await fetch(`${this.snomedConfig.fhirUrl}/ConceptMap/$translate?code=${a}&system=http://snomed.info/sct&target=http://hl7.org/fhir/sid/icd-10`,{headers:{Accept:"application/fhir+json"}});if(!s.ok)return[];const l=await s.json();return this.parseTranslationResult(l)}catch(s){return console.error("SNOMED to ICD translation error:",s),[]}}async getLocalMappings(a,s){try{const l=new URLSearchParams({sourceSystem:s,code:a}),t=await fetch(`${this.landingApiBase}/api/terminology/mappings?${l.toString()}`);return t.ok?((await t.json()).mappings||[]).map(o=>({system:o.system,code:o.code,display:o.display,equivalence:o.equivalence||"related",confidence:o.confidence||.8})):[]}catch(l){return console.warn("Local mapping lookup failed:",l?.message||l),[]}}parseLOINCParameters(a){const s=[],l=a.parameter||[],t=l.find(o=>o.name==="code")?.valueCode,r=l.find(o=>o.name==="display")?.valueString;return t&&s.push({code:t,display:r,score:1}),s}parseFHIRBundle(a,s){const l=[],t=a.entry||[];for(const r of t)r.resource&&l.push({code:r.resource.code||r.resource.id,display:r.resource.display||r.resource.name,score:r.search?.score||.5});return l}parseTranslationResult(a){const s=[];if(!a.parameter?.find(r=>r.name==="result")?.valueBoolean)return s;const t=a.parameter?.filter(r=>r.name==="match")||[];for(const r of t){const o=r.part||[],d=o.find(c=>c.name==="equivalence")?.valueCoding?.code,p=o.find(c=>c.name==="concept")?.valueCoding;p&&s.push({system:p.system,code:p.code,display:p.display,equivalence:d||"related",confidence:d==="equivalent"?1:.8})}return s}mockICD11Search(a,s){const l=[{code:"BA00",display:"Essential hypertension",chapter:"Cardiovascular"},{code:"BA01",display:"Hypertensive heart disease",chapter:"Cardiovascular"},{code:"5A11",display:"Type 2 diabetes mellitus",chapter:"Endocrine"},{code:"2A00",display:"Acute appendicitis",chapter:"Digestive"},{code:"CA40",display:"Acute myocardial infarction",chapter:"Cardiovascular"},{code:"KB23",display:"Femoral neck fracture",chapter:"Musculoskeletal"},{code:"DB90",display:"Pneumonia",chapter:"Respiratory"},{code:"FA01",display:"Acute kidney failure",chapter:"Genitourinary"}],t=a.toLowerCase();return l.filter(r=>r.display.toLowerCase().includes(t)||r.code.toLowerCase().includes(t)).slice(0,s).map(r=>({...r,score:.85}))}mockSNOMEDSearch(a,s){const l=[{code:"38341003",display:"Hypertensive disorder"},{code:"73211009",display:"Diabetes mellitus"},{code:"74400008",display:"Appendicitis"},{code:"22298006",display:"Myocardial infarction"},{code:"71620000",display:"Fracture of femoral neck"},{code:"233604007",display:"Pneumonia"},{code:"14669001",display:"Acute kidney failure"},{code:"254837009",display:"Malignant neoplasm of breast"}],t=a.toLowerCase();return l.filter(r=>r.display.toLowerCase().includes(t)||r.code.includes(t)).slice(0,s).map(r=>({...r,score:.9}))}mockLOINCSearch(a,s){const l=[{code:"2339-0",display:"Glucose [Mass/volume] in Blood"},{code:"2345-7",display:"Glucose [Mass/volume] in Serum or Plasma"},{code:"4548-4",display:"Hemoglobin A1c/Hemoglobin.total in Blood"},{code:"2093-3",display:"Cholesterol [Mass/volume] in Serum or Plasma"},{code:"2571-8",display:"Triglyceride [Mass/volume] in Serum or Plasma"},{code:"26453-1",display:"Erythrocytes [#/volume] in Blood"},{code:"26464-8",display:"Leukocytes [#/volume] in Blood"},{code:"38483-4",display:"Creatinine [Mass/volume] in Blood"}],t=a.toLowerCase();return l.filter(r=>r.display.toLowerCase().includes(t)||r.code.includes(t)).slice(0,s).map(r=>({...r,score:.85}))}mockICD10Search(a,s){const l=[{code:"I10",display:"Essential (primary) hypertension"},{code:"E11.9",display:"Type 2 diabetes mellitus without complications"},{code:"K35.80",display:"Unspecified acute appendicitis"},{code:"I21.9",display:"Acute myocardial infarction, unspecified"},{code:"S72.00",display:"Fracture of unspecified part of neck of femur"},{code:"J18.9",display:"Pneumonia, unspecified organism"},{code:"N17.9",display:"Acute kidney failure, unspecified"},{code:"C50.9",display:"Malignant neoplasm of breast, unspecified"}],t=a.toLowerCase();return l.filter(r=>r.display.toLowerCase().includes(t)||r.code.toLowerCase().includes(t)).slice(0,s).map(r=>({...r,score:.85}))}mockDRGSearch(a,s){const l=[{code:"DRG-194",display:"Simple Pneumonia & Pleurisy w CC",weight:.9,avgLOS:3.2},{code:"DRG-195",display:"Simple Pneumonia & Pleurisy w/o CC",weight:.6,avgLOS:2.1},{code:"DRG-470",display:"Major Hip and Knee Joint Replacement",weight:1.9,avgLOS:2.5},{code:"DRG-291",display:"Heart Failure & Shock w MCC",weight:1.5,avgLOS:4.8},{code:"DRG-292",display:"Heart Failure & Shock w CC",weight:1,avgLOS:3.5},{code:"DRG-340",display:"Appendectomy w Complicated Principal Diag w MCC",weight:2.8,avgLOS:6.5},{code:"DRG-341",display:"Appendectomy w Complicated Principal Diag w CC",weight:1.8,avgLOS:4.2},{code:"DRG-342",display:"Appendectomy w Complicated Principal Diag w/o CC",weight:1.2,avgLOS:2.8}],t=a.toLowerCase();return l.filter(r=>r.display.toLowerCase().includes(t)||r.code.toLowerCase().includes(t)).slice(0,s).map(r=>({...r,score:.85}))}}const M=new Q;function W(){const[i,a]=x.useState(""),[s,l]=x.useState([]),[t,r]=x.useState("all"),[o,d]=x.useState({total:0,results:[],systems:[]}),[p,c]=x.useState(!1),[h,y]=x.useState(null),[g,u]=x.useState([]),[f,w]=x.useState(!1);E();const v=x.useMemo(()=>Object.values(O),[]);x.useEffect(()=>{if(i.length<2){d({total:0,results:[],systems:[]});return}const n=setTimeout(async()=>{c(!0);try{const b=await M.search(i,{systems:s.length>0?s:null,category:t!=="all"?t:null,limit:50});d(b)}finally{c(!1)}},300);return()=>clearTimeout(n)},[i,s,t]);const C=n=>{l(b=>b.includes(n)?b.filter(m=>m!==n):[...b,n])},N=async n=>{y(n),u([]),w(!0);try{const b=await M.getMappings(n.code,n.system);u(b)}finally{w(!1)}};return e.jsxs("div",{className:"flex-1 overflow-hidden bg-grid flex flex-col",children:[e.jsxs("header",{className:"flex-shrink-0 bg-slate-950 px-8 py-12 sm:px-12 border-b border-white/5 space-y-10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-[200px] font-black",children:"hub"})}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-8",children:[e.jsx("div",{className:"space-y-4",children:e.jsx($,{title:"Unified Registry",subtitle:`Autonomous search across ${v.length} global healthcare systems.`,badge:"Network Node",dark:!0})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"px-5 py-2 rounded-2xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 text-[10px] font-black uppercase tracking-widest",children:"FHIR R4 Native"}),e.jsx("div",{className:"px-5 py-2 rounded-2xl bg-violet-600/10 border border-violet-600/20 text-violet-500 text-[10px] font-black uppercase tracking-widest",children:"DeepSeek AI"})]})]}),e.jsxs("div",{className:"relative z-10 space-y-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-500",children:"search"}),e.jsx("input",{type:"text",value:i,onChange:n=>a(n.target.value),placeholder:"Query across clinical ontologies (e.g. 'cardiology', 'glucose', 'I10')...",className:"w-full h-20 bg-white/5 border border-white/10 rounded-[32px] pl-16 pr-20 text-lg font-bold text-white placeholder:text-slate-600 focus:outline-none focus:border-blue-600/50 focus:ring-4 focus:ring-blue-600/5 transition-all"}),p&&e.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 size-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(n=>e.jsxs("button",{onClick:()=>C(n.id),className:`px-5 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all flex items-center gap-2 ${s.includes(n.id)?"border-current shadow-lg shadow-current/20":"opacity-40 border-white/10 text-white"}`,style:{color:s.includes(n.id)?n.color:"#fff",backgroundColor:s.includes(n.id)?`${n.color}15`:"transparent"},children:[e.jsx("span",{className:"size-2 rounded-full",style:{backgroundColor:n.color}}),n.name]},n.id))})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[e.jsx("div",{className:"flex-1 overflow-y-auto px-8 sm:px-12 py-10 scrollbar-hide",children:e.jsx("div",{className:"max-w-[1200px] mx-auto space-y-6",children:i.length<2?e.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-premium-in",children:v.map(n=>e.jsx(V,{system:n},n.id))}):o.results.length>0?e.jsx("div",{className:"space-y-4 stagger-children",children:o.results.map((n,b)=>e.jsx(J,{code:n,selected:h?.code===n.code,onClick:()=>N(n)},n.code+b))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-40 opacity-40",children:[e.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"manage_search"}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest mt-6",children:"Registry Query Null"})]})})}),h&&e.jsx("aside",{className:"w-[480px] bg-white dark:bg-slate-950 border-l border-slate-100 dark:border-slate-800 overflow-y-auto animate-premium-in shadow-2xl relative",children:e.jsxs("div",{className:"p-12 space-y-12",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"inline-flex px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-blue-600/10 text-blue-600 border border-blue-600/20",children:h.systemName}),e.jsx("h2",{className:"text-4xl font-black tracking-tighter text-slate-900 dark:text-white",children:h.code})]}),e.jsx("button",{onClick:()=>y(null),className:"p-3 rounded-2xl bg-slate-50 dark:bg-slate-900 text-slate-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Semantics"}),e.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-gray-100 leading-relaxed italic",children:['"',h.display,'"']})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(_,{label:"Status",value:"Active",color:"emerald"}),e.jsx(_,{label:"Auth Req",value:"Manual",color:"amber"})]})]}),e.jsxs(D,{children:[e.jsx(B,{title:"System Bridging",subtitle:"Cross-system neural mappings.",icon:"lan"}),e.jsx(A,{className:"p-0",children:f?e.jsx("div",{className:"p-10 text-center",children:e.jsx("div",{className:"size-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:g.map((n,b)=>e.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-colors",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:n.system}),e.jsx("p",{className:"text-sm font-black text-blue-600 font-mono tracking-tight",children:n.code})]}),e.jsxs("span",{className:"text-[10px] font-black px-2 py-0.5 rounded-lg bg-emerald-500/10 text-emerald-500 border border-emerald-500/20",children:[Math.round(n.confidence*100),"% Match"]})]},b))})})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx(k,{className:"w-full py-6 shadow-2xl shadow-blue-600/20",icon:"add_reaction",children:"Add to Claim Context"}),e.jsx(k,{variant:"secondary",className:"w-full py-6",icon:"share",children:"Registry Deep-Link"})]})]})})]})]})}function V({system:i}){return e.jsx(D,{className:"hover:scale-[1.02] transition-transform",children:e.jsxs(A,{className:"p-8 space-y-4",children:[e.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center text-2xl",style:{backgroundColor:`${i.color}15`,color:i.color},children:e.jsx("span",{className:"material-symbols-outlined",children:i.icon})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-slate-800 dark:text-white uppercase tracking-tight",children:i.name}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[i.count.toLocaleString()," Codes"]})]})]})})}function J({code:i,selected:a,onClick:s}){return e.jsxs("div",{onClick:s,className:`p-6 rounded-[28px] border-2 transition-all cursor-pointer flex items-center gap-6 ${a?"border-blue-600 bg-blue-600/5 shadow-2xl shadow-blue-600/10":"bg-white dark:bg-slate-950 border-slate-100 dark:border-slate-900 hover:border-slate-300 dark:hover:border-slate-700"}`,children:[e.jsx("div",{className:"size-14 rounded-2xl flex items-center justify-center text-2xl shrink-0",style:{backgroundColor:`${i.systemColor}15`,color:i.systemColor},children:e.jsx("span",{className:"material-symbols-outlined",children:"api"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest px-2 py-0.5 rounded border border-current",style:{color:i.systemColor,backgroundColor:`${i.systemColor}10`},children:i.systemName}),e.jsx("span",{className:"text-lg font-black text-blue-600 font-mono tracking-tighter",children:i.code})]}),e.jsxs("p",{className:"text-sm font-bold text-slate-800 dark:text-gray-200 line-clamp-1 italic",children:['"',i.display,'"']})]}),e.jsx("span",{className:"material-symbols-outlined text-slate-300 group-hover:text-blue-600",children:"chevron_right"})]})}function _({label:i,value:a,color:s}){return e.jsxs("div",{className:"p-5 rounded-2xl bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 space-y-1",children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:i}),e.jsx("p",{className:`text-sm font-black ${s==="emerald"?"text-emerald-500":"text-amber-500"}`,children:a})]})}const ee=Object.freeze(Object.defineProperty({__proto__:null,UnifiedCodeBrowser:W},Symbol.toStringTag,{value:"Module"}));export{q as S,ee as U,G as _};
//# sourceMappingURL=code-management-Dwjt4v3O.js.map
