import{r as d,j as e}from"./vendor-react-DS7a0TT8.js";import{n as v}from"./nphiesService-BO8lu4FP.js";import{u as y}from"./main-CrAJ0RmW.js";import{B as w}from"./Button-TZaBe_4z.js";import{C as c,b as x,a as k}from"./Card-BwXlqzF_.js";import{S as I}from"./SectionHeader-Cy0sm8nx.js";import"./vendor-hzXslIYo.js";function U(){const[s,i]=d.useState(""),[l,r]=d.useState(""),[m,u]=d.useState(!1),[a,g]=d.useState(null),[p,h]=d.useState(null),n=y(),f=async()=>{if(!s){n.warning("Please enter a Patient ID");return}u(!0),h(null);try{const t=await v.checkEligibility({patientId:s,insurerId:l||"INS-DEFAULT",policyNumber:`POL-${s}`,serviceDate:new Date().toISOString().split("T")[0]});g(t),t.eligible?n.success("Patient is eligible for coverage"):n.error("Patient coverage not active")}catch(t){h(t.message),n.error("Verification failed. Please try again.")}finally{u(!1)}},b=t=>t?new Intl.NumberFormat("en-SA",{style:"currency",currency:"SAR",minimumFractionDigits:0}).format(t):"N/A",j=t=>!t.allowed||t.allowed===0?0:Math.round(t.used/t.allowed*100);return e.jsx("div",{className:"flex-1 overflow-y-auto bg-grid scrollbar-hide",children:e.jsxs("main",{className:"max-w-[1200px] mx-auto p-6 sm:p-8 space-y-8 stagger-children",children:[e.jsxs("section",{className:"animate-premium-in",children:[e.jsx(I,{title:"Eligibility Verification",subtitle:"Validate patient coverage and benefit limits against national NPHIES databases in real-time.",badge:"Live Verification"}),e.jsx(c,{className:"mt-8 border-l-4 border-l-emerald-500",children:e.jsx(x,{className:"p-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest px-1",children:"Patient National ID / Iqama"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"fingerprint"}),e.jsx("input",{type:"text",value:s,onChange:t=>i(t.target.value),placeholder:"e.g. 1029384756",className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl text-slate-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-blue-600/20 transition-all"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest px-1",children:"Insurance Provider"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-600 transition-colors",children:"business"}),e.jsxs("select",{value:l,onChange:t=>r(t.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl text-slate-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-blue-600/20 appearance-none transition-all",children:[e.jsx("option",{value:"",children:"Auto-detect via NPHIES"}),e.jsx("option",{value:"INS-BUPA",children:"Bupa Arabia"}),e.jsx("option",{value:"INS-TAWUNIYA",children:"Tawuniya"}),e.jsx("option",{value:"INS-MEDGULF",children:"MedGulf"}),e.jsx("option",{value:"INS-AXA",children:"GIG (Formerly AXA)"})]}),e.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none",children:"expand_more"})]})]}),e.jsx(w,{loading:m,icon:"verified",onClick:f,className:"w-full py-4 rounded-2xl",variant:"success",children:"Verify Coverage"})]})})})]}),e.jsxs("div",{className:"min-h-[400px]",children:[p&&e.jsxs("div",{className:"animate-premium-in p-6 rounded-3xl bg-rose-500/10 border border-rose-500/20 flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-2xl bg-rose-500 flex items-center justify-center text-white shadow-lg shadow-rose-500/20",children:e.jsx("span",{className:"material-symbols-outlined",children:"report"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-rose-600 dark:text-rose-400",children:"Verification Failed"}),e.jsx("p",{className:"text-sm text-rose-500/80 font-medium",children:p})]})]}),a?e.jsxs("div",{className:"space-y-8 animate-premium-in",children:[e.jsxs(c,{className:"overflow-hidden border-none shadow-2xl",children:[e.jsxs("div",{className:`p-8 flex flex-col sm:flex-row items-center justify-between gap-6 bg-gradient-to-r text-white ${a.eligible?"from-emerald-500 to-teal-600 shadow-emerald-500/20":"from-rose-500 to-orange-600 shadow-rose-500/20"}`,children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"size-20 rounded-[24px] bg-white/20 backdrop-blur-md flex items-center justify-center border border-white/20 shadow-xl",children:e.jsx("span",{className:"material-symbols-outlined text-5xl",children:a.eligible?"check_circle":"cancel"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h2",{className:"text-3xl font-extrabold tracking-tighter leading-tight",children:a.eligible?"Patient is Eligible":"Coverage Inactive"}),e.jsxs("p",{className:"text-white/80 font-bold tracking-tight mt-1 flex items-center gap-2 justify-center sm:justify-start",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"policy"}),"Policy: ",a.policyNumber,e.jsx("span",{className:"mx-2 opacity-50",children:"|"}),"Class: ",a.className||"Standard"]})]})]}),e.jsxs("div",{className:"text-center sm:text-right bg-white/10 backdrop-blur-md p-4 rounded-2xl border border-white/10",children:[e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-white/70",children:"Coverage Valid Until"}),e.jsx("p",{className:"text-2xl font-black",children:a.coverageEnd})]})]}),e.jsxs(x,{className:"grid sm:grid-cols-3 gap-0 divide-y sm:divide-y-0 sm:divide-x divide-slate-200/50 dark:divide-slate-800/50 p-0",children:[e.jsxs("div",{className:"p-6 space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Insurance Payer"}),e.jsx("p",{className:"text-lg font-extrabold text-slate-900 dark:text-white capitalize",children:a.payerName||"Detecting..."}),e.jsx("p",{className:"text-xs font-mono text-slate-400",children:a.payerId})]}),e.jsxs("div",{className:"p-6 space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Co-Payment / Deductible"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-extrabold text-slate-900 dark:text-white",children:[a.coPayPercentage||0,"%"]}),e.jsx("span",{className:"text-xs font-bold px-2 py-0.5 rounded-full bg-blue-600/10 text-blue-600 border border-blue-600/20",children:"Patient Share"})]}),e.jsxs("p",{className:"text-xs font-bold text-slate-400",children:[b(a.deductible)," total deductible"]})]}),e.jsxs("div",{className:"p-6 space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest",children:"Adjudication Mode"}),e.jsx("p",{className:"text-lg font-extrabold text-slate-900 dark:text-white",children:"Real-time (NPHIES)"}),e.jsxs("p",{className:"text-xs font-bold text-emerald-500 flex items-center gap-1",children:[e.jsx("span",{className:"size-1.5 rounded-full bg-emerald-500"}),"Secure Bridge Active"]})]})]})]}),e.jsxs(c,{children:[e.jsx(k,{title:"Coverage Benefits Detail",subtitle:"Detailed breakdown of active benefit categories and remaining limits."}),e.jsx(x,{className:"space-y-6",children:Object.values(a.benefits||{}).map((t,N)=>e.jsx(P,{benefit:t,formatCurrency:b,percentage:j(t)},N))})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{icon:"add_box",label:"Create Claim",sub:"Use current eligibility",onClick:()=>window.dispatchEvent(new CustomEvent("sbs:navigate",{detail:{view:"claim-builder"}}))}),e.jsx(o,{icon:"approval",label:"Request Auth",sub:"Pre-approval portal",onClick:()=>window.dispatchEvent(new CustomEvent("sbs:navigate",{detail:{view:"prior-auth"}}))}),e.jsx(o,{icon:"print",label:"Print Summary",sub:"Generate PDF export",onClick:()=>window.print()}),e.jsx(o,{icon:"history",label:"Verify History",sub:"Audit older sessions",onClick:()=>{n.info("Opening historical eligibility sessions"),window.dispatchEvent(new CustomEvent("sbs:navigate",{detail:{view:"claims"}}))}})]})]}):!m&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-premium-in",children:[e.jsx("div",{className:"size-24 rounded-[32px] bg-slate-50 dark:bg-slate-800/50 flex items-center justify-center text-slate-300 dark:text-slate-600 mb-6",children:e.jsx("span",{className:"material-symbols-outlined text-6xl",children:"person_search"})}),e.jsx("h3",{className:"text-xl font-extrabold text-slate-900 dark:text-white tracking-tight",children:"Ready for Verification"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium mt-1 max-w-xs text-center",children:"Enter a Patient National ID or Iqama number to begin the real-time eligibility check."})]})]})]})})}function P({benefit:s,formatCurrency:i,percentage:l}){const r=l>85;return e.jsxs("div",{className:"space-y-2 group",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${r?"bg-rose-500/10 text-rose-600":"bg-blue-600/10 text-blue-600"}`,children:e.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"medical_services"})}),e.jsx("span",{className:"text-sm font-extrabold text-slate-700 dark:text-slate-200 capitalize group-hover:text-blue-600 transition-colors",children:s.name||s.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white",children:i(s.remaining)}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:"Remaining Limit"})]})]}),e.jsx("div",{className:"relative h-2.5 bg-slate-100 dark:bg-slate-800/50 rounded-full overflow-hidden shadow-inner font-bold",children:e.jsx("div",{className:`absolute inset-y-0 left-0 rounded-full transition-all duration-1000 cubic-bezier(0.16, 1, 0.3, 1) ${r?"bg-gradient-to-r from-rose-500 to-orange-500":"bg-gradient-to-r from-blue-600 to-indigo-600"}`,style:{width:`${l}%`},children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),e.jsxs("div",{className:"flex justify-between items-center text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:[e.jsxs("span",{children:["Used: ",i(s.used)," (",l,"%)"]}),e.jsxs("span",{children:["Annual Limit: ",i(s.allowed)]})]})]})}function o({icon:s,label:i,sub:l,onClick:r}){return e.jsxs("button",{onClick:r,className:"glass-card p-5 rounded-3xl border border-slate-200/50 dark:border-slate-800/50 hover:border-blue-600/50 transition-all duration-300 flex flex-col items-center gap-3 group text-center",children:[e.jsx("div",{className:"size-12 rounded-2xl bg-slate-50 dark:bg-slate-800 text-slate-400 group-hover:bg-blue-600 group-hover:text-white group-hover:scale-110 transition-all duration-300 flex items-center justify-center",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:s})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-extrabold text-slate-900 dark:text-white tracking-tight",children:i}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mt-0.5",children:l})]})]})}export{U as EligibilityPage};
//# sourceMappingURL=EligibilityPage-B6Vv07e8.js.map
