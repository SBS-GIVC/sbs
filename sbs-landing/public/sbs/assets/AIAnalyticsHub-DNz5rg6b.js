import{r as x,j as e}from"./vendor-react-DS7a0TT8.js";import{C as _,a as j,b as v}from"./Card-BwXlqzF_.js";import{S as I}from"./SectionHeader-Cy0sm8nx.js";import{B as E}from"./Button-TZaBe_4z.js";import{I as g}from"./Input-BZSbZSMc.js";import"./vendor-hzXslIYo.js";const f=window.SBS_API_URL||window.location.origin;async function w(i,t,a,r,s,n,p){try{const d=await fetch(`${f}/api/ai/predict-claim`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:i,patient_age:t,patient_gender:a,diagnosis_codes:r,procedure_codes:s,service_date:n,total_amount:p})});if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(d){return console.error("Claim prediction error:",d),{prediction_type:"claim_approval",confidence:.7,risk_score:30,recommendations:["Unable to analyze claim - please review manually"],insights:{error:"Prediction service unavailable"}}}}async function N(i,t,a={}){try{const r=await fetch(`${f}/api/ai/optimize-cost`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:i,claim_items:t,patient_info:a})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){return console.error("Cost optimization error:",r),{total_savings:0,savings_percentage:0,optimized_items:[],recommendations:["Unable to analyze costs - please review manually"]}}}async function k(i,t,a=[]){try{const r=await fetch(`${f}/api/ai/detect-fraud`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:i,claim_data:t,historical_claims:a})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){return console.error("Fraud detection error:",r),{is_fraudulent:!1,fraud_score:0,risk_factors:["Unable to analyze - please review manually"],recommendations:["Manual review recommended"]}}}async function C(i,t){try{const a=await fetch(`${f}/api/ai/check-compliance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facility_id:i,claim_data:t})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Compliance check error:",a),{is_compliant:!1,violations:["Unable to check compliance"],warnings:["Manual compliance review required"],suggestions:["Consult CHI guidelines"]}}}async function z(i,t){try{const[a,r,s,n]=await Promise.all([w(i,t.patient_age,t.patient_gender,t.diagnosis_codes,t.procedure_codes,t.service_date,t.total_amount),N(i,t.items,t.patient_info),k(i,t),C(i,t)]),p=Math.max(a.risk_score,s.fraud_score,n.is_compliant?0:50),d=[...a.recommendations,...r.recommendations,...s.recommendations,...n.suggestions];let c="APPROVED";return p>70?c="REJECTED":p>40?c="REVIEW_REQUIRED":n.is_compliant?r.savings_percentage>10&&(c="OPTIMIZATION_AVAILABLE"):c="COMPLIANCE_ISSUE",{overall_status:c,overall_risk_score:p,prediction:a,optimization:r,fraud:s,compliance:n,recommendations:d,insights:{potential_savings:r.total_savings,approval_probability:a.confidence,fraud_risk:s.fraud_score,compliance_status:n.is_compliant?"COMPLIANT":"NON_COMPLIANT"}}}catch(a){return console.error("Comprehensive claim analysis error:",a),{overall_status:"ANALYSIS_FAILED",overall_risk_score:0,prediction:{prediction_type:"claim_approval",confidence:.7,risk_score:30,recommendations:["Analysis unavailable"],insights:{}},optimization:{total_savings:0,savings_percentage:0,optimized_items:[],recommendations:["Analysis unavailable"]},fraud:{is_fraudulent:!1,fraud_score:0,risk_factors:["Analysis unavailable"],recommendations:["Manual review"]},compliance:{is_compliant:!1,violations:["Analysis unavailable"],warnings:["Manual review required"],suggestions:["Consult guidelines"]},recommendations:["Unable to perform AI analysis - please review manually"],insights:{error:"AI prediction service unavailable"}}}}async function P(i,t=30){try{const a=await fetch(`${f}/api/ai/facility-analytics?facility_id=${i}&days=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){return console.error("Facility analytics error:",a),{total_claims:0,approved_claims:0,rejected_claims:0,average_approval_rate:0,total_amount:0,average_amount:0,top_procedures:[],trends:[]}}}function H(){const[i,t]=x.useState("predict"),[a,r]=x.useState({facility_id:1,patient_age:45,patient_gender:"M",diagnosis_codes:["I10","E11.9"],procedure_codes:["1101001","1201001"],service_date:"2026-01-31",total_amount:5e3,items:[{sbs_code:"1101001",quantity:1,description:"CT Scan"},{sbs_code:"1201001",quantity:2,description:"CBC Test"}]}),[s,n]=x.useState(null),[p,d]=x.useState(!1),[c,A]=x.useState(null);x.useEffect(()=>{S()},[]);const S=async()=>{try{const l=await P(a.facility_id,30);A(l)}catch(l){console.error("Failed to load analytics:",l)}},T=async(l,m)=>{d(!0);try{let o;m==="predict"?(o=await w(a.facility_id,a.patient_age,a.patient_gender,a.diagnosis_codes,a.procedure_codes,a.service_date,a.total_amount),n({prediction:o})):m==="optimize"?(o=await N(a.facility_id,a.items),n({optimization:o})):m==="fraud"?(o=await k(a.facility_id,a),n({fraud:o})):m==="compliance"?(o=await C(a.facility_id,a),n({compliance:o})):(o=await z(a.facility_id,a),n(o))}finally{d(!1)}},u=(l,m)=>r(o=>({...o,[l]:m}));return e.jsx("div",{className:"flex-1 overflow-y-auto bg-grid scrollbar-hide",children:e.jsxs("main",{className:"max-w-[1500px] mx-auto p-6 sm:p-12 space-y-12 stagger-children",children:[e.jsx("section",{className:"animate-premium-in",children:e.jsx(I,{title:"Neural Analytics Hub",subtitle:"Autonomous claim profiling, risk assessment, and financial optimization engine.",badge:"Inference V4"})}),c&&e.jsxs("section",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 animate-premium-in",style:{animationDelay:"100ms"},children:[e.jsx(b,{label:"Registry Volume",value:c.total_claims||0,unit:"Claims",color:"blue"}),e.jsx(b,{label:"Sync Success",value:(c.approved_claims/c.total_claims*100||0).toFixed(1),unit:"%",color:"emerald"}),e.jsx(b,{label:"Total Flux",value:c.total_amount?.toFixed(0)||0,unit:"SAR",color:"indigo"}),e.jsx(b,{label:"Avg Latency",value:"1.2",unit:"s",color:"rose"})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-8 animate-premium-in",style:{animationDelay:"200ms"},children:[e.jsxs(_,{children:[e.jsx(j,{title:"Input Manifest",subtitle:"Provide the clinical context for neural processing."}),e.jsxs(v,{className:"space-y-6 py-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Facility ID",type:"number",value:a.facility_id,onChange:l=>u("facility_id",l.target.value)}),e.jsx(g,{label:"Yield Value (SAR)",type:"number",value:a.total_amount,onChange:l=>u("total_amount",l.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(g,{label:"Age",type:"number",value:a.patient_age,onChange:l=>u("patient_age",l.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Gender"}),e.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl px-4 py-3.5 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-blue-600/20",value:a.patient_gender,onChange:l=>u("patient_gender",l.target.value),children:[e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]}),e.jsx(g,{label:"Date",type:"date",value:a.service_date,onChange:l=>u("service_date",l.target.value)})]}),e.jsx(g,{label:"Diagnosis Registry (ICD-10)",placeholder:"I10, E11.9...",value:a.diagnosis_codes.join(", "),onChange:l=>u("diagnosis_codes",l.target.value.split(","))}),e.jsx(g,{label:"Procedure Codes (SBS)",placeholder:"1101001...",value:a.procedure_codes.join(", "),onChange:l=>u("procedure_codes",l.target.value.split(","))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(h,{active:i==="predict",label:"Predict",icon:"online_prediction",onClick:()=>t("predict")}),e.jsx(h,{active:i==="optimize",label:"Optimize",icon:"savings",onClick:()=>t("optimize")}),e.jsx(h,{active:i==="fraud",label:"Fraud",icon:"shield_person",onClick:()=>t("fraud")}),e.jsx(h,{active:i==="compliance",label:"Safety",icon:"policy",onClick:()=>t("compliance")}),e.jsx(h,{active:i==="analyze",label:"Full Audit",icon:"analytics",onClick:()=>t("analyze")})]}),e.jsx(E,{className:"w-full h-16 text-lg shadow-2xl shadow-blue-600/20",icon:"bolt",loading:p,onClick:()=>T(null,i),children:"Initialize Neural Sequence"})]}),e.jsx("div",{className:"lg:col-span-7 space-y-8 animate-premium-in",style:{animationDelay:"300ms"},children:e.jsxs(_,{className:"min-h-[600px] flex flex-col bg-slate-950 text-white overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 pointer-events-none",children:e.jsx("span",{className:"material-symbols-outlined text-[200px] font-black",children:"satellite_alt"})}),e.jsx(j,{title:"Inference Terminal",subtitle:"Standard output from the DeepSeek orchestration layer."}),e.jsx(v,{className:"flex-1 flex flex-col p-10 space-y-8",children:p?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6",children:[e.jsx("div",{className:"size-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Processing Clinical Vectors..."})]}):s?e.jsxs("div",{className:"space-y-8 animate-premium-in",children:[e.jsxs("div",{className:"p-8 rounded-[38px] bg-white/5 border border-white/10 flex justify-between items-center group hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Autonomous status"}),e.jsx("h4",{className:"text-3xl font-black text-white tracking-tighter uppercase",children:s.overall_status||"PROCESSED"})]}),s.overall_risk_score!==void 0&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500",children:"Risk Marker"}),e.jsxs("h4",{className:`text-3xl font-black tracking-tighter ${s.overall_risk_score>70?"text-rose-500":"text-emerald-500"}`,children:[s.overall_risk_score.toFixed(0),"%"]})]})]}),s.prediction&&e.jsx(y,{title:"Approval Analysis",data:s.prediction,icon:"trending_up"}),s.optimization&&e.jsx(y,{title:"Yield Optimization",data:s.optimization,icon:"savings"}),s.fraud&&e.jsx(y,{title:"Integrity Audit",data:s.fraud,icon:"verified",alert:s.fraud.is_fraudulent}),s.compliance&&e.jsx(y,{title:"Regulatory Safety",data:s.compliance,icon:"gavel"}),s.recommendations&&e.jsxs("div",{className:"p-8 rounded-[32px] bg-blue-600/10 border border-blue-600/20 space-y-4",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-blue-400",children:"Strategic Protocol Recommendations"}),e.jsx("ul",{className:"space-y-3",children:s.recommendations.map((l,m)=>e.jsxs("li",{className:"flex gap-4 text-xs font-bold text-slate-300",children:[e.jsx("span",{className:"text-blue-500 font-black",children:"•"})," ",l]},m))})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-6 opacity-30",children:[e.jsx("span",{className:"material-symbols-outlined text-[80px] font-black",children:"airwave"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em]",children:"Awaiting Input Sequence"})]})})]})})]})]})})}function b({label:i,value:t,unit:a,color:r}){const s={blue:"text-blue-600 bg-blue-600/5 border-blue-600/10",emerald:"text-emerald-500 bg-emerald-500/5 border-emerald-500/10",indigo:"text-indigo-600 bg-indigo-600/5 border-indigo-600/10",rose:"text-rose-600 bg-rose-600/5 border-rose-600/10"};return e.jsx(_,{className:`group hover:scale-[1.03] transition-all hover:bg-current hover:shadow-2xl ${s[r]}`,children:e.jsxs(v,{className:"p-8 space-y-6",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:i}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h4",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter group-hover:text-white transition-colors",children:t}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest group-hover:text-white/60 transition-colors",children:a})]})]})})}function h({active:i,label:t,icon:a,onClick:r}){return e.jsxs("button",{onClick:r,className:`px-6 py-4 rounded-[24px] border transition-all flex items-center gap-3 ${i?"bg-blue-600 text-white border-blue-600 shadow-xl shadow-blue-600/20 scale-[1.05]":"bg-white dark:bg-slate-900 text-slate-500 border-slate-100 dark:border-slate-800 hover:border-blue-600/30"}`,children:[e.jsx("span",{className:"material-symbols-outlined text-xl font-black",children:a}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t})]})}function y({title:i,data:t,icon:a,alert:r}){return e.jsxs("div",{className:`p-8 rounded-[38px] border bg-white/5 transition-all hover:bg-white/10 ${r?"border-rose-500/30":"border-white/5"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${r?"bg-rose-500 text-white shadow-xl shadow-rose-500/20":"bg-white/10 text-slate-400"}`,children:e.jsx("span",{className:"material-symbols-outlined text-xl font-black",children:a})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"text-sm font-black text-white",children:i}),e.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500",children:"Inference Complete"})]})]}),t.confidence&&e.jsxs("span",{className:"text-xl font-black text-blue-600 tracking-tighter",children:[(t.confidence*100).toFixed(0),"% ",e.jsx("span",{className:"text-[10px]",children:"Conf."})]})]}),t.recommendations&&e.jsx("div",{className:"grid gap-2",children:t.recommendations.map((s,n)=>e.jsxs("p",{className:"text-[11px] font-bold text-slate-400 leading-relaxed italic",children:["• ",s]},n))}),t.risk_factors&&e.jsx("div",{className:"grid gap-2",children:t.risk_factors.map((s,n)=>e.jsxs("p",{className:"text-[11px] font-bold text-rose-400 leading-relaxed italic animate-pulse",children:["• ",s]},n))})]})}export{H as AIAnalyticsHub};
//# sourceMappingURL=AIAnalyticsHub-DNz5rg6b.js.map
