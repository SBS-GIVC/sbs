{"version":3,"file":"ClaimsQueuePage-D_maApZr.js","sources":["../../src/pages/ClaimsQueuePage.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { i18n } from '../utils/i18n';\nimport { useToast } from '../components/Toast';\nimport { Button } from '../components/ui/Button';\nimport { Card, CardBody, CardHeader } from '../components/ui/Card';\nimport { Input } from '../components/ui/Input';\nimport { SectionHeader } from '../components/ui/SectionHeader';\n\nconst API_BASE_URL =\n  (typeof window !== 'undefined' && typeof window.SBS_API_URL === 'string' && window.SBS_API_URL.trim())\n    ? window.SBS_API_URL.replace(/\\/+$/, '')\n    : '';\n\n/**\n * Premium Claims Queue Page\n * Optimized for GIVC-SBS Ultra-Premium Design System\n */\nexport function ClaimsQueuePage({ lang = 'en' }) {\n  const copy = i18n[lang] || i18n.en;\n  const t = copy.pages?.claimsQueue || i18n.en.pages.claimsQueue;\n  const [filter, setFilter] = useState('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [claims, setClaims] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadError, setLoadError] = useState(null);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const [busyById, setBusyById] = useState({});\n  const toast = useToast();\n\n  const bucketFrom = useCallback((status, progressPercentage) => {\n    const s = String(status || 'processing').toLowerCase();\n    if (['failed', 'rejected'].includes(s)) return 'rejected';\n    if (['approved', 'completed', 'submitted'].includes(s)) return 'relayed';\n    const pct = Number(progressPercentage || 0);\n    if (s === 'processing' && pct <= 25) return 'pending';\n    return 'processing';\n  }, []);\n\n  const mapClaim = useCallback((c) => {\n    const progress = c.progress || {};\n    const progressPercentage = Number(progress.percentage || 0);\n    const status = String(c.status || 'processing').toLowerCase();\n    const aiRiskScore = Number.isFinite(Number(c.aiRiskScore)) ? Number(c.aiRiskScore) : null;\n    const priority =\n      ['failed', 'rejected'].includes(status) || (aiRiskScore !== null && aiRiskScore >= 80)\n        ? 'urgent'\n        : (aiRiskScore !== null && aiRiskScore >= 60 ? 'elevated' : 'normal');\n\n    return {\n      id: c.claimId,\n      patient: c.patientName || c.patientId || 'Unknown Patient',\n      patientId: c.patientId || null,\n      facility: c.facilityId || 'Main Hub',\n      type: c.claimType\n        ? `${String(c.claimType).slice(0, 1).toUpperCase()}${String(c.claimType).slice(1)}`\n        : 'Institutional',\n      submittedAt: c.createdAt,\n      lastUpdate: c.lastUpdate,\n      status,\n      bucket: bucketFrom(status, progressPercentage),\n      progressPercentage,\n      currentStage: progress.currentStage || null,\n      itemsCount: Number(c.itemsCount || 0),\n      amount: Math.max(0, Number(c.totalAmount || 0)),\n      aiRiskScore,\n      routeUsed: c.routeUsed || null,\n      trackingUrl: c.trackingUrl || null,\n      priority\n    };\n  }, [bucketFrom]);\n\n  const loadClaims = useCallback(async ({ silent = false } = {}) => {\n    if (!silent) setLoading(true);\n    try {\n      const res = await fetch(`${API_BASE_URL}/api/claims?limit=50&page=1`);\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || data.success === false) {\n        throw new Error(data.error || `HTTP ${res.status}`);\n      }\n\n      const mapped = (data.claims || []).map(mapClaim);\n      setClaims(mapped);\n      setLoadError(null);\n    } catch (e) {\n      setClaims([]);\n      setLoadError(e?.message || 'Failed to resolve claims repository');\n    } finally {\n      if (!silent) setLoading(false);\n    }\n  }, [mapClaim]);\n\n  useEffect(() => {\n    loadClaims();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!autoRefresh) return;\n    const id = setInterval(() => loadClaims({ silent: true }), 15000);\n    return () => clearInterval(id);\n  }, [autoRefresh, loadClaims]);\n\n  const handleAction = (action) => {\n    toast.info(`${action} ${lang === 'ar' ? 'قيد التهيئة' : 'engine is initializing.'}`);\n  };\n\n  const statusCounts = useMemo(() => {\n    return {\n      all: claims.length,\n      pending: claims.filter((c) => c.bucket === 'pending').length,\n      processing: claims.filter((c) => c.bucket === 'processing').length,\n      relayed: claims.filter((c) => c.bucket === 'relayed').length,\n      rejected: claims.filter((c) => c.bucket === 'rejected').length\n    };\n  }, [claims]);\n\n  const filteredClaims = claims.filter(claim => {\n    const matchesFilter = filter === 'all' || claim.bucket === filter;\n\n    const matchesSearch = searchQuery === '' ||\n      claim.id.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      claim.patient.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      String(claim.facility).toLowerCase().includes(searchQuery.toLowerCase()) ||\n      String(claim.patientId || '').toLowerCase().includes(searchQuery.toLowerCase());\n\n    return matchesFilter && matchesSearch;\n  });\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-SA', { \n      style: 'currency', \n      currency: 'SAR',\n      minimumFractionDigits: 0 \n    }).format(amount);\n  };\n\n  const refreshClaim = async (claimId) => {\n    const cid = String(claimId || '');\n    if (!cid) return;\n    setBusyById((prev) => ({ ...prev, [cid]: true }));\n    try {\n      const res = await fetch(`${API_BASE_URL}/api/claim-status/${encodeURIComponent(cid)}`);\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || data.success === false) {\n        throw new Error(data.error || data.message || `HTTP ${res.status}`);\n      }\n      setClaims((prev) => prev.map((c) => {\n        if (c.id !== cid) return c;\n        const progressPercentage = Number(data.progress?.percentage || c.progressPercentage || 0);\n        const status = String(data.status || c.status || 'processing').toLowerCase();\n        return {\n          ...c,\n          status,\n          progressPercentage,\n          currentStage: data.progress?.currentStage || c.currentStage,\n          lastUpdate: data.timestamps?.lastUpdate || c.lastUpdate,\n          trackingUrl: data.trackingUrl || c.trackingUrl,\n          bucket: bucketFrom(status, progressPercentage)\n        };\n      }));\n      toast.success(t.toast.statusRefreshed);\n    } catch (e) {\n      toast.error(e?.message || t.toast.statusRefreshFailed);\n    } finally {\n      setBusyById((prev) => ({ ...prev, [cid]: false }));\n    }\n  };\n\n  const retryClaim = async (claimId) => {\n    const cid = String(claimId || '');\n    if (!cid) return;\n    setBusyById((prev) => ({ ...prev, [cid]: true }));\n    try {\n      const res = await fetch(`${API_BASE_URL}/api/claims/${encodeURIComponent(cid)}/retry`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' }\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok || data.success === false) {\n        throw new Error(data.error || data.message || `HTTP ${res.status}`);\n      }\n      toast.success(t.toast.retryInitiated);\n      await refreshClaim(cid);\n    } catch (e) {\n      toast.error(e?.message || t.toast.retryFailed);\n    } finally {\n      setBusyById((prev) => ({ ...prev, [cid]: false }));\n    }\n  };\n\n  const openTracking = (claim) => {\n    const url = claim?.trackingUrl || `/tracking.html?claimId=${encodeURIComponent(claim?.id || '')}`;\n    if (!url) return;\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  const openReceipt = (claimId) => {\n    const cid = String(claimId || '');\n    if (!cid) return;\n    window.open(`${API_BASE_URL}/api/claim-receipt/${encodeURIComponent(cid)}`, '_blank', 'noopener,noreferrer');\n  };\n\n  const copyClaimId = async (claimId) => {\n    const cid = String(claimId || '');\n    if (!cid) return;\n    try {\n      await navigator.clipboard.writeText(cid);\n      toast.success(t.toast.claimIdCopied);\n    } catch {\n      toast.error(t.toast.copyFailed);\n    }\n  };\n\n  return (\n    <div className=\"flex-1\">\n      <main className=\"max-w-[1400px] mx-auto p-6 sm:p-8 space-y-8 stagger-children\">\n        \n        {/* Top Operational Section */}\n        <section className=\"animate-premium-in\">\n          <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\n             <SectionHeader \n               title={t.header.title} \n               subtitle={t.header.subtitle}\n               badge={t.header.badge}\n             />\n\t             <div className=\"flex items-center gap-3\">\n\t                <Button\n\t                  variant=\"secondary\"\n\t                  icon={autoRefresh ? 'pause_circle' : 'play_circle'}\n\t                  onClick={() => setAutoRefresh((v) => !v)}\n\t                  data-testid=\"claimsqueue-autorefresh\"\n\t                >\n\t                  {autoRefresh ? t.actions.autoRefreshOn : t.actions.autoRefreshOff}\n\t                </Button>\n\t                <Button\n\t                  variant=\"secondary\"\n\t                  icon=\"refresh\"\n\t                  loading={loading}\n\t                  onClick={() => loadClaims()}\n\t                  data-testid=\"claimsqueue-refresh\"\n\t                >\n\t                  {t.actions.refresh}\n\t                </Button>\n\t                <Button icon=\"add_card\" onClick={() => window.dispatchEvent(new CustomEvent('sbs:navigate', { detail: { view: 'claim-builder' } }))}>\n                    {t.actions.create}\n                  </Button>\n\t             </div>\n\t          </div>\n\n\t          <div className=\"grid grid-cols-2 lg:grid-cols-5 gap-4 mt-8\">\n\t            <FilterCard label={t.filters.all} count={statusCounts.all} active={filter === 'all'} onClick={() => setFilter('all')} icon=\"inventory_2\" color=\"blue\" />\n\t            <FilterCard label={t.filters.pending} count={statusCounts.pending} active={filter === 'pending'} onClick={() => setFilter('pending')} icon=\"pending\" color=\"amber\" />\n\t            <FilterCard label={t.filters.processing} count={statusCounts.processing} active={filter === 'processing'} onClick={() => setFilter('processing')} icon=\"sync\" color=\"indigo\" />\n\t            <FilterCard label={t.filters.relayed} count={statusCounts.relayed} active={filter === 'relayed'} onClick={() => setFilter('relayed')} icon=\"verified\" color=\"emerald\" />\n\t            <FilterCard label={t.filters.rejected} count={statusCounts.rejected} active={filter === 'rejected'} onClick={() => setFilter('rejected')} icon=\"report\" color=\"rose\" />\n\t          </div>\n\t        </section>\n\n        {/* Search & Actions */}\n        <Card className=\"animate-premium-in\" style={{ animationDelay: '100ms' }}>\n           <CardBody className=\"flex flex-col sm:flex-row gap-4 items-end\">\n\t              <div className=\"flex-1\">\n\t                 <Input \n\t                   label={t.search.label}\n\t                   icon=\"search\" \n\t                   placeholder={t.search.placeholder}\n\t                   data-testid=\"claimsqueue-search\"\n\t                   value={searchQuery}\n\t                   onChange={(e) => setSearchQuery(e.target.value)}\n\t                 />\n\t              </div>\n\t              <div className=\"flex gap-2\">\n\t                 <Button variant=\"secondary\" icon=\"filter_list\" onClick={() => toast.info(t.actions.advanced)}>\n                   {t.actions.advanced}\n                 </Button>\n                 <Button\n                   variant=\"secondary\"\n                   icon=\"download\"\n                   onClick={() => {\n                     const rows = filteredClaims.map((c) => [c.id, c.patient, c.facility, c.status, c.amount]);\n                     const csv = [['Claim ID', 'Patient', 'Facility', 'Status', 'Amount'], ...rows]\n                       .map((r) => r.join(','))\n                       .join('\\n');\n                     const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n                     const url = URL.createObjectURL(blob);\n                     const link = document.createElement('a');\n                     link.href = url;\n                     link.download = `claims-queue-${new Date().toISOString().slice(0, 10)}.csv`;\n                     document.body.appendChild(link);\n                     link.click();\n                     document.body.removeChild(link);\n                     URL.revokeObjectURL(url);\n                     toast.success(t.toast.exportOk);\n                   }}\n                 >\n                   {t.actions.export}\n                 </Button>\n              </div>\n           </CardBody>\n        </Card>\n\n        {/* Data Grid */}\n        <Card className=\"animate-premium-in\" style={{ animationDelay: '200ms' }}>\n          <CardHeader \n            title=\"Operational Payload\" \n            subtitle=\"Detailed view of active claims in the current relay cycle.\"\n            action={<span className=\"text-[10px] font-black uppercase text-slate-400\">Total Visible: {filteredClaims.length}</span>}\n          />\n          <div className=\"overflow-x-auto\">\n            {loading ? (\n              <div className=\"py-24 flex flex-col items-center justify-center space-y-4\">\n                 <div className=\"size-12 rounded-full border-4 border-blue-600/10 border-t-blue-600 animate-spin\"></div>\n                 <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">{copy.common.loading}</p>\n              </div>\n            ) : loadError ? (\n              <div className=\"py-24 text-center\">\n                 <p className=\"text-rose-500 font-bold\">{loadError}</p>\n              </div>\n            ) : (\n              <table className=\"w-full text-left\">\n                <thead className=\"bg-slate-50 dark:bg-slate-900/40\">\n                  <tr>\n                    <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">Claim Identifier</th>\n                    <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">Patient Detail</th>\n                    <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">Source Facility</th>\n                    <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500 text-right\">Value (SAR)</th>\n                    <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">Status</th>\n                    <th className=\"px-6 py-4\"></th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-100 dark:divide-slate-800\">\n\t                  {filteredClaims.map((claim, idx) => (\n\t                    <ClaimRow\n\t                      key={claim.id}\n\t                      claim={claim}\n\t                      formatCurrency={formatCurrency}\n\t                      busy={!!busyById[claim.id]}\n\t                      onRefresh={() => refreshClaim(claim.id)}\n\t                      onRetry={() => retryClaim(claim.id)}\n\t                      onOpenTracking={() => openTracking(claim)}\n\t                      onOpenReceipt={() => openReceipt(claim.id)}\n\t                      onCopyId={() => copyClaimId(claim.id)}\n\t                    />\n\t                  ))}\n\t                </tbody>\n\t              </table>\n\t            )}\n\n            {!loading && filteredClaims.length === 0 && (\n               <div className=\"py-32 flex flex-col items-center justify-center space-y-4\">\n                  <div className=\"size-20 bg-slate-50 dark:bg-slate-800 rounded-[32px] flex items-center justify-center text-slate-300\">\n                     <span className=\"material-symbols-outlined text-4xl\">inbox_customize</span>\n                  </div>\n                  <p className=\"text-xs font-bold text-slate-400 uppercase tracking-widest\">No matching results found</p>\n               </div>\n            )}\n          </div>\n        </Card>\n      </main>\n    </div>\n  );\n}\n\nfunction FilterCard({ label, count, active, onClick, icon, color }) {\n  const themes = {\n    blue: 'text-blue-600 border-blue-600/30 bg-blue-600/5',\n    amber: 'text-amber-600 border-amber-600/30 bg-amber-600/5',\n    indigo: 'text-indigo-600 border-indigo-600/30 bg-indigo-600/5',\n    emerald: 'text-emerald-600 border-emerald-600/30 bg-emerald-600/5',\n    rose: 'text-rose-600 border-rose-600/30 bg-rose-600/5',\n  };\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`p-5 rounded-[24px] border-2 text-left transition-all duration-300 group ${\n        active \n          ? `${themes[color]} shadow-xl shadow-slate-900/5 scale-[1.02]`\n          : 'border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900/50 hover:border-slate-200 dark:hover:border-slate-700'\n      } focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900`}\n    >\n      <div className=\"flex justify-between items-start mb-4\">\n         <span aria-hidden=\"true\" className={`material-symbols-outlined text-xl transition-transform group-hover:scale-110 ${active ? themes[color].split(' ')[0] : 'text-slate-400'}`}>{icon}</span>\n         <span className={`text-2xl font-black ${active ? themes[color].split(' ')[0] : 'text-slate-900 dark:text-white'}`}>{count}</span>\n      </div>\n      <p className={`text-[10px] font-black uppercase tracking-widest ${active ? themes[color].split(' ')[0] : 'text-slate-400'}`}>{label}</p>\n    </button>\n  );\n}\n\nfunction ClaimRow({\n  claim,\n  formatCurrency,\n  busy = false,\n  onRefresh,\n  onRetry,\n  onOpenTracking,\n  onOpenReceipt,\n  onCopyId\n}) {\n  const statusConfig = {\n    pending: { label: 'Pending Adjudication', color: 'text-amber-600 bg-amber-600/10' },\n    processing: { label: 'Integrating...', color: 'text-blue-600 bg-blue-600/10' },\n    submitted: { label: 'Relayed to NPHIES', color: 'text-indigo-600 bg-indigo-600/10' },\n    approved: { label: 'Adjudicated', color: 'text-emerald-600 bg-emerald-600/10' },\n    completed: { label: 'Settled', color: 'text-emerald-600 bg-emerald-600/10' },\n    rejected: { label: 'Error Detected', color: 'text-rose-600 bg-rose-600/10 text-[9px]' },\n    failed: { label: 'Relay Failed', color: 'text-rose-600 bg-rose-600/10' }\n  };\n\n  const currentStatus = statusConfig[claim.status] || statusConfig.processing;\n  const riskTheme =\n    claim.aiRiskScore === null\n      ? null\n      : (claim.aiRiskScore >= 80\n        ? { label: 'High Risk', cls: 'bg-rose-500/10 text-rose-600 border-rose-500/20' }\n        : (claim.aiRiskScore >= 60\n          ? { label: 'Review', cls: 'bg-amber-500/10 text-amber-700 border-amber-500/20' }\n          : { label: 'Low Risk', cls: 'bg-emerald-500/10 text-emerald-700 border-emerald-500/20' }));\n\n  return (\n    <tr data-testid={`claimsqueue-row-${claim.id}`} className=\"group hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-all duration-300\">\n      <td className=\"px-6 py-5\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`size-2 rounded-full ${claim.priority === 'urgent' ? 'bg-rose-500 animate-pulse' : 'bg-slate-200 dark:bg-slate-700'}`}></div>\n          <div className=\"flex flex-col\">\n            <span data-testid={`claimsqueue-claimid-${claim.id}`} className=\"font-mono text-sm font-black text-blue-600 bg-blue-600/5 px-2 py-0.5 rounded tracking-tight w-fit\">{claim.id}</span>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">\n                {Number.isFinite(Number(claim.progressPercentage)) ? `${Math.round(Number(claim.progressPercentage))}%` : '--'}\n              </span>\n              {claim.currentStage && (\n                <span className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">\n                  {String(claim.currentStage).replace(/([A-Z])/g, ' $1').trim()}\n                </span>\n              )}\n              {!!claim.itemsCount && (\n                <span className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">\n                  items:{claim.itemsCount}\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      </td>\n      <td className=\"px-6 py-5\">\n        <div className=\"flex flex-col\">\n           <span className=\"text-sm font-bold text-slate-800 dark:text-gray-100\">{claim.patient}</span>\n           <span className=\"text-[10px] font-black uppercase text-slate-400 tracking-widest\">{claim.type} Case</span>\n           {claim.patientId && (\n             <span className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">{claim.patientId}</span>\n           )}\n        </div>\n      </td>\n      <td className=\"px-6 py-5\">\n        <div className=\"flex flex-col\">\n          <span className=\"text-xs font-bold text-slate-500\">{claim.facility}</span>\n          {claim.routeUsed && (\n            <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">route:{claim.routeUsed}</span>\n          )}\n        </div>\n      </td>\n      <td className=\"px-6 py-5 text-right\">\n        <div className=\"flex flex-col items-end gap-1\">\n          <span data-testid={`claimsqueue-amount-${claim.id}`} className=\"text-sm font-black text-slate-900 dark:text-white tracking-tight\">{formatCurrency(claim.amount)}</span>\n          {riskTheme && (\n            <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full border text-[9px] font-black uppercase tracking-widest ${riskTheme.cls}`} title=\"AI pre-submit risk (server-side)\">\n              {riskTheme.label} {claim.aiRiskScore}\n            </span>\n          )}\n        </div>\n      </td>\n      <td className=\"px-6 py-5\">\n        <span className={`inline-flex items-center px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border border-current opacity-90 ${currentStatus.color}`}>\n          {currentStatus.label}\n        </span>\n      </td>\n      <td className=\"px-6 py-5 text-right\">\n        <div className=\"flex items-center justify-end gap-2\">\n          <button\n            type=\"button\"\n            data-testid={`claimsqueue-copy-${claim.id}`}\n            className=\"size-9 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-300 hover:text-slate-900 dark:hover:text-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900\"\n            title=\"Copy Claim ID\"\n            aria-label=\"Copy claim ID\"\n            disabled={busy}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onCopyId?.();\n            }}\n          >\n            <span aria-hidden=\"true\" className=\"material-symbols-outlined text-[20px]\">content_copy</span>\n          </button>\n          <button\n            type=\"button\"\n            data-testid={`claimsqueue-receipt-${claim.id}`}\n            className=\"size-9 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-300 hover:text-indigo-600 transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900\"\n            title=\"Open Receipt JSON\"\n            aria-label=\"Open receipt JSON\"\n            disabled={busy}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onOpenReceipt?.();\n            }}\n          >\n            <span aria-hidden=\"true\" className=\"material-symbols-outlined text-[20px]\">receipt_long</span>\n          </button>\n          <button\n            type=\"button\"\n            data-testid={`claimsqueue-track-${claim.id}`}\n            className=\"size-9 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-300 hover:text-emerald-600 transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900\"\n            title=\"Open Tracking\"\n            aria-label=\"Open tracking\"\n            disabled={busy}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onOpenTracking?.();\n            }}\n          >\n            <span aria-hidden=\"true\" className=\"material-symbols-outlined text-[20px]\">travel_explore</span>\n          </button>\n          <button\n            type=\"button\"\n            data-testid={`claimsqueue-refresh-${claim.id}`}\n            className=\"size-9 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-300 hover:text-blue-600 transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900\"\n            title=\"Refresh Status\"\n            aria-label=\"Refresh status\"\n            disabled={busy}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onRefresh?.();\n            }}\n          >\n            <span aria-hidden=\"true\" className=\"material-symbols-outlined text-[20px]\">sync</span>\n          </button>\n          <button\n            type=\"button\"\n            data-testid={`claimsqueue-retry-${claim.id}`}\n            className={`size-9 rounded-xl transition-all ${\n              ['failed', 'rejected'].includes(String(claim.status || '').toLowerCase())\n                ? 'hover:bg-rose-500/10 text-slate-300 hover:text-rose-600'\n                : 'opacity-40 cursor-not-allowed text-slate-300'\n            } focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900`}\n            title=\"Retry Failed Claim\"\n            aria-label=\"Retry failed claim\"\n            disabled={busy || !['failed', 'rejected'].includes(String(claim.status || '').toLowerCase())}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              onRetry?.();\n            }}\n          >\n            <span aria-hidden=\"true\" className=\"material-symbols-outlined text-[20px]\">refresh</span>\n          </button>\n        </div>\n      </td>\n    </tr>\n  );\n}\n"],"names":["API_BASE_URL","ClaimsQueuePage","lang","copy","i18n","t","filter","setFilter","useState","searchQuery","setSearchQuery","claims","setClaims","loading","setLoading","loadError","setLoadError","autoRefresh","setAutoRefresh","busyById","setBusyById","toast","useToast","bucketFrom","useCallback","status","progressPercentage","s","pct","mapClaim","c","progress","aiRiskScore","priority","loadClaims","silent","res","data","mapped","e","useEffect","id","statusCounts","useMemo","filteredClaims","claim","matchesFilter","matchesSearch","formatCurrency","amount","refreshClaim","claimId","cid","prev","retryClaim","openTracking","url","openReceipt","copyClaimId","jsxs","jsx","SectionHeader","Button","v","FilterCard","Card","CardBody","Input","rows","csv","r","blob","link","CardHeader","idx","ClaimRow","label","count","active","onClick","icon","color","themes","busy","onRefresh","onRetry","onOpenTracking","onOpenReceipt","onCopyId","statusConfig","currentStatus","riskTheme"],"mappings":"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"}