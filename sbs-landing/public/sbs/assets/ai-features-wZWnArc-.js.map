{"version":3,"file":"ai-features-wZWnArc-.js","sources":["../../src/services/geminiService.js","../../src/components/AICopilot.jsx","../../src/services/aiAssistantService.js","../../src/components/SmartClaimAnalyzer.jsx"],"sourcesContent":["// Gemini API Integration Service\n// This service proxies requests through the backend to avoid exposing API keys\n\nconst API_BASE_URL = window.SBS_API_URL || window.location.origin;\n\nexport async function callGemini(prompt, systemInstruction = \"\") {\n  const fetchWithRetry = async (retries = 5, delay = 1000) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/gemini/generate`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ prompt, systemInstruction })\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data.text;\n    } catch (error) {\n      if (retries > 0) {\n        await new Promise(r => setTimeout(r, delay));\n        return fetchWithRetry(retries - 1, delay * 2);\n      }\n      throw error;\n    }\n  };\n\n  return await fetchWithRetry();\n}\n","/**\n * Premium AI Copilot - DeepSeek Powered\n * High-performance neural assistant for clinical orchestration\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { callGemini } from '../services/geminiService';\n\nconst SYSTEM_CONTEXT = `You are GIVC-SBS AI (DeepSeek-V4). Expert in Saudi SBS codes, NPHIES, and CHI. Be technical, concise, and premium.`;\n\nconst LOCALE_TEXT = {\n  en: {\n    greeting: `ðŸ‘‹ **Protocol Initialized.** I am the **GIVC-SBS Neural Assistant**. \n    \nHow may I assist with your clinical workflow or SBS registry today?`,\n    placeholder: 'Execute neural query...',\n    thinking: 'Synthesizing clinical vectors...',\n    footer: 'SBS V3.1 Neural Layer â€¢ Autonomous'\n  },\n  ar: {\n    greeting: `ðŸ‘‹ **ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„.** Ø£Ù†Ø§ **Ù…Ø³Ø§Ø¹Ø¯ GIVC-SBS Ø§Ù„Ø°ÙƒÙŠ**.\n\nÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø³Ø±ÙŠØ±ÙŠ Ø£Ùˆ Ø£ÙƒÙˆØ§Ø¯ SBS Ø§Ù„ÙŠÙˆÙ…ØŸ`,\n    placeholder: 'Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø§Ù„Ø°ÙƒÙŠ...',\n    thinking: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØªØ¬Ù‡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ©...',\n    footer: 'Ø·Ø¨Ù‚Ø© SBS V3.1 Ø§Ù„Ø°ÙƒÙŠØ© â€¢ ØªØ´ØºÙŠÙ„ Ø°Ø§ØªÙŠ'\n  }\n};\n\nexport function AICopilot({ isOpen, onClose, context = {}, lang = 'en' }) {\n  const copy = LOCALE_TEXT[lang] || LOCALE_TEXT.en;\n  const [messages, setMessages] = useState([\n    { role: 'assistant', content: copy.greeting, timestamp: new Date() }\n  ]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n  useEffect(() => {\n    setMessages((prev) => {\n      if (prev.length === 1 && prev[0].role === 'assistant') {\n        return [{ ...prev[0], content: copy.greeting }];\n      }\n      return prev;\n    });\n  }, [copy.greeting]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  useEffect(() => {\n    if (isOpen) setTimeout(() => inputRef.current?.focus(), 300);\n  }, [isOpen]);\n\n  const handleSend = async (customText = null) => {\n    const text = customText || input.trim();\n    if (!text || isLoading) return;\n\n    setMessages(prev => [...prev, { role: 'user', content: text, timestamp: new Date() }]);\n    setInput('');\n    setIsLoading(true);\n\n    try {\n      const resp = await callGemini(`${SYSTEM_CONTEXT}\\nContext: ${JSON.stringify(context)}\\nUser: ${text}`, SYSTEM_CONTEXT);\n      setMessages(prev => [...prev, { role: 'assistant', content: resp, timestamp: new Date() }]);\n    } catch {\n      setMessages(prev => [...prev, { role: 'assistant', content: 'Connection to DeepSeek interrupted. Recalibrating...', timestamp: new Date() }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-y-0 right-0 w-full sm:w-[500px] z-[200] flex flex-col bg-white dark:bg-slate-950 border-l border-white/5 shadow-[-32px_0_64px_-16px_rgba(0,0,0,0.5)] animate-slide-in-right overflow-hidden\">\n       {/* Cinematic Header */}\n       <header className=\"px-10 py-10 bg-slate-900 text-white relative flex flex-col gap-6 shrink-0 border-b border-white/5\">\n          <div className=\"absolute top-0 right-0 p-10 opacity-5 pointer-events-none\">\n             <span className=\"material-symbols-outlined text-[100px] font-black\">neurology</span>\n          </div>\n          <div className=\"flex justify-between items-center relative z-10\">\n             <div className=\"flex items-center gap-5\">\n                <div className=\"size-14 rounded-2xl bg-blue-600 flex items-center justify-center shadow-2xl shadow-blue-600/20\">\n                   <span className=\"material-symbols-outlined text-3xl font-black\">psychology</span>\n                </div>\n                <div>\n                   <h2 className=\"text-xl font-black tracking-tighter uppercase mb-0.5\">Neural Agent</h2>\n                   <div className=\"flex items-center gap-2\">\n                      <span className=\"size-2 rounded-full bg-emerald-500 animate-pulse\"></span>\n                      <p className=\"text-[9px] font-black uppercase tracking-[0.2em] text-slate-400\">DeepSeek-V4 Core Active</p>\n                   </div>\n                </div>\n             </div>\n             <button onClick={onClose} className=\"size-10 rounded-xl bg-white/5 hover:bg-white/10 text-slate-400 transition-colors\">\n                <span className=\"material-symbols-outlined\">close</span>\n             </button>\n          </div>\n       </header>\n\n       {/* Conversation Flow */}\n       <div className=\"flex-1 overflow-y-auto px-10 py-12 space-y-10 scrollbar-hide bg-grid\">\n          {messages.map((m, i) => (\n             <div key={i} className={`flex flex-col ${m.role === 'user' ? 'items-end' : 'items-start'} animate-premium-in`} style={{ animationDelay: `${i * 100}ms` }}>\n                <div className={`max-w-[85%] p-6 rounded-[32px] ${\n                  m.role === 'user' \n                    ? 'bg-blue-600 text-white shadow-2xl shadow-blue-600/20' \n                    : 'bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 text-slate-800 dark:text-slate-200'\n                }`}>\n                   <div className=\"text-sm font-bold leading-relaxed whitespace-pre-wrap\">{m.content}</div>\n                </div>\n                <span className=\"mt-3 text-[9px] font-black uppercase tracking-widest text-slate-400 opacity-50 px-2\">{m.role}</span>\n             </div>\n          ))}\n          {isLoading && (\n             <div className=\"flex flex-col items-start animate-pulse\">\n                <div className=\"bg-slate-50 dark:bg-white/5 border border-white/5 p-6 rounded-[32px] flex items-center gap-4\">\n                   <div className=\"flex gap-1.5\">\n                      <div className=\"size-1.5 rounded-full bg-blue-600\"></div>\n                      <div className=\"size-1.5 rounded-full bg-blue-600 opacity-50\"></div>\n                      <div className=\"size-1.5 rounded-full bg-blue-600 opacity-20\"></div>\n                   </div>\n                   <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">{copy.thinking}</span>\n                </div>\n             </div>\n          )}\n          <div ref={messagesEndRef} />\n       </div>\n\n       {/* Input Terminal */}\n       <footer className=\"p-10 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-white/5\">\n          <div className=\"relative group\">\n             <textarea \n                ref={inputRef}\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && !e.shiftKey && handleSend()}\n                placeholder={copy.placeholder}\n                className=\"w-full h-20 bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 rounded-[28px] pl-8 pr-20 py-6 text-sm font-bold text-slate-800 dark:text-white focus:outline-none focus:border-blue-600/30 transition-all placeholder:text-slate-400 resize-none shadow-sm\"\n             />\n             <button \n               onClick={() => handleSend()} \n               disabled={!input.trim() || isLoading}\n               className=\"absolute right-4 top-1/2 -translate-y-1/2 size-12 rounded-2xl bg-blue-600 text-white shadow-xl shadow-blue-600/20 flex items-center justify-center transition-all hover:scale-105 active:scale-95 disabled:opacity-20\"\n             >\n                <span className=\"material-symbols-outlined font-black\">send</span>\n             </button>\n          </div>\n          <div className=\"mt-6 flex justify-center items-center gap-4\">\n             <div className=\"h-px flex-1 bg-slate-100 dark:bg-white/5\"></div>\n             <p className=\"text-[9px] font-black uppercase tracking-[0.3em] text-slate-400\">{copy.footer}</p>\n             <div className=\"h-px flex-1 bg-slate-100 dark:bg-white/5\"></div>\n          </div>\n       </footer>\n    </div>\n  );\n}\n\nexport function AICopilotFAB({ onClick }) {\n  return (\n    <button onClick={onClick} className=\"fixed bottom-12 right-12 z-[150] size-20 rounded-[32px] bg-blue-600 text-white shadow-[0_24px_64px_-12px_rgba(37,99,235,0.6)] flex items-center justify-center group hover:scale-110 active:scale-95 transition-all animate-float\">\n       <span className=\"material-symbols-outlined text-4xl font-black group-hover:rotate-12 transition-transform\">psychology</span>\n       <div className=\"absolute inset-0 rounded-[32px] border-4 border-white/20 scale-110 animate-ping opacity-20\"></div>\n    </button>\n  );\n}\n","/**\n * AI-Powered SBS Assistant Service\n * Provides intelligent code suggestions, validation, and workflow assistance\n * Powered by Google Gemini AI\n */\n\nimport { callGemini } from './geminiService';\nimport sbsCodesData from '../data/sbs_codes_full.json';\n\n// Build search index for efficient lookups\nconst SBS_CODES = sbsCodesData.codes;\nconst CODES_ARRAY = Object.values(SBS_CODES);\n\n// Common medical abbreviations for better matching\nconst MEDICAL_ABBREVIATIONS = {\n  'cbc': 'complete blood count',\n  'ct': 'computed tomography',\n  'mri': 'magnetic resonance imaging',\n  'ecg': 'electrocardiogram',\n  'ekg': 'electrocardiogram',\n  'us': 'ultrasound',\n  'xray': 'x-ray radiograph',\n  'cabg': 'coronary artery bypass graft',\n  'ptca': 'percutaneous transluminal coronary angioplasty',\n  'er': 'emergency room',\n  'icu': 'intensive care unit',\n  'iv': 'intravenous',\n  'bp': 'blood pressure',\n  'hba1c': 'glycated haemoglobin',\n  'tsh': 'thyroid stimulating hormone',\n  'ldl': 'low density lipoprotein',\n  'hdl': 'high density lipoprotein'\n};\n\n/**\n * AI SBS Assistant Class\n */\nclass AIAssistantService {\n  constructor() {\n    this.cache = new Map();\n    this.cacheTimeout = 1000 * 60 * 30; // 30 minutes\n  }\n\n  /**\n   * Get cache key\n   */\n  getCacheKey(type, query) {\n    return `${type}:${query.toLowerCase().trim()}`;\n  }\n\n  /**\n   * Check cache\n   */\n  getFromCache(key) {\n    const cached = this.cache.get(key);\n    if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {\n      return cached.data;\n    }\n    return null;\n  }\n\n  /**\n   * Set cache\n   */\n  setCache(key, data) {\n    this.cache.set(key, { data, timestamp: Date.now() });\n  }\n\n  /**\n   * Smart search with fuzzy matching and AI enhancement\n   */\n  async smartSearch(query, options = {}) {\n    const { limit = 20, category = null, includeAI = true } = options;\n    \n    // Expand abbreviations\n    let expandedQuery = query.toLowerCase();\n    for (const [abbr, full] of Object.entries(MEDICAL_ABBREVIATIONS)) {\n      expandedQuery = expandedQuery.replace(new RegExp(`\\\\b${abbr}\\\\b`, 'gi'), full);\n    }\n    \n    // Local search first\n    const localResults = this.localSearch(expandedQuery, category, limit);\n    \n    // If good results found locally, return them\n    if (localResults.length >= 5 && !includeAI) {\n      return {\n        results: localResults,\n        source: 'local',\n        query: expandedQuery\n      };\n    }\n    \n    // Enhance with AI if enabled and results are limited\n    if (includeAI && localResults.length < 10) {\n      try {\n        const aiSuggestions = await this.getAISuggestions(query, localResults);\n        \n        // Merge AI suggestions with local results\n        const mergedResults = this.mergeResults(localResults, aiSuggestions);\n        \n        return {\n          results: mergedResults.slice(0, limit),\n          source: 'ai_enhanced',\n          query: expandedQuery,\n          aiInsights: aiSuggestions.insights\n        };\n      } catch (error) {\n        console.warn('AI enhancement failed, using local results:', error);\n      }\n    }\n    \n    return {\n      results: localResults,\n      source: 'local',\n      query: expandedQuery\n    };\n  }\n\n  /**\n   * Local fuzzy search\n   */\n  localSearch(query, category = null, limit = 20) {\n    const queryLower = query.toLowerCase();\n    const queryTerms = queryLower.split(/\\s+/).filter(t => t.length > 2);\n    \n    const scored = [];\n    \n    for (const code of CODES_ARRAY) {\n      // Skip if category filter doesn't match\n      if (category && code.category !== category) continue;\n      \n      let score = 0;\n      const descLower = code.desc.toLowerCase();\n      const catLower = (code.category || '').toLowerCase();\n      const codeLower = code.code.toLowerCase();\n      \n      // Exact code match - highest priority\n      if (codeLower === queryLower || codeLower.startsWith(queryLower)) {\n        score += 100;\n      }\n      \n      // Exact phrase match in description\n      if (descLower.includes(queryLower)) {\n        score += 50;\n      }\n      \n      // Individual term matches\n      for (const term of queryTerms) {\n        if (descLower.includes(term)) {\n          score += 10;\n          // Bonus for word start match\n          if (descLower.startsWith(term) || descLower.includes(` ${term}`)) {\n            score += 5;\n          }\n        }\n        if (catLower.includes(term)) {\n          score += 3;\n        }\n      }\n      \n      if (score > 0) {\n        scored.push({ ...code, score });\n      }\n    }\n    \n    // Sort by score descending\n    scored.sort((a, b) => b.score - a.score);\n    \n    return scored.slice(0, limit);\n  }\n\n  /**\n   * Get AI-powered suggestions\n   */\n  async getAISuggestions(query, existingResults = []) {\n    const cacheKey = this.getCacheKey('suggestions', query);\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n    \n    const existingCodes = existingResults.slice(0, 5).map(r => `${r.code}: ${r.desc}`).join('\\n');\n    \n    const prompt = `You are a Saudi healthcare billing expert. Given the search query, suggest the most relevant SBS (Saudi Billing System) procedure codes.\n\nSearch Query: \"${query}\"\n\nAlready Found Codes:\n${existingCodes || 'None'}\n\nBased on the query, suggest additional specific SBS procedure codes that might be relevant. Consider:\n1. The medical context and intent\n2. Related procedures that are often performed together\n3. Alternative terminology the user might mean\n\nReturn JSON only:\n{\n  \"suggestions\": [\n    { \"code\": \"XXXXX-XX-XX\", \"desc\": \"Description\", \"confidence\": 0.95, \"reason\": \"Why this matches\" }\n  ],\n  \"insights\": \"Brief explanation of the search intent and recommendations\"\n}`;\n\n    try {\n      const response = await callGemini(prompt, \n        \"You are a senior Saudi medical coder expert in SBS V3.1. Return only valid JSON.\"\n      );\n      \n      // Parse JSON from response\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        const parsed = JSON.parse(jsonMatch[0]);\n        \n        // Validate and enhance suggestions with actual SBS data\n        const enhancedSuggestions = (parsed.suggestions || [])\n          .map(s => {\n            const actualCode = SBS_CODES[s.code];\n            if (actualCode) {\n              return {\n                ...actualCode,\n                confidence: s.confidence,\n                aiReason: s.reason,\n                source: 'ai'\n              };\n            }\n            return null;\n          })\n          .filter(Boolean);\n        \n        const result = {\n          suggestions: enhancedSuggestions,\n          insights: parsed.insights\n        };\n        \n        this.setCache(cacheKey, result);\n        return result;\n      }\n    } catch (error) {\n      console.error('AI suggestion error:', error);\n    }\n    \n    return { suggestions: [], insights: null };\n  }\n\n  /**\n   * Merge local and AI results\n   */\n  mergeResults(localResults, aiResults) {\n    const seen = new Set(localResults.map(r => r.code));\n    const merged = [...localResults];\n    \n    for (const suggestion of aiResults.suggestions || []) {\n      if (!seen.has(suggestion.code)) {\n        merged.push(suggestion);\n        seen.add(suggestion.code);\n      }\n    }\n    \n    return merged;\n  }\n\n  /**\n   * AI-powered claim validation\n   */\n  async validateClaim(claim) {\n    const items = claim.items || [];\n    \n    if (items.length === 0) {\n      return { valid: false, errors: ['No items in claim'], warnings: [], suggestions: [] };\n    }\n    \n    const itemsList = items.map((item, i) => \n      `${i + 1}. ${item.sbsCode} - ${item.description} (Qty: ${item.quantity}, Price: ${item.unitPrice} SAR)`\n    ).join('\\n');\n    \n    const prompt = `You are a Saudi healthcare claims auditor. Validate this claim for NPHIES submission.\n\nPatient ID: ${claim.patientId}\nService Date: ${claim.serviceDate}\nClaim Type: ${claim.claimType}\nTotal Amount: ${claim.totalAmount} SAR\n\nServices:\n${itemsList}\n\nCheck for:\n1. Missing required procedures (e.g., anesthesia with surgery)\n2. Duplicate or conflicting codes\n3. Unusual quantities or pricing\n4. Prior authorization requirements\n5. Bundle opportunities for cost savings\n\nReturn JSON:\n{\n  \"valid\": true/false,\n  \"errors\": [\"Critical issues that must be fixed\"],\n  \"warnings\": [\"Non-critical issues to review\"],\n  \"suggestions\": [\n    { \"type\": \"add\", \"code\": \"XXXXX-XX-XX\", \"reason\": \"Why to add\" },\n    { \"type\": \"bundle\", \"name\": \"Bundle Name\", \"savings\": 5000 },\n    { \"type\": \"priorAuth\", \"code\": \"XXXXX-XX-XX\", \"reason\": \"Why PA needed\" }\n  ],\n  \"summary\": \"Brief summary of validation\"\n}`;\n\n    try {\n      const response = await callGemini(prompt,\n        \"You are a Saudi healthcare claims auditor. Validate for CHI/NPHIES compliance. Return only JSON.\"\n      );\n      \n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[0]);\n      }\n    } catch (error) {\n      console.error('Claim validation error:', error);\n    }\n    \n    return {\n      valid: true,\n      errors: [],\n      warnings: ['AI validation unavailable - please review manually'],\n      suggestions: [],\n      summary: 'Manual review required'\n    };\n  }\n\n  /**\n   * AI-powered diagnosis suggestion\n   */\n  async suggestDiagnoses(procedureCode, description) {\n    const cacheKey = this.getCacheKey('diagnosis', `${procedureCode}:${description}`);\n    const cached = this.getFromCache(cacheKey);\n    if (cached) return cached;\n    \n    const prompt = `You are a Saudi medical coder. Given this SBS procedure, suggest the most appropriate ICD-10 diagnosis codes.\n\nSBS Procedure: ${procedureCode}\nDescription: ${description}\n\nSuggest 3-5 commonly associated ICD-10 diagnosis codes with explanations.\n\nReturn JSON:\n{\n  \"diagnoses\": [\n    { \"code\": \"X00.00\", \"description\": \"Diagnosis description\", \"relevance\": \"high/medium/low\", \"reason\": \"Why associated\" }\n  ]\n}`;\n\n    try {\n      const response = await callGemini(prompt,\n        \"You are a Saudi medical coding expert. Suggest ICD-10 diagnoses for SBS procedures. Return only JSON.\"\n      );\n      \n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        const result = JSON.parse(jsonMatch[0]);\n        this.setCache(cacheKey, result);\n        return result;\n      }\n    } catch (error) {\n      console.error('Diagnosis suggestion error:', error);\n    }\n    \n    return { diagnoses: [] };\n  }\n\n  /**\n   * AI-powered code mapping from internal hospital codes\n   */\n  async mapInternalCode(internalCode, description, context = {}) {\n    const prompt = `You are a Saudi healthcare billing expert. Map this internal hospital code to the official SBS V3.1 code.\n\nInternal Code: ${internalCode}\nDescription: ${description}\nDepartment: ${context.department || 'Unknown'}\nFacility Type: ${context.facilityType || 'Hospital'}\n\nFind the most accurate SBS V3.1 code. The SBS code format is NNNNN-NN-NN.\n\nReturn JSON:\n{\n  \"sbsCode\": \"NNNNN-NN-NN\",\n  \"sbsDescription\": \"Official SBS description\",\n  \"confidence\": 0.95,\n  \"rationale\": \"Why this mapping is correct\",\n  \"alternatives\": [\n    { \"code\": \"NNNNN-NN-NN\", \"description\": \"Alternative\", \"confidence\": 0.85 }\n  ]\n}`;\n\n    try {\n      const response = await callGemini(prompt,\n        \"You are a Saudi SBS V3.1 coding expert. Map internal codes to official SBS codes. Return only JSON.\"\n      );\n      \n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        const result = JSON.parse(jsonMatch[0]);\n        \n        // Verify the suggested code exists\n        if (result.sbsCode && SBS_CODES[result.sbsCode]) {\n          return {\n            ...result,\n            verified: true,\n            officialDesc: SBS_CODES[result.sbsCode].desc\n          };\n        }\n        \n        // If not found, search for similar\n        const similar = this.localSearch(result.sbsDescription || description, null, 5);\n        if (similar.length > 0) {\n          return {\n            sbsCode: similar[0].code,\n            sbsDescription: similar[0].desc,\n            confidence: 0.75,\n            rationale: 'AI suggestion validated against SBS catalogue',\n            verified: true,\n            alternatives: similar.slice(1, 4).map(s => ({\n              code: s.code,\n              description: s.desc,\n              confidence: 0.6\n            }))\n          };\n        }\n      }\n    } catch (error) {\n      console.error('Code mapping error:', error);\n    }\n    \n    // Fallback to local search\n    const results = this.localSearch(description, null, 5);\n    if (results.length > 0) {\n      return {\n        sbsCode: results[0].code,\n        sbsDescription: results[0].desc,\n        confidence: 0.6,\n        rationale: 'Matched by description keywords',\n        verified: true,\n        alternatives: results.slice(1).map(r => ({\n          code: r.code,\n          description: r.desc,\n          confidence: 0.5\n        }))\n      };\n    }\n    \n    return {\n      sbsCode: null,\n      confidence: 0,\n      rationale: 'No matching SBS code found',\n      verified: false\n    };\n  }\n\n  /**\n   * AI-powered prior authorization assistance\n   */\n  async assistPriorAuth(procedureCode, patientInfo, clinicalNotes) {\n    const code = SBS_CODES[procedureCode];\n    \n    const prompt = `You are a Saudi healthcare prior authorization specialist. Help prepare a prior authorization request.\n\nProcedure: ${procedureCode} - ${code?.desc || 'Unknown procedure'}\nPatient Age: ${patientInfo.age || 'Unknown'}\nPatient Gender: ${patientInfo.gender || 'Unknown'}\nDiagnosis: ${patientInfo.diagnosis || 'Not specified'}\nClinical Notes: ${clinicalNotes || 'None provided'}\n\nGenerate a professional prior authorization justification that will maximize approval chances with Saudi insurance companies.\n\nReturn JSON:\n{\n  \"justification\": \"Detailed clinical justification text\",\n  \"supportingPoints\": [\"Key point 1\", \"Key point 2\"],\n  \"requiredDocuments\": [\"Document 1\", \"Document 2\"],\n  \"estimatedApprovalTime\": \"24-48 hours\",\n  \"approvalLikelihood\": \"high/medium/low\",\n  \"tips\": [\"Tip to improve approval chances\"]\n}`;\n\n    try {\n      const response = await callGemini(prompt,\n        \"You are a Saudi healthcare prior authorization expert. Help maximize PA approval chances. Return only JSON.\"\n      );\n      \n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        return JSON.parse(jsonMatch[0]);\n      }\n    } catch (error) {\n      console.error('PA assistance error:', error);\n    }\n    \n    return {\n      justification: 'Please provide clinical justification for this procedure.',\n      supportingPoints: ['Medical necessity', 'Patient history'],\n      requiredDocuments: ['Clinical notes', 'Lab results', 'Imaging reports'],\n      estimatedApprovalTime: '48-72 hours',\n      approvalLikelihood: 'medium',\n      tips: ['Include detailed clinical history', 'Attach supporting documentation']\n    };\n  }\n\n  /**\n   * Get all SBS codes (for browser)\n   */\n  getAllCodes() {\n    return CODES_ARRAY;\n  }\n\n  /**\n   * Get unique categories\n   */\n  getCategories() {\n    const categories = new Set();\n    for (const code of CODES_ARRAY) {\n      if (code.category) categories.add(code.category);\n    }\n    return Array.from(categories).sort();\n  }\n\n  /**\n   * Get code by ID\n   */\n  getCode(codeId) {\n    return SBS_CODES[codeId] || null;\n  }\n\n  /**\n   * Get total count\n   */\n  getTotalCount() {\n    return CODES_ARRAY.length;\n  }\n}\n\n// Export singleton instance\nexport const aiAssistant = new AIAssistantService();\n\n// Export class for testing\nexport { AIAssistantService };\n","/**\n * Premium Smart Claim Analyzer\n * AI-Powered Real-time Clinical Vector Analysis \n */\n\nimport React, { useState, useEffect } from 'react';\nimport { callGemini } from '../services/geminiService';\nimport { Card, CardBody } from './ui/Card';\nimport { Button } from './ui/Button';\n\nconst ANALYSIS_CATEGORIES = [\n  { id: 'compliance', icon: 'verified', label: 'Safety Hub', color: 'emerald' },\n  { id: 'optimization', icon: 'query_stats', label: 'Yield Ops', color: 'amber' },\n  { id: 'risk', icon: 'shield_alert', label: 'Risk Vector', color: 'rose' },\n  { id: 'prediction', icon: 'psychology', label: 'Neural Out', color: 'blue' },\n];\n\nexport function SmartClaimAnalyzer({ claimData, isOpen, onClose, onApplySuggestion }) {\n  const [analysis, setAnalysis] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [activeTab, setActiveTab] = useState('compliance');\n  const [appliedSuggestions, setAppliedSuggestions] = useState(new Set());\n\n  useEffect(() => {\n    if (isOpen && claimData) runAnalysis();\n  }, [isOpen]);\n\n  const runAnalysis = async () => {\n    if (!claimData) return;\n    setIsAnalyzing(true);\n    setAnalysis(null);\n\n    try {\n      const prompt = `Full Neural Analysis of Claim: ${JSON.stringify(claimData, null, 2)}. Provide JSON with approvalProbability, estimatedProcessingDays, overallScore, compliance, optimization, risk, and prediction details.`;\n      const response = await callGemini(prompt, \"Saudi SBS Healthcare Analyst Expert. Output JSON strictly.\");\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) setAnalysis(JSON.parse(jsonMatch[0]));\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const handleApplySuggestion = (suggestion, index) => {\n    setAppliedSuggestions(prev => new Set([...prev, index]));\n    onApplySuggestion?.(suggestion);\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-6 sm:p-12 overflow-hidden\">\n      <div className=\"absolute inset-0 bg-slate-950/80 backdrop-blur-xl animate-in fade-in duration-500\" onClick={onClose} />\n      \n      <div className=\"relative w-full max-w-6xl h-full flex flex-col bg-white dark:bg-slate-950 rounded-[48px] shadow-[0_32px_128px_-16px_rgba(0,0,0,0.6)] border border-white/5 animate-premium-in overflow-hidden\">\n        \n        {/* Dynamic Header */}\n        <header className=\"px-12 py-12 flex flex-col md:flex-row justify-between items-center gap-8 border-b border-slate-100 dark:border-white/5 relative\">\n          <div className=\"absolute top-0 right-0 p-12 opacity-5 pointer-events-none\">\n             <span className=\"material-symbols-outlined text-[160px] font-black\">neurology</span>\n          </div>\n          <div className=\"flex items-center gap-8 relative z-10\">\n             <div className=\"size-20 rounded-[32px] bg-blue-600 flex items-center justify-center shadow-2xl shadow-blue-600/40\">\n                <span className=\"material-symbols-outlined text-4xl text-white\">analytics</span>\n             </div>\n             <div className=\"space-y-1\">\n                <h2 className=\"text-4xl font-black tracking-tighter text-slate-900 dark:text-white uppercase\">Inference Engine</h2>\n                <p className=\"text-[10px] font-black uppercase tracking-[0.3em] text-blue-600\">Autonomous clinical auditing active</p>\n             </div>\n          </div>\n\n          <div className=\"flex gap-4 relative z-10\">\n             <Button variant=\"secondary\" icon=\"refresh\" loading={isAnalyzing} onClick={runAnalysis}>Recalibrate</Button>\n             <button onClick={onClose} className=\"size-14 rounded-2xl bg-slate-100 dark:bg-white/5 text-slate-400 hover:text-rose-500 transition-colors flex items-center justify-center\">\n                <span className=\"material-symbols-outlined\">close</span>\n             </button>\n          </div>\n        </header>\n\n        {/* Neural Metrics Bar */}\n        {analysis && !isAnalyzing && (\n           <div className=\"grid grid-cols-2 md:grid-cols-4 divide-x divide-slate-100 dark:divide-white/5 border-b border-slate-100 dark:border-white/5\">\n              <KpiTile label=\"Approval Likelihood\" value={`${analysis.approvalProbability}%`} color=\"blue\" />\n              <KpiTile label=\"Neural Score\" value={`${analysis.overallScore}/100`} color=\"emerald\" />\n              <KpiTile label=\"Adjudication ETA\" value={`${analysis.estimatedProcessingDays}D`} color=\"amber\" />\n              <KpiTile label=\"Yield Gain\" value={`${analysis.optimization?.potentialSavings || 0} SAR`} color=\"rose\" />\n           </div>\n        )}\n\n        <div className=\"flex-1 overflow-hidden flex flex-col lg:flex-row\">\n           {/* Sidebar Navigation */}\n           <aside className=\"w-full lg:w-72 border-r border-slate-100 dark:border-white/5 p-8 flex flex-col gap-3 shrink-0\">\n              {ANALYSIS_CATEGORIES.map(cat => (\n                 <button \n                  key={cat.id} \n                  onClick={() => setActiveTab(cat.id)}\n                  className={`flex items-center gap-4 px-6 py-5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${\n                    activeTab === cat.id \n                      ? 'bg-blue-600 text-white shadow-xl shadow-blue-600/20' \n                      : 'text-slate-500 hover:text-blue-600 hover:bg-blue-600/5'\n                  }`}\n                 >\n                    <span className=\"material-symbols-outlined text-xl\">{cat.icon}</span>\n                    {cat.label}\n                 </button>\n              ))}\n           </aside>\n\n           {/* Main Work Context */}\n           <div className=\"flex-1 overflow-y-auto p-12 scrollbar-hide\">\n              {isAnalyzing ? (\n                 <div className=\"h-full flex flex-col items-center justify-center space-y-8 animate-pulse\">\n                    <div className=\"relative\">\n                       <div className=\"size-24 rounded-full border-4 border-blue-600/10 border-t-blue-600 animate-spin\"></div>\n                       <div className=\"absolute inset-0 flex items-center justify-center\">\n                          <span className=\"material-symbols-outlined text-blue-600 text-3xl\">psychology</span>\n                       </div>\n                    </div>\n                    <div className=\"text-center space-y-2\">\n                       <h3 className=\"text-xl font-black text-slate-900 dark:text-white uppercase tracking-tighter\">Running DeepSeek-V4 Inference</h3>\n                       <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">Comparing clinical vectors against CHI regulatory dataset</p>\n                    </div>\n                 </div>\n              ) : analysis ? (\n                 <div className=\"max-w-4xl mx-auto space-y-12 animate-premium-in\">\n                    {activeTab === 'compliance' && (\n                       <div className=\"space-y-8\">\n                          <div className={`p-8 rounded-[38px] flex items-center justify-between gap-12 ${analysis.compliance?.status === 'passing' ? 'bg-emerald-500/10 border border-emerald-500/20' : 'bg-rose-500/10 border border-rose-500/20'}`}>\n                             <div className=\"space-y-2\">\n                                <h3 className={`text-4xl font-black uppercase tracking-tighter ${analysis.compliance?.status === 'passing' ? 'text-emerald-500' : 'text-rose-500'}`}>\n                                   {analysis.compliance?.status === 'passing' ? 'REGULATORY SECURE' : 'COMPLIANCE VOID'}\n                                </h3>\n                                <p className=\"text-sm font-bold text-slate-500 italic\">\"Global score of {analysis.compliance?.score}% based on CHI-SBS criteria.\"</p>\n                             </div>\n                             <div className=\"size-24 rounded-full border-8 border-current flex items-center justify-center text-3xl font-black opacity-20\">\n                                {analysis.compliance?.score}%\n                             </div>\n                          </div>\n                          <div className=\"grid gap-4\">\n                             {analysis.compliance?.items?.map((item, i) => <ComplianceCell key={i} item={item} />)}\n                          </div>\n                       </div>\n                    )}\n\n                    {activeTab === 'optimization' && (\n                       <div className=\"grid sm:grid-cols-2 gap-6\">\n                          {analysis.optimization?.items?.map((item, i) => (\n                             <OptimizationCell \n                              key={i} \n                              item={item} \n                              applied={appliedSuggestions.has(`opt-${i}`)}\n                              onApply={() => handleApplySuggestion(item, `opt-${i}`)}\n                             />\n                          ))}\n                       </div>\n                    )}\n\n                    {activeTab === 'risk' && (\n                       <div className=\"space-y-8\">\n                          <div className=\"p-8 rounded-[40px] bg-slate-950 text-white relative overflow-hidden\">\n                             <div className=\"absolute inset-0 bg-blue-600/10 backdrop-blur-3xl\"></div>\n                             <div className=\"relative z-10 flex justify-between items-center\">\n                                <div className=\"space-y-1\">\n                                   <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-500\">Rejection Probability</p>\n                                   <h4 className={`text-5xl font-black tracking-tighter ${analysis.risk?.rejectionProbability > 40 ? 'text-rose-500' : 'text-blue-500'}`}>{analysis.risk?.rejectionProbability}%</h4>\n                                </div>\n                                <div className=\"h-2 w-72 bg-white/10 rounded-full overflow-hidden\">\n                                   <div className={`h-full ${analysis.risk?.rejectionProbability > 40 ? 'bg-rose-500' : 'bg-blue-600'} transition-all duration-1000`} style={{ width: `${analysis.risk?.rejectionProbability}%` }}></div>\n                                </div>\n                             </div>\n                          </div>\n                          <div className=\"grid gap-4\">\n                             {analysis.risk?.items?.map((item, i) => <RiskCell key={i} item={item} />)}\n                          </div>\n                       </div>\n                    )}\n\n                    {activeTab === 'prediction' && (\n                       <div className=\"grid gap-8\">\n                          <Card className=\"bg-blue-600 text-white border-none shadow-2xl shadow-blue-600/20\">\n                             <CardBody className=\"p-10 space-y-6\">\n                                <span className=\"material-symbols-outlined text-4xl font-black\">electric_bolt</span>\n                                <h3 className=\"text-3xl font-black tracking-tighter leading-tight italic\">\"{analysis.prediction?.summary}\"</h3>\n                                <div className=\"flex gap-4\">\n                                   {analysis.prediction?.recommendations?.slice(0, 2).map((r, i) => (\n                                      <p key={i} className=\"text-xs font-black uppercase tracking-widest text-white/60\"># {r}</p>\n                                   ))}\n                                </div>\n                             </CardBody>\n                          </Card>\n                          \n                          <div className=\"grid sm:grid-cols-2 gap-8\">\n                             <PredictionTile label=\"NPHIES Adjudication Rate\" value={`${analysis.prediction?.similarClaimsApprovalRate}%`} sub=\"Historical accuracy in sector\" />\n                             <PredictionTile label=\"Prior Auth Trigger\" value={analysis.prediction?.priorAuthRequired ? 'Required' : 'Automated'} sub={analysis.prediction?.priorAuthItems?.[0] || 'Clean pathway'} />\n                          </div>\n                       </div>\n                    )}\n                 </div>\n              ) : null}\n           </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction KpiTile({ label, value, color }) {\n   const colors = {\n      blue: 'text-blue-600',\n      emerald: 'text-emerald-500',\n      amber: 'text-amber-500',\n      rose: 'text-rose-500',\n   };\n   return (\n      <div className=\"p-10 text-center space-y-2\">\n         <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400\">{label}</p>\n         <h4 className={`text-4xl font-black tracking-tighter ${colors[color]}`}>{value}</h4>\n      </div>\n   );\n}\n\nfunction ComplianceCell({ item }) {\n   return (\n      <div className={`p-8 rounded-[32px] border flex gap-6 items-center ${item.status === 'pass' ? 'bg-emerald-500/5 border-emerald-500/10' : 'bg-rose-500/5 border-rose-500/10'}`}>\n         <div className={`p-3 rounded-2xl ${item.status === 'pass' ? 'bg-emerald-500 text-white' : 'bg-rose-500 text-white'}`}>\n            <span className=\"material-symbols-outlined text-xl font-black\">{item.status === 'pass' ? 'check' : 'close'}</span>\n         </div>\n         <div className=\"flex-1 space-y-1\">\n            <h4 className=\"text-sm font-black text-slate-900 dark:text-white\">{item.title}</h4>\n            <p className=\"text-xs font-bold text-slate-500 opacity-80\">{item.description}</p>\n         </div>\n         {item.fix && <div className=\"px-5 py-2.5 rounded-xl bg-slate-900 dark:bg-white/5 border border-white/5 text-[10px] font-black uppercase tracking-widest text-blue-600\">Manual Resolve</div>}\n      </div>\n   );\n}\n\nfunction OptimizationCell({ item, applied, onApply }) {\n   return (\n      <Card className={`group relative overflow-hidden transition-all ${applied ? 'border-emerald-500 bg-emerald-500/5 shadow-2xl shadow-emerald-500/10' : 'border-amber-500/20'}`}>\n         <CardBody className=\"p-8 space-y-6\">\n            <div className=\"flex justify-between items-start\">\n               <div className=\"size-12 rounded-2xl bg-amber-500 text-white flex items-center justify-center font-black\">\n                  <span className=\"material-symbols-outlined\">{item.type === 'bundle' ? 'inventory_2' : 'payments'}</span>\n               </div>\n               <span className=\"text-[9px] font-black uppercase tracking-widest text-rose-500 bg-rose-500/10 px-2 py-1 rounded\">High Impact</span>\n            </div>\n            <div className=\"space-y-1\">\n               <h4 className=\"text-sm font-black text-slate-900 dark:text-white uppercase tracking-tight\">{item.title}</h4>\n               <p className=\"text-xs font-bold text-slate-500 leading-relaxed italic\">\"{item.description}\"</p>\n            </div>\n            <button \n              onClick={onApply} \n              disabled={applied}\n              className={`w-full py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${applied ? 'bg-emerald-500 text-white' : 'bg-slate-900 dark:bg-white text-white dark:text-slate-950 shadow-xl'}`}\n            >\n               {applied ? 'Optimization Synchronized' : 'Analyze & Inject'}\n            </button>\n         </CardBody>\n      </Card>\n   );\n}\n\nfunction RiskCell({ item }) {\n   return (\n      <div className=\"p-8 rounded-[38px] bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 flex justify-between items-center group\">\n         <div className=\"flex gap-6 items-center\">\n            <div className={`p-4 rounded-2xl ${item.severity === 'high' ? 'bg-rose-500 text-white' : 'bg-blue-600 text-white shadow-xl shadow-blue-600/20'}`}>\n               <span className=\"material-symbols-outlined text-xl font-black text-white\">shield_alert</span>\n            </div>\n            <div className=\"space-y-1\">\n               <h4 className=\"text-base font-black text-slate-900 dark:text-white tracking-tighter uppercase\">{item.title}</h4>\n               <p className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest\">Protocol: Neural-Scan V4</p>\n            </div>\n         </div>\n         <div className=\"text-right\">\n            <p className=\"text-xs font-bold text-slate-500 mb-2 italic px-8\">\"{item.description}\"</p>\n         </div>\n      </div>\n   );\n}\n\nfunction PredictionTile({ label, value, sub }) {\n   return (\n      <div className=\"p-10 rounded-[44px] bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 space-y-4\">\n         <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">{label}</p>\n         <h4 className=\"text-5xl font-black tracking-tighter text-blue-600\">{value}</h4>\n         <p className=\"text-xs font-bold text-slate-500 italic\">#{sub}</p>\n      </div>\n   );\n}\n"],"names":["API_BASE_URL","callGemini","prompt","systemInstruction","fetchWithRetry","retries","delay","response","error","r","SYSTEM_CONTEXT","LOCALE_TEXT","AICopilot","isOpen","onClose","context","lang","copy","messages","setMessages","useState","input","setInput","isLoading","setIsLoading","messagesEndRef","useRef","inputRef","useEffect","prev","handleSend","customText","text","resp","jsxs","jsx","m","i","e","AICopilotFAB","onClick","SBS_CODES","sbsCodesData","CODES_ARRAY","MEDICAL_ABBREVIATIONS","AIAssistantService","type","query","key","cached","data","options","limit","category","includeAI","expandedQuery","abbr","full","localResults","aiSuggestions","queryLower","queryTerms","t","scored","code","score","descLower","catLower","codeLower","term","b","existingResults","cacheKey","existingCodes","jsonMatch","parsed","result","s","actualCode","aiResults","seen","merged","suggestion","claim","items","itemsList","item","procedureCode","description","internalCode","similar","results","patientInfo","clinicalNotes","categories","codeId","aiAssistant","ANALYSIS_CATEGORIES","SmartClaimAnalyzer","claimData","onApplySuggestion","analysis","setAnalysis","isAnalyzing","setIsAnalyzing","activeTab","setActiveTab","appliedSuggestions","setAppliedSuggestions","runAnalysis","handleApplySuggestion","index","Button","KpiTile","cat","ComplianceCell","OptimizationCell","RiskCell","Card","CardBody","PredictionTile","label","value","color","colors","applied","onApply","sub"],"mappings":"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"}