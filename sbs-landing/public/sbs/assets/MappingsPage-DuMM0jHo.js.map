{"version":3,"file":"MappingsPage-DuMM0jHo.js","sources":["../../src/pages/MappingsPage.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { Card, CardBody, CardHeader } from '../components/ui/Card';\nimport { SectionHeader } from '../components/ui/SectionHeader';\nimport { Button } from '../components/ui/Button';\nimport { APIService } from '../services/apiService';\nimport { useToast } from '../components/Toast';\nimport { i18n } from '../utils/i18n';\n\n/**\n * Premium Mappings Analytics Page (Live)\n * Uses same-origin mapping telemetry APIs for a CSP-friendly, production-safe dashboard.\n */\nexport function MappingsPage({ lang = 'en' }) {\n  const toast = useToast();\n  const copy = i18n[lang] || i18n.en;\n  const t = copy.pages?.mappings || i18n.en.pages.mappings;\n  const [loading, setLoading] = useState(true);\n  const [telemetry, setTelemetry] = useState(null);\n  const [error, setError] = useState(null);\n  const [refreshNonce, setRefreshNonce] = useState(0);\n\n  useEffect(() => {\n    let cancelled = false;\n\n    const fetchTelemetry = async () => {\n      try {\n        const data = await APIService.getMappingsTelemetry(30);\n        if (cancelled) return;\n        if (!data?.success) throw new Error(data?.error || 'Failed to load telemetry');\n        setTelemetry(data);\n        setError(null);\n      } catch (e) {\n        if (cancelled) return;\n        setError(e?.message || 'Failed to load telemetry');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n\n    fetchTelemetry();\n    const interval = setInterval(fetchTelemetry, 20000);\n    return () => {\n      cancelled = true;\n      clearInterval(interval);\n    };\n  }, [refreshNonce]);\n\n  useEffect(() => {\n    if (!error) return;\n    toast.warning(error);\n  }, [error]);\n\n  const stats = useMemo(() => {\n    const totals = telemetry?.totals || {};\n    const kpis = telemetry?.kpis || {};\n    return {\n      events: Number(totals.events || 0),\n      uniqueInternalCodes: Number(totals.uniqueInternalCodes || 0),\n      overrides: Number(totals.overrides || 0),\n      autoPct: Number(kpis.autoAccepted?.pct || 0),\n      reviewPct: Number(kpis.reviewRequired?.pct || 0),\n      rejectedPct: Number(kpis.rejected?.pct || 0),\n      noMatchPct: Number(kpis.noMatch?.pct || 0),\n      avgConfidence: Number(kpis.avgConfidence || 0),\n      avgLatencyMs: Number(kpis.avgLatencyMs || 0),\n      p95LatencyMs: Number(kpis.p95LatencyMs || 0),\n      overrideHits: Number(kpis.overrideHits?.count || 0),\n      noMatch: Number(kpis.noMatch?.count || 0),\n      rejected: Number(kpis.rejected?.count || 0),\n      facilities: Array.isArray(telemetry?.facilities) ? telemetry.facilities : [],\n      daily: Array.isArray(telemetry?.daily) ? telemetry.daily : [],\n      windowDays: Number(telemetry?.windowDays || 30),\n      lastEventAt: telemetry?.lastEventAt || null,\n      config: telemetry?.config || null\n    };\n  }, [telemetry]);\n\n  const nav = (view) => window.dispatchEvent(new CustomEvent('sbs:navigate', { detail: { view } }));\n\n  return (\n    <div className=\"flex-1\">\n      <main className=\"max-w-[1400px] mx-auto p-6 sm:p-8 space-y-8 stagger-children\">\n        <section className=\"animate-premium-in\">\n          <SectionHeader\n            title={t.header.title}\n            subtitle={t.header.subtitle}\n            badge={loading ? t.header.badgeLoading : t.header.badgeLive}\n          />\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mt-8\">\n            <StatCard\n              testId=\"mappings-stat-events\"\n              title={t.stats.mappingsObserved}\n              value={formatInt(stats.events)}\n              trend={`${stats.windowDays}d`}\n              icon=\"dataset\"\n              color=\"blue\"\n            />\n            <StatCard\n              testId=\"mappings-stat-auto\"\n              title={t.stats.autoAcceptRate}\n              value={`${formatPct(stats.autoPct)}%`}\n              trend={`${formatPct(stats.avgConfidence * 100)}% ${t.stats.avgConfidenceSuffix}`}\n              icon=\"psychology\"\n              color=\"indigo\"\n            />\n            <StatCard\n              testId=\"mappings-stat-review\"\n              title={t.stats.reviewQueue}\n              value={`${formatPct(stats.reviewPct)}%`}\n              trend={`${formatInt(stats.uniqueInternalCodes)} ${t.stats.uniqueSuffix}`}\n              icon=\"fact_check\"\n              color=\"emerald\"\n            />\n            <StatCard\n              testId=\"mappings-stat-latency\"\n              title={t.stats.p95Latency}\n              value={formatLatency(stats.p95LatencyMs)}\n              trend={`${formatLatency(stats.avgLatencyMs)} ${t.stats.avgLatencySuffix}`}\n              icon=\"bolt\"\n              color=\"amber\"\n            />\n          </div>\n\n          <div className=\"mt-6 flex flex-wrap items-center gap-3\">\n            <Button size=\"sm\" icon=\"tune\" onClick={() => nav('mapping_rules')} data-testid=\"mappings-open-rules\">\n              {t.actions.configureRules}\n            </Button>\n            <Button size=\"sm\" variant=\"secondary\" icon=\"rule\" onClick={() => nav('review')} data-testid=\"mappings-open-review\">\n              {t.actions.openReviewQueue}\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"secondary\"\n              icon=\"refresh\"\n              onClick={() => {\n                setLoading(true);\n                setRefreshNonce((n) => n + 1);\n              }}\n              data-testid=\"mappings-refresh\"\n            >\n              {t.actions.refresh}\n            </Button>\n            {stats.lastEventAt && (\n              <div className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">\n                {t.lastEvent}{' '}\n                <span className=\"text-slate-700 dark:text-slate-200\">\n                  {String(stats.lastEventAt).replace('T', ' ').slice(0, 19)}\n                </span>\n              </div>\n            )}\n          </div>\n        </section>\n\n        <div className=\"grid lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2 space-y-8\">\n            <Card className=\"animate-premium-in\" style={{ animationDelay: '100ms' }}>\n              <CardHeader\n                title={t.charts.transformationAccuracy.title}\n                subtitle={t.charts.transformationAccuracy.subtitle}\n                action={\n                  <div className=\"flex items-center gap-4\">\n                    <LegendDot color=\"bg-blue-600\" label={t.charts.legend.volume} />\n                    <LegendDot color=\"bg-indigo-400\" label={t.charts.legend.avgConfidence} />\n                  </div>\n                }\n              />\n              <CardBody>\n                <DailyChart loading={loading} daily={stats.daily} t={t} />\n              </CardBody>\n            </Card>\n\n            <Card className=\"animate-premium-in\" style={{ animationDelay: '200ms' }}>\n              <CardHeader title={t.facilities.title} subtitle={t.facilities.subtitle} />\n              <div className=\"overflow-x-auto\">\n                <table data-testid=\"mappings-facility-table\" className=\"w-full text-left\">\n                  <thead className=\"bg-slate-50 dark:bg-slate-900/40\">\n                    <tr>\n                      <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">{t.facilities.table.facility}</th>\n                      <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500 text-right\">{t.facilities.table.volume}</th>\n                      <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500\">{t.facilities.table.avgConfidence}</th>\n                      <th className=\"px-6 py-4 text-[10px] font-black uppercase text-slate-500 text-right\">{t.facilities.table.overrides}</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 dark:divide-slate-800\">\n                    {stats.facilities.length > 0 ? (\n                      stats.facilities.map((f) => (\n                        <FacilityRow\n                          key={String(f.facilityId)}\n                          facilityId={f.facilityId}\n                          volume={f.volume}\n                          avgConfidence={Number(f.avgConfidence || 0)}\n                          overrideHits={Number(f.overrideHits || 0)}\n                          warn={Number(f.avgConfidence || 0) < Number(stats.config?.reviewTrigger || 0.5)}\n                          t={t}\n                        />\n                      ))\n                    ) : (\n                      <tr>\n                        <td className=\"px-6 py-10 text-center text-xs font-bold text-slate-400\" colSpan={4}>\n                          {loading\n                            ? t.facilities.empty.loading\n                            : t.facilities.empty.noData}\n                        </td>\n                      </tr>\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </Card>\n          </div>\n\n          <div className=\"space-y-8\">\n            <Card className=\"animate-premium-in\" style={{ animationDelay: '300ms' }}>\n              <CardHeader title={t.anomalies.title} subtitle={t.anomalies.subtitle} />\n              <CardBody className=\"space-y-6\">\n                <div className=\"flex justify-center py-8\">\n                  <div className=\"size-44 rounded-full border-[12px] border-slate-100 dark:border-slate-800 relative flex items-center justify-center\">\n                    <div className=\"absolute inset-0 rounded-full border-[12px] border-blue-600 border-t-transparent -rotate-45\"></div>\n                    <div className=\"text-center\">\n                      <p data-testid=\"mappings-anomalies-total\" className=\"text-3xl font-black text-slate-900 dark:text-white\">\n                        {formatInt(stats.noMatch + stats.rejected)}\n                      </p>\n                      <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1\">{t.anomalies.totalFlags}</p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"space-y-3\" data-testid=\"mappings-anomaly-list\">\n                  <ErrorLink label={t.anomalies.items.noMatch} count={stats.noMatch} color=\"bg-blue-600\" />\n                  <ErrorLink label={t.anomalies.items.rejectedLowConf} count={stats.rejected} color=\"bg-rose-500\" />\n                  <ErrorLink label={t.anomalies.items.overrideHits} count={stats.overrideHits} color=\"bg-indigo-500\" />\n                </div>\n              </CardBody>\n            </Card>\n\n            <Card className=\"bg-indigo-600 text-white animate-premium-in\" style={{ animationDelay: '400ms' }}>\n              <CardBody className=\"p-8 text-center space-y-6\">\n                <div className=\"size-16 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center mx-auto border border-white/20\">\n                  <span className=\"material-symbols-outlined text-3xl\">auto_awesome</span>\n                </div>\n                <div className=\"space-y-2\">\n                  <h4 className=\"text-xl font-black tracking-tight\">{t.aiAudit.title}</h4>\n                  <p className=\"text-sm font-bold text-indigo-100\">\n                    {t.aiAudit.bodyLead}{' '}\n                    <span className=\"font-black\">{formatInt(stats.overrides)}</span>.\n                  </p>\n                </div>\n                <button\n                  onClick={() => nav('mapping_rules')}\n                  className=\"w-full py-4 bg-white text-indigo-600 rounded-2xl font-black uppercase tracking-widest text-[11px] shadow-xl transition-transform active:scale-95\"\n                  data-testid=\"mappings-review-governance\"\n                >\n                  {t.aiAudit.button}\n                </button>\n              </CardBody>\n            </Card>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nfunction formatInt(n) {\n  const x = Number.isFinite(Number(n)) ? Number(n) : 0;\n  return x.toLocaleString();\n}\n\nfunction formatPct(n) {\n  const x = Number.isFinite(Number(n)) ? Number(n) : 0;\n  return Math.round(x * 10) / 10;\n}\n\nfunction formatLatency(ms) {\n  const n = Number.isFinite(Number(ms)) ? Number(ms) : 0;\n  if (n >= 1000) return `${(n / 1000).toFixed(1)}s`;\n  return `${Math.round(n)}ms`;\n}\n\nfunction StatCard({ testId, title, value, trend, icon, color }) {\n  const colors = {\n    blue: 'text-blue-600 bg-blue-600/10',\n    indigo: 'text-indigo-600 bg-indigo-600/10',\n    emerald: 'text-emerald-600 bg-emerald-600/10',\n    amber: 'text-amber-600 bg-amber-600/10',\n  };\n  return (\n    <div\n      data-testid={testId}\n      className=\"glass-card p-6 rounded-[28px] border border-slate-200/50 dark:border-slate-800/50 hover:border-blue-600/30 transition-all group\"\n    >\n      <div className=\"flex justify-between items-start mb-4\">\n        <div className={`size-12 rounded-2xl flex items-center justify-center ${colors[color] || colors.blue} transition-transform group-hover:rotate-6`}>\n          <span className=\"material-symbols-outlined text-2xl\">{icon}</span>\n        </div>\n        <span className=\"text-[11px] font-black px-2 py-1 rounded-lg bg-emerald-500/10 text-emerald-600 border border-emerald-500/20\">\n          {trend}\n        </span>\n      </div>\n      <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-1\">{title}</p>\n      <h4 className=\"text-3xl font-black text-slate-900 dark:text-white tracking-tighter\">{value}</h4>\n    </div>\n  );\n}\n\nfunction LegendDot({ color, label }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <div className={`size-2.5 rounded-full ${color}`}></div>\n      <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-400\">{label}</span>\n    </div>\n  );\n}\n\nfunction FacilityRow({ facilityId, volume, avgConfidence, overrideHits, warn, t }) {\n  const accuracy = Math.round(avgConfidence * 1000) / 10;\n  return (\n    <tr className=\"group hover:bg-slate-50/50 dark:hover:bg-slate-800/20 transition-colors\">\n      <td className=\"px-6 py-5\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"size-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center font-black text-xs text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-all\">\n            {String(facilityId)}\n          </div>\n          <div>\n            <p className=\"text-sm font-bold text-slate-900 dark:text-white\">\n              {t.facilities.row.facilityLabel.replace('{id}', String(facilityId))}\n            </p>\n            <p className=\"text-[10px] font-bold uppercase tracking-widest text-slate-400\">\n              {t.facilities.row.nodeLabel.replace('{id}', String(facilityId))}\n            </p>\n          </div>\n        </div>\n      </td>\n      <td className=\"px-6 py-5 text-right\">\n        <p className=\"text-sm font-black text-slate-700 dark:text-slate-300\">{formatInt(volume)}</p>\n      </td>\n      <td className=\"px-6 py-5\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex-1 h-3 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden w-24 shadow-inner\">\n            <div\n              className={`h-full rounded-full ${warn ? 'bg-amber-500' : 'bg-blue-600'} transition-all duration-1000`}\n              style={{ width: `${Math.max(0, Math.min(100, accuracy))}%` }}\n            ></div>\n          </div>\n          <span className={`text-xs font-black ${warn ? 'text-amber-600' : 'text-blue-600'}`}>{accuracy}%</span>\n        </div>\n      </td>\n      <td className=\"px-6 py-5 text-right\">\n        <p className=\"text-sm font-black text-slate-700 dark:text-slate-300\">{formatInt(overrideHits)}</p>\n      </td>\n    </tr>\n  );\n}\n\nfunction ErrorLink({ label, count, color }) {\n  return (\n    <div className=\"flex items-center justify-between p-3.5 rounded-2xl bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group cursor-pointer border border-transparent hover:border-slate-200 dark:hover:border-slate-700\">\n      <div className=\"flex items-center gap-3\">\n        <div className={`size-2.5 rounded-full ${color}`}></div>\n        <span className=\"text-xs font-bold text-slate-700 dark:text-slate-300\">{label}</span>\n      </div>\n      <span className=\"text-xs font-black text-slate-400 group-hover:text-blue-600\">{formatInt(count)}</span>\n    </div>\n  );\n}\n\nfunction DailyChart({ loading, daily, t }) {\n  const maxVol = Math.max(1, ...daily.map((d) => Number(d.volume || 0)));\n  return (\n    <div\n      data-testid=\"mappings-daily-chart\"\n      className=\"relative w-full h-[320px] rounded-2xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 overflow-hidden\"\n    >\n      <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600/5 to-transparent\"></div>\n      {loading ? (\n        <div className=\"relative h-full flex items-center justify-center\">\n          <div className=\"text-center space-y-3\">\n            <div className=\"size-16 rounded-full bg-blue-600/10 flex items-center justify-center mx-auto text-blue-600\">\n              <span className=\"material-symbols-outlined text-3xl animate-spin\">progress_activity</span>\n            </div>\n            <p className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\">{t.charts.daily.loading}</p>\n          </div>\n        </div>\n      ) : daily.length === 0 ? (\n        <div className=\"relative h-full flex items-center justify-center\">\n          <div className=\"text-center space-y-3 opacity-70\">\n            <div className=\"size-16 rounded-full bg-blue-600/10 flex items-center justify-center mx-auto text-blue-600\">\n              <span className=\"material-symbols-outlined text-3xl\">query_stats</span>\n            </div>\n            <p className=\"text-sm font-bold text-slate-400 uppercase tracking-widest\">{t.charts.daily.empty}</p>\n          </div>\n        </div>\n      ) : (\n        <div className=\"relative h-full px-6 py-8 flex items-end gap-1\">\n          {daily.map((d) => {\n            const vol = Number(d.volume || 0);\n            const avg = Math.max(0, Math.min(1, Number(d.avgConfidence || 0)));\n            const hVol = Math.round((vol / maxVol) * 100);\n            const hConf = Math.round(avg * 100);\n            return (\n              <div key={d.day} className=\"flex-1 min-w-0 flex flex-col justify-end items-center gap-1\">\n                <div className=\"w-full rounded-t bg-blue-600/70\" style={{ height: `${Math.max(2, hVol)}%` }} title={`${d.day} volume=${vol}`}></div>\n                <div className=\"w-full rounded-t bg-indigo-400/70\" style={{ height: `${Math.max(2, hConf)}%` }} title={`${d.day} avgConfidence=${Math.round(avg * 100)}%`}></div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["MappingsPage","lang","toast","useToast","i18n","loading","setLoading","useState","telemetry","setTelemetry","error","setError","refreshNonce","setRefreshNonce","useEffect","cancelled","fetchTelemetry","data","APIService","e","interval","stats","useMemo","totals","kpis","nav","view","jsxs","jsx","SectionHeader","StatCard","formatInt","formatPct","formatLatency","Button","n","Card","CardHeader","LegendDot","CardBody","DailyChart","f","FacilityRow","ErrorLink","x","ms","testId","title","value","trend","icon","color","colors","label","facilityId","volume","avgConfidence","overrideHits","warn","t","accuracy","count","daily","maxVol","d","vol","avg","hVol","hConf"],"mappings":"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"}