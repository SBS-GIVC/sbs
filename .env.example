# =============================================================================
# SBS Integration Engine - Environment Configuration
# =============================================================================
# IMPORTANT: Copy this file to .env and fill in all required values
# DO NOT commit the .env file to version control
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION (Required)
# -----------------------------------------------------------------------------
# PostgreSQL database connection settings
DB_HOST=postgres
DB_NAME=sbs_integration
DB_USER=sbs_user
DB_PASSWORD=  # REQUIRED: Use a strong password (min 16 chars, mixed case, numbers, symbols)
DB_PORT=5432

# -----------------------------------------------------------------------------
# NPHIES API CONFIGURATION (Required for production)
# -----------------------------------------------------------------------------
# NPHIES environment: sandbox or production
NPHIES_ENV=sandbox
NPHIES_BASE_URL=https://sandbox.nphies.sa/api/v1
NPHIES_API_KEY=  # REQUIRED: Your NPHIES API key
NPHIES_TIMEOUT=30
NPHIES_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# CERTIFICATE CONFIGURATION (Required for signing)
# -----------------------------------------------------------------------------
# Path to certificates directory
CERT_BASE_PATH=/certs
# Password for encrypted private keys (leave empty if keys are not encrypted)
CERT_PASSWORD=
# Enable test certificate generation (set to false in production)
ENABLE_TEST_CERTIFICATES=false

# -----------------------------------------------------------------------------
# GEMINI AI CONFIGURATION (Optional - for AI-powered normalization)
# -----------------------------------------------------------------------------
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.0-flash-exp

# -----------------------------------------------------------------------------
# N8N WORKFLOW ENGINE CONFIGURATION (Required)
# -----------------------------------------------------------------------------
N8N_USER=admin
N8N_PASSWORD=  # REQUIRED: Use a strong password (min 16 chars)
N8N_HOST=localhost
N8N_PROTOCOL=https
N8N_SECURE_COOKIE=true
N8N_ENCRYPTION_KEY=  # REQUIRED: 32-character random string for encrypting credentials
N8N_WEBHOOK_URL=http://n8n:5678/webhook/sbs-claim-submission

# -----------------------------------------------------------------------------
# SECURITY CONFIGURATION (Required)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed CORS origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
# Node.js environment (development or production)
NODE_ENV=production
# Enable direct SBS service calls (bypassing n8n)
ENABLE_DIRECT_SBS=false

# -----------------------------------------------------------------------------
# PGADMIN CONFIGURATION (Optional - for database management)
# -----------------------------------------------------------------------------
# Only enable in development or secure networks
PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=  # REQUIRED if using pgAdmin: Use a strong password

# -----------------------------------------------------------------------------
# LANDING API CONFIGURATION
# -----------------------------------------------------------------------------
PORT=3000

# =============================================================================
# PRODUCTION CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
# [ ] All passwords are strong (min 16 chars, mixed case, numbers, symbols)
# [ ] NPHIES_ENV is set to "production"
# [ ] NPHIES_API_KEY is the production key
# [ ] ENABLE_TEST_CERTIFICATES is set to "false"
# [ ] NODE_ENV is set to "production"
# [ ] ALLOWED_ORIGINS contains only your actual domains
# [ ] N8N_PROTOCOL is set to "https"
# [ ] N8N_SECURE_COOKIE is set to "true"
# [ ] N8N_ENCRYPTION_KEY is set to a secure random value
# [ ] SSL/TLS certificates are properly configured
# [ ] Database backups are configured
# [ ] Monitoring and alerting are set up
# =============================================================================
