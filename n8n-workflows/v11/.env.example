# ==============================================================================
# SBS Integration v11 - Environment Variables
# ==============================================================================

# ------------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# ------------------------------------------------------------------------------

# API key for webhook authentication
# Generate with: openssl rand -hex 32
SBS_API_KEY=your-secret-api-key-here

# Comma-separated list of authorized facility IDs
AUTHORIZED_FACILITIES=FAC001,FAC002,FAC003

# Optional: Encryption key for PHI data
ENCRYPTION_KEY_ID=key-2026-01
ENCRYPTION_KEY_SECRET=your-encryption-secret

# ------------------------------------------------------------------------------
# SERVICE ENDPOINTS
# ------------------------------------------------------------------------------

# AI Normalizer Service
SBS_NORMALIZER_URL=http://sbs-normalizer:8000

# Financial Rules Engine
SBS_FINANCIAL_RULES_URL=http://sbs-financial-rules:8002

# Digital Signer Service
SBS_SIGNER_URL=http://sbs-signer:8001

# NPHIES Bridge Service
SBS_NPHIES_BRIDGE_URL=http://sbs-nphies-bridge:8003

# ------------------------------------------------------------------------------
# MONITORING & OBSERVABILITY
# ------------------------------------------------------------------------------

# Audit log endpoint (optional)
AUDIT_LOG_ENDPOINT=https://audit.brainsait.com/log

# Error notification webhook (Slack, Teams, etc.)
ERROR_NOTIFICATION_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Application insights / telemetry
APPINSIGHTS_INSTRUMENTATION_KEY=your-instrumentation-key

# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------

# Enable circuit breaker (true/false)
ENABLE_CIRCUIT_BREAKER=true

# Enable detailed audit logging (true/false)
ENABLE_DETAILED_LOGGING=true

# Enable error notifications (true/false)
ENABLE_ERROR_NOTIFICATIONS=false

# ------------------------------------------------------------------------------
# PERFORMANCE TUNING
# ------------------------------------------------------------------------------

# HTTP request timeout (milliseconds)
HTTP_TIMEOUT=30000

# Max retry attempts
MAX_RETRY_ATTEMPTS=3

# Circuit breaker failure threshold
CIRCUIT_BREAKER_THRESHOLD=5

# Circuit breaker timeout (milliseconds)
CIRCUIT_BREAKER_TIMEOUT=60000

# ------------------------------------------------------------------------------
# BUSINESS RULES
# ------------------------------------------------------------------------------

# Maximum claim amount without approval (SAR)
MAX_CLAIM_AMOUNT=50000

# Maximum unit price (SAR)
MAX_UNIT_PRICE=1000000

# Maximum quantity per claim
MAX_QUANTITY=1000

# Claim age threshold (days)
MAX_CLAIM_AGE_DAYS=365

# ------------------------------------------------------------------------------
# NPHIES CONFIGURATION
# ------------------------------------------------------------------------------

# NPHIES environment (sandbox/production)
NPHIES_ENVIRONMENT=sandbox

# NPHIES API version
NPHIES_API_VERSION=1.0.0

# NPHIES authentication endpoint
NPHIES_AUTH_URL=https://hsb.nphies.sa/oauth2/token

# NPHIES submission endpoint
NPHIES_SUBMIT_URL=https://hsb.nphies.sa/fhir/Claim

# ------------------------------------------------------------------------------
# DATABASE (Optional - for async processing)
# ------------------------------------------------------------------------------

# Redis connection string (for queue)
REDIS_URL=redis://localhost:6379

# PostgreSQL connection (for audit logs)
DATABASE_URL=postgresql://user:password@localhost:5432/sbs_integration

# ------------------------------------------------------------------------------
# DEVELOPMENT / DEBUG
# ------------------------------------------------------------------------------

# Debug mode (true/false)
DEBUG=false

# Log level (debug/info/warn/error)
LOG_LEVEL=info

# Enable request/response logging (true/false)
LOG_HTTP_REQUESTS=true
