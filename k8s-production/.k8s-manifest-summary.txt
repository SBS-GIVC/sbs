â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            SBS Kubernetes Production Manifests - Summary                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ Location: /home/fadil369/sbs/k8s-production/

âœ… CREATED FILES:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ Kubernetes Manifests (10 files):
  1. 00-namespace.yaml       - Namespace: sbs-prod
  2. 01-secrets.yaml         - Secrets template (âš ï¸ UPDATE BEFORE DEPLOY)
  3. 02-configmap.yaml       - ConfigMap for services
  4. 03-postgres.yaml        - PostgreSQL StatefulSet + PVC (20Gi)
  5. 04-normalizer.yaml      - Normalizer: 2 replicas, port 8000
  6. 05-signer.yaml          - Signer: 2 replicas, port 8001
  7. 06-financial.yaml       - Financial: 2 replicas, port 8002
  8. 07-nphies.yaml          - NPHIES: 2 replicas, port 8003
  9. 08-frontend.yaml        - Frontend: Nginx + React (hostPath)
  10. 09-ingress.yaml        - Traefik Ingress + Middlewares

ğŸ”§ Scripts & Documentation:
  â€¢ deploy-sbs-k8s.sh        - Automated deployment script (executable)
  â€¢ verify-deployment.sh     - Deployment verification script (executable)
  â€¢ README.md                - Comprehensive documentation (8.5 KB)
  â€¢ QUICK_START.md           - Quick reference guide (6.4 KB)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ KEY FEATURES:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ Health Checks            - Liveness & readiness probes on all services
âœ“ Resource Limits          - CPU and memory requests/limits defined
âœ“ High Availability        - 2 replicas per microservice
âœ“ Pod Anti-Affinity        - Spread pods across nodes
âœ“ Persistent Storage       - 20Gi PVC for PostgreSQL
âœ“ Security Headers         - X-Frame-Options, CSP, HSTS
âœ“ Rate Limiting            - 100 req/min, burst 50
âœ“ TLS/SSL Ready            - Traefik ingress with TLS support
âœ“ Rolling Updates          - Zero-downtime deployments
âœ“ Horizontal Scaling       - HPA ready
âœ“ Local Images             - imagePullPolicy: Never
âœ“ Frontend Optimization    - Gzip, caching, API proxy

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š RESOURCE ALLOCATION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Service      Replicas  CPU Req  CPU Limit  RAM Req  RAM Limit  Port
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Normalizer      2      100m     500m       256Mi    1Gi        8000
Signer          2      100m     500m       256Mi    1Gi        8001
Financial       2      100m     500m       256Mi    1Gi        8002
NPHIES          2      100m     500m       256Mi    1Gi        8003
PostgreSQL      1      250m     1000m      512Mi    2Gi        5432
Frontend        1      50m      200m       64Mi     256Mi      80

Total Request: 1.15 CPU, 2.8 GB RAM (when all running)
Total Limit:   4.5 CPU, 10.25 GB RAM (max usage)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ QUICK DEPLOY:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Update secrets (IMPORTANT!):
   nano 01-secrets.yaml

2. Deploy:
   ./deploy-sbs-k8s.sh --dry-run    # Test first
   ./deploy-sbs-k8s.sh               # Actual deploy

3. Verify:
   ./verify-deployment.sh

4. Monitor:
   kubectl get pods -n sbs-prod -w

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŒ ACCESS URLs (after deployment):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Main Application: https://brainsait-pi.taile21830.ts.net
API Endpoints:
  â€¢ Normalizer:  https://brainsait-pi.taile21830.ts.net/api/normalizer
  â€¢ Signer:      https://brainsait-pi.taile21830.ts.net/api/signer
  â€¢ Financial:   https://brainsait-pi.taile21830.ts.net/api/financial
  â€¢ NPHIES:      https://brainsait-pi.taile21830.ts.net/api/nphies

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  PRE-DEPLOYMENT CHECKLIST:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â˜ Update all secrets in 01-secrets.yaml
â˜ Build Docker images locally:
    docker build -t sbs-normalizer:latest ./normalizer
    docker build -t sbs-signer:latest ./signer
    docker build -t sbs-financial:latest ./financial
    docker build -t sbs-nphies:latest ./nphies
â˜ Build frontend:
    cd /home/fadil369/sbs/sbs-landing && npm run build
â˜ Verify K3s/K8s cluster running:
    kubectl cluster-info
â˜ Check node resources:
    kubectl top nodes

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ” USEFUL COMMANDS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Status:
  kubectl get all -n sbs-prod
  kubectl get pods -n sbs-prod -w
  kubectl top pods -n sbs-prod

Logs:
  kubectl logs -f deployment/normalizer -n sbs-prod
  kubectl logs -f postgres-0 -n sbs-prod

Debug:
  kubectl describe pod <pod-name> -n sbs-prod
  kubectl get events -n sbs-prod --sort-by='.lastTimestamp'

Scale:
  kubectl scale deployment normalizer -n sbs-prod --replicas=3

Update:
  kubectl rollout restart deployment/normalizer -n sbs-prod
  kubectl rollout status deployment/normalizer -n sbs-prod

Cleanup:
  kubectl delete namespace sbs-prod

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“š DOCUMENTATION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â€¢ README.md       - Full documentation with troubleshooting
â€¢ QUICK_START.md  - Quick reference for common tasks

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Status: Production Ready
ğŸ“… Created: January 2025
ğŸ¢ Brain Sait Technologies

